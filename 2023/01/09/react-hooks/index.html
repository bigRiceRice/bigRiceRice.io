<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React - Hooks | Big Rice ğŸš</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="å…³äº Hooks">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6df1b568.css" as="style"><link rel="preload" href="/blog/assets/js/app.7be931a0.js" as="script"><link rel="preload" href="/blog/assets/js/6.4adeed80.js" as="script"><link rel="preload" href="/blog/assets/js/3.606773b1.js" as="script"><link rel="preload" href="/blog/assets/js/73.076e80b8.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5590a827.js"><link rel="prefetch" href="/blog/assets/js/11.168de83c.js"><link rel="prefetch" href="/blog/assets/js/12.568a4166.js"><link rel="prefetch" href="/blog/assets/js/13.622f4310.js"><link rel="prefetch" href="/blog/assets/js/14.d53a8be2.js"><link rel="prefetch" href="/blog/assets/js/15.d79e15f8.js"><link rel="prefetch" href="/blog/assets/js/16.588f5b28.js"><link rel="prefetch" href="/blog/assets/js/17.313e1789.js"><link rel="prefetch" href="/blog/assets/js/18.4032e905.js"><link rel="prefetch" href="/blog/assets/js/19.f381fac9.js"><link rel="prefetch" href="/blog/assets/js/20.6ed4eadb.js"><link rel="prefetch" href="/blog/assets/js/21.36720e28.js"><link rel="prefetch" href="/blog/assets/js/22.cb313a94.js"><link rel="prefetch" href="/blog/assets/js/23.e9047b6d.js"><link rel="prefetch" href="/blog/assets/js/24.b6ef68b5.js"><link rel="prefetch" href="/blog/assets/js/25.80842e38.js"><link rel="prefetch" href="/blog/assets/js/26.759370b1.js"><link rel="prefetch" href="/blog/assets/js/27.0853cfce.js"><link rel="prefetch" href="/blog/assets/js/28.ea5c86d6.js"><link rel="prefetch" href="/blog/assets/js/29.3f742b68.js"><link rel="prefetch" href="/blog/assets/js/30.07a7e574.js"><link rel="prefetch" href="/blog/assets/js/31.bbd098e3.js"><link rel="prefetch" href="/blog/assets/js/32.ce9b6eaa.js"><link rel="prefetch" href="/blog/assets/js/33.1e9cab45.js"><link rel="prefetch" href="/blog/assets/js/34.7a8c94b5.js"><link rel="prefetch" href="/blog/assets/js/35.e69c119d.js"><link rel="prefetch" href="/blog/assets/js/36.567f1f05.js"><link rel="prefetch" href="/blog/assets/js/37.3ad6ab5d.js"><link rel="prefetch" href="/blog/assets/js/38.be899865.js"><link rel="prefetch" href="/blog/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/blog/assets/js/4.34a3a307.js"><link rel="prefetch" href="/blog/assets/js/40.9348ddae.js"><link rel="prefetch" href="/blog/assets/js/41.6f835683.js"><link rel="prefetch" href="/blog/assets/js/42.80a7b102.js"><link rel="prefetch" href="/blog/assets/js/43.26376eac.js"><link rel="prefetch" href="/blog/assets/js/44.b69b697f.js"><link rel="prefetch" href="/blog/assets/js/45.6368e269.js"><link rel="prefetch" href="/blog/assets/js/46.2c134927.js"><link rel="prefetch" href="/blog/assets/js/47.aa7eacac.js"><link rel="prefetch" href="/blog/assets/js/48.2cf1db2b.js"><link rel="prefetch" href="/blog/assets/js/49.5c77de56.js"><link rel="prefetch" href="/blog/assets/js/5.44ec780a.js"><link rel="prefetch" href="/blog/assets/js/50.ad5e5ae9.js"><link rel="prefetch" href="/blog/assets/js/51.870855b2.js"><link rel="prefetch" href="/blog/assets/js/52.9cf1cb74.js"><link rel="prefetch" href="/blog/assets/js/53.d4b795ae.js"><link rel="prefetch" href="/blog/assets/js/54.1272cce0.js"><link rel="prefetch" href="/blog/assets/js/55.5046e0eb.js"><link rel="prefetch" href="/blog/assets/js/56.6d6b64d7.js"><link rel="prefetch" href="/blog/assets/js/57.b1ab4ac7.js"><link rel="prefetch" href="/blog/assets/js/58.ba742252.js"><link rel="prefetch" href="/blog/assets/js/59.ac0a7da9.js"><link rel="prefetch" href="/blog/assets/js/60.32c19999.js"><link rel="prefetch" href="/blog/assets/js/61.6456d5a0.js"><link rel="prefetch" href="/blog/assets/js/62.1db2470e.js"><link rel="prefetch" href="/blog/assets/js/63.85e80e9d.js"><link rel="prefetch" href="/blog/assets/js/64.de37d74a.js"><link rel="prefetch" href="/blog/assets/js/65.c2976787.js"><link rel="prefetch" href="/blog/assets/js/66.6dd17a78.js"><link rel="prefetch" href="/blog/assets/js/67.24ba54c4.js"><link rel="prefetch" href="/blog/assets/js/68.e277f1c7.js"><link rel="prefetch" href="/blog/assets/js/69.f231e3ab.js"><link rel="prefetch" href="/blog/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/blog/assets/js/70.d6112df9.js"><link rel="prefetch" href="/blog/assets/js/71.58db827b.js"><link rel="prefetch" href="/blog/assets/js/72.c9e8e6db.js"><link rel="prefetch" href="/blog/assets/js/74.09ac90c6.js"><link rel="prefetch" href="/blog/assets/js/75.72330813.js"><link rel="prefetch" href="/blog/assets/js/76.e37d92f0.js"><link rel="prefetch" href="/blog/assets/js/77.7b5bcb83.js"><link rel="prefetch" href="/blog/assets/js/78.a9430248.js"><link rel="prefetch" href="/blog/assets/js/79.bc097473.js"><link rel="prefetch" href="/blog/assets/js/8.222ede8f.js"><link rel="prefetch" href="/blog/assets/js/80.6a28ee25.js"><link rel="prefetch" href="/blog/assets/js/81.49095bba.js"><link rel="prefetch" href="/blog/assets/js/82.f0217ad4.js"><link rel="prefetch" href="/blog/assets/js/83.e30150fb.js"><link rel="prefetch" href="/blog/assets/js/84.26b7d911.js"><link rel="prefetch" href="/blog/assets/js/85.355f82fb.js"><link rel="prefetch" href="/blog/assets/js/86.f08bab41.js"><link rel="prefetch" href="/blog/assets/js/87.d1c5c653.js"><link rel="prefetch" href="/blog/assets/js/88.837e1a7f.js"><link rel="prefetch" href="/blog/assets/js/89.fca6b2d0.js"><link rel="prefetch" href="/blog/assets/js/9.b604d7b7.js"><link rel="prefetch" href="/blog/assets/js/90.f8d6366e.js"><link rel="prefetch" href="/blog/assets/js/91.c2b4f4d0.js"><link rel="prefetch" href="/blog/assets/js/92.cb4edbcf.js"><link rel="prefetch" href="/blog/assets/js/93.1c4e8009.js"><link rel="prefetch" href="/blog/assets/js/94.8e555db1.js"><link rel="prefetch" href="/blog/assets/js/95.9066a67f.js"><link rel="prefetch" href="/blog/assets/js/96.383f3a21.js"><link rel="prefetch" href="/blog/assets/js/97.2c96f1a6.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6df1b568.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">Big Rice ğŸš </a> <button class="back" style="display:;">â†©</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blog/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="nav-item"><a href="/blog/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/blog/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">Big Rice ğŸš </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blog/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="mobile-nav-item"><a href="/blog/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/blog/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        React - Hooks
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address"> Â  in äº‘æ¢¦æ³½</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2023-01-09T00:00:00.000Z">
      2023-01-09
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/React" data-v-42ccfcd5><span data-v-42ccfcd5>React</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="ğŸŒ -ä»€ä¹ˆæ˜¯-hooks"><a href="#ğŸŒ -ä»€ä¹ˆæ˜¯-hooks" class="header-anchor">#</a> ğŸŒ  ä»€ä¹ˆæ˜¯ Hooks</h2> <p><em>Hook</em> æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p> <p>ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥äº†è§£ React é‚£äº›å¸¸ç”¨çš„ Hook å§ï¼</p> <p>æ¯”å¦‚ <code>useState</code> å°±æ˜¯ä¸€ä¸ª <em>Hook</em></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å£°æ˜ä¸€ä¸ªæ–°çš„å«åš â€œcountâ€ çš„ state å˜é‡</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Click me
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>Hook</em> å…¶å®å°±æ˜¯ JavaScript å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬ä¼šæœ‰ä¸¤ä¸ªé¢å¤–çš„è§„åˆ™ï¼š</p> <ul><li>åªèƒ½åœ¨<strong>å‡½æ•°æœ€å¤–å±‚</strong>è°ƒç”¨ Hookã€‚ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚</li> <li>åªèƒ½åœ¨ <strong>React çš„å‡½æ•°ç»„ä»¶</strong>ä¸­è°ƒç”¨ Hookã€‚ä¸èƒ½åœ¨å…¶ä»–æ™®é€š JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚</li></ul> <p>åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè¯·è®°ä½ Hook æ˜¯ï¼š</p> <ul><li><strong>å®Œå…¨å¯é€‰çš„ã€‚</strong> ä½ æ— éœ€é‡å†™ä»»ä½•å·²æœ‰ä»£ç å°±å¯ä»¥åœ¨ä¸€äº›ç»„ä»¶ä¸­å°è¯• Hookã€‚ä½†æ˜¯å¦‚æœä½ ä¸æƒ³ï¼Œä½ ä¸å¿…ç°åœ¨å°±å»å­¦ä¹ æˆ–ä½¿ç”¨ Hookã€‚</li> <li><strong>100% å‘åå…¼å®¹çš„ã€‚</strong> Hook ä¸åŒ…å«ä»»ä½•ç ´åæ€§æ”¹åŠ¨ã€‚</li> <li><strong>ç°åœ¨å¯ç”¨ã€‚</strong> Hook å·²å‘å¸ƒäº v16.8.0ã€‚</li></ul> <p><strong>æ²¡æœ‰è®¡åˆ’ä» React ä¸­ç§»é™¤ classã€‚</strong></p> <p><strong>Hook ä¸ä¼šå½±å“ä½ å¯¹ React æ¦‚å¿µçš„ç†è§£ã€‚</strong> æ°æ°ç›¸åï¼ŒHook ä¸ºå·²çŸ¥çš„ React æ¦‚å¿µæä¾›äº†æ›´ç›´æ¥çš„ APIï¼špropsï¼Œ stateï¼Œcontextï¼Œrefs ä»¥åŠç”Ÿå‘½å‘¨æœŸã€‚ç¨åæˆ‘ä»¬å°†çœ‹åˆ°ï¼ŒHook è¿˜æä¾›äº†ä¸€ç§æ›´å¼ºå¤§çš„æ–¹å¼æ¥ç»„åˆä»–ä»¬ã€‚</p> <h2 id="ä¸ºä»€ä¹ˆéœ€è¦-hook"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-hook" class="header-anchor">#</a> ä¸ºä»€ä¹ˆéœ€è¦ <em>Hook</em> ï¼Ÿ</h2> <p>Hook è§£å†³äº†æˆ‘ä»¬äº”å¹´æ¥ç¼–å†™å’Œç»´æŠ¤æˆåƒä¸Šä¸‡çš„ç»„ä»¶æ—¶é‡åˆ°çš„å„ç§å„æ ·çœ‹èµ·æ¥ä¸ç›¸å…³çš„é—®é¢˜ã€‚æ— è®ºä½ æ­£åœ¨å­¦ä¹  Reactï¼Œæˆ–æ¯å¤©ä½¿ç”¨ï¼Œæˆ–è€…æ›´æ„¿å°è¯•å¦ä¸€ä¸ªå’Œ React æœ‰ç›¸ä¼¼ç»„ä»¶æ¨¡å‹çš„æ¡†æ¶ï¼Œä½ éƒ½å¯èƒ½å¯¹è¿™äº›é—®é¢˜ä¼¼æ›¾ç›¸è¯†ã€‚</p> <h3 id="ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†"><a href="#ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†" class="header-anchor">#</a> ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼</h3> <p>æˆ‘ä»¬éƒ½çŸ¥é“ react çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œ<strong>å°†ä¸€ä¸ªé¡µé¢æ‹†æˆä¸€å †ç‹¬ç«‹çš„ï¼Œå¯å¤ç”¨çš„ç»„ä»¶</strong>ï¼Œå¹¶ä¸”ç”¨è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµçš„å½¢å¼å°†è¿™äº›ç»„ä»¶ä¸²è”èµ·æ¥ã€‚</p> <p>ä½†å‡å¦‚ä½ åœ¨å¤§å‹çš„å·¥ä½œé¡¹ç›®ä¸­ç”¨ reactï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ä¸­å®é™…ä¸Šå¾ˆå¤š react ç»„ä»¶å†—é•¿ä¸”éš¾ä»¥å¤ç”¨ã€‚å°¤å…¶æ˜¯é‚£äº›å†™æˆclassçš„ç»„ä»¶ï¼Œå®ƒä»¬æœ¬èº«åŒ…å«äº†çŠ¶æ€ï¼ˆstateï¼‰ï¼Œæ‰€ä»¥å¤ç”¨è¿™ç±»ç»„ä»¶å°±å˜å¾—å¾ˆéº»çƒ¦ã€‚</p> <p>é‚£ä¹‹å‰ï¼Œå®˜æ–¹æ¨èæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Freactjs.org%2Fdocs%2Frender-props.html" target="_blank" rel="noopener noreferrer">æ¸²æŸ“å±æ€§ï¼ˆRender Propsï¼‰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å’Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhigher-order-components.html" target="_blank" rel="noopener noreferrer">é«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>ä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ä½ çš„ç»„ä»¶ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œä½¿ä½ çš„ä»£ç éš¾ä»¥ç†è§£ã€‚</p> <p>å¦‚æœä½ åœ¨ React DevTools ä¸­è§‚å¯Ÿè¿‡ React åº”ç”¨ï¼Œä½ ä¼šå‘ç°ç”± providersï¼Œconsumersï¼Œé«˜é˜¶ç»„ä»¶ï¼Œrender props ç­‰å…¶ä»–æŠ½è±¡å±‚ç»„æˆçš„ç»„ä»¶ä¼šå½¢æˆâ€œ<strong>åµŒå¥—åœ°ç‹±</strong>â€œï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301151749461.webp" style="zoom:67%;"> <p>å°½ç®¡æˆ‘ä»¬å¯ä»¥<a href="https://github.com/facebook/react-devtools/pull/503" target="_blank" rel="noopener noreferrer">åœ¨ DevTools è¿‡æ»¤æ‰å®ƒä»¬<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œä½†è¿™è¯´æ˜äº†ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼š<strong>React éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŸç”Ÿé€”å¾„</strong>ã€‚</p> <p>ä½†ä½ å¯ä»¥ä½¿ç”¨ Hook ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚<strong>Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚</strong> è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚</p> <h3 id="äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§"><a href="#äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§" class="header-anchor">#</a> äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§ï¼</h3> <p>æˆ‘ä»¬é€šå¸¸å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…ï¼Œä½†æˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œé€šå¸¸åŒæ—¶åšäº†å¾ˆå¤šäº‹æƒ…ã€‚</p> <p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ <code>componentDidMount</code> ä¸­å‘èµ· ajax è¯·æ±‚è·å–æ•°æ®ï¼Œç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬ç­‰ç­‰ã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åœ¨<code>componentDidUpdate</code> åšä¸€éåŒæ ·çš„äº‹æƒ…ã€‚å½“é¡¹ç›®å˜å¤æ‚åï¼Œä¹¦å†™è¿™ç§é‡å¤çš„ä»£ç æ˜¯å¾ˆæµªè´¹æ—¶é—´çš„ã€‚</p> <p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>Hook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰</strong>ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ reducer æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚</p> <h3 id="ä¸‰ã€class-çœŸçš„å¤ªè®©äººå›°æƒ‘äº†"><a href="#ä¸‰ã€class-çœŸçš„å¤ªè®©äººå›°æƒ‘äº†" class="header-anchor">#</a> ä¸‰ã€class çœŸçš„å¤ªè®©äººå›°æƒ‘äº†ï¼</h3> <p>é™¤äº†ä»£ç å¤ç”¨å’Œä»£ç ç®¡ç†ä¼šé‡åˆ°å›°éš¾å¤–ï¼Œclass æ˜¯å­¦ä¹  React çš„ä¸€å¤§å±éšœã€‚ä½ å¿…é¡»å»ç†è§£ JavaScript ä¸­ <code>this</code> çš„å·¥ä½œæ–¹å¼ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚</p> <p>è€Œä¸”ä½ è¿˜ä¸èƒ½å¿˜è®°ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚å¦‚æœä¸ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields#public_instance_fields" target="_blank" rel="noopener noreferrer">ES2022 public class fields<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè¿™äº›ä»£ç éå¸¸å†—ä½™ã€‚å¤§å®¶å¯ä»¥å¾ˆå¥½åœ°ç†è§£ propsï¼Œstate å’Œè‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµï¼Œä½†å¯¹ class å´ä¸€ç­¹è«å±•ã€‚</p> <p>å³ä¾¿åœ¨æœ‰ç»éªŒçš„ React å¼€å‘è€…ä¹‹é—´ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶çš„å·®å¼‚ä¹Ÿå­˜åœ¨åˆ†æ­§ï¼Œç”šè‡³è¿˜è¦åŒºåˆ†ä¸¤ç§ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ã€‚</p> <p>ä¸ºäº†è§£å†³ä»¥ä¸Šè¿™äº›é—®é¢˜ï¼Œ<strong>Hook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚</strong></p> <p>ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥åŸåˆ™ã€‚Hook æä¾›äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„å‡½æ•°å¼æˆ–å“åº”å¼ç¼–ç¨‹æŠ€æœ¯ã€‚</p> <h2 id="ä¸€äº›å¸¸ç”¨çš„-hook"><a href="#ä¸€äº›å¸¸ç”¨çš„-hook" class="header-anchor">#</a> ä¸€äº›å¸¸ç”¨çš„ <em>Hook</em></h2> <h3 id="ğŸ§-usestate"><a href="#ğŸ§-usestate" class="header-anchor">#</a> ğŸ§ <em>useState</em></h3> <blockquote><p><code>useState</code> çš„ç”¨æ³•ä¸ Vue3 çš„ <code>ref</code> å‡½æ•°ç±»ä¼¼ï¼Œä¸è¿‡å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«<strong>å½“å‰</strong>çŠ¶æ€å’Œä¸€ä¸ªè®©ä½ æ›´æ–°å®ƒçš„å‡½æ•°ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>initialState</code>ï¼š<strong>å¿…éœ€</strong>ï¼Œè®¾ç½®åˆå§‹å€¼</li> <li><code>state</code>ï¼šåˆå§‹å€¼çš„çŠ¶æ€å¼•ç”¨</li> <li><code>setState</code>ï¼šæ›´æ–°çŠ¶æ€çš„å‡½æ•°</li></ul> <h4 id="å…³äº-setstate"><a href="#å…³äº-setstate" class="header-anchor">#</a> å…³äº <em>setState</em></h4> <p>è¯­æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setState</span><span class="token punctuation">(</span>updater<span class="token punctuation">)</span>
updater <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">lastState</span> <span class="token operator">=&gt;</span> state <span class="token operator">|</span> state <span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å‡½æ•°ä¼ é€’ç»™ <code>setState</code>ã€‚è¯¥å‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚</p> <blockquote><p>ğŸ”´ æ³¨æ„ï¼š</p> <p>ä¸ç±»ç»„ä»¶ä¸­çš„ <code>setState</code> æ–¹æ³•ä¸åŒï¼Œ<code>useState</code> <em>Hook</em> çš„ <code>setState</code> çš„è¡Œä¸ºå°†æ˜¯ç›´æ¥æ›¿æ¢åŸçŠ¶æ€ï¼Œä¸”<strong>åœ¨æ–°æ—§çŠ¶æ€å¼•ç”¨åœ°å€ä¸å˜çš„æƒ…å†µä¸‹</strong>ï¼Œå°†ä¸ä¼šè§¦å‘æ¨¡æ¿æ›´æ–°ï¼ï¼</p> <p>ä½ å¯ä»¥ç”¨å‡½æ•°å¼çš„ <code>setState</code> ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.assign</span>
	<span class="token comment">// å¿…é¡»æ›´æ–°åŸçŠ¶æ€çš„å¼•ç”¨åœ°å€ï¼Œä¸ç„¶å°†ä¸ä¼šè§¦å‘æ¨¡æ¿æ›´æ–°ï¼ï¼ï¼</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">...</span>prevState<span class="token punctuation">,</span> <span class="token operator">...</span>updatedValues<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h4 id="å…³äº-initialstate"><a href="#å…³äº-initialstate" class="header-anchor">#</a> å…³äº <em>initialState</em></h4> <p><em>initialState</em> ç”¨äºåˆå§‹åŒ–ä¸€ä¸ª state çŠ¶æ€ï¼Œä½†ä¸€å®šä¸è¦å†™æˆè¿™æ ·çš„å½¢å¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å‡è®¾æˆ‘ä»¬çš„ state éœ€è¦ç»è¿‡å¤§é‡çš„è®¡ç®—</span>
<span class="token keyword">function</span> <span class="token function">clacState</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">10086</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span> <span class="token function">clacState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´</span>

<span class="token keyword">class</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">State</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´</span>
</code></pre></div><p>ä¸è¦ç›´æ¥åœ¨ <em>initialState</em> ä¸­ç›´æ¥è°ƒç”¨å‡½æ•°æˆ–è°ƒç”¨ä¸€ä¸ªç±»çš„åˆå§‹åŒ–å‡½æ•°ï¼Œè¿™å°†å½±å“æ€§èƒ½ä¸”å¯èƒ½ä¼šé€ æˆä¸ºæ­¢çš„ BUGï¼Œå› ä¸ºæ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“éƒ½ä¼šé‡æ–°è°ƒç”¨ã€‚</p> <p>è€Œä¸” <em>initialState</em> æ˜¯å¯ä»¥æƒ°æ€§åˆå§‹åŒ–çš„ã€‚ä¸Šè¿°ä»£ç åº”è¯¥ä¿®æ”¹æˆå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å‡è®¾æˆ‘ä»¬çš„ state éœ€è¦ç»è¿‡å¤§é‡çš„è®¡ç®—</span>
<span class="token keyword">function</span> <span class="token function">clacState</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">10086</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span> clacState <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸŸ¢</span>

<span class="token keyword">class</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">State</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´</span>
</code></pre></div><h3 id="ğŸ—-usereducer"><a href="#ğŸ—-usereducer" class="header-anchor">#</a> ğŸ— <em>useReducer</em></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>reducer</code>ï¼š<strong>å¿…éœ€</strong>ï¼ŒçŠ¶æ€çš„è§„åˆ™</li> <li><code>initialArg</code>ï¼š<strong>å¿…éœ€</strong>ï¼ŒçŠ¶æ€çš„åˆå§‹å€¼</li> <li><code>init</code>ï¼šå¯é€‰ï¼ŒçŠ¶æ€çš„æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</li> <li><code>state</code>ï¼šæœ€æ–°çš„çŠ¶æ€</li> <li><code>dispatch</code>ï¼šè°ƒç”¨è§„åˆ™çš„å‡½æ•°ï¼Œè¯­æ³•ä¸º <code>dispatch({type: 'xxx'})}</code></li></ul> <p><code>useReducer</code> ä¸º <a href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usestate" target="_blank" rel="noopener noreferrer"><code>useState</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ <code>(state, action) =&gt; newState</code> çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ <code>dispatch</code> æ–¹æ³•ã€‚ï¼ˆå¦‚æœä½ ç†Ÿæ‚‰ Redux çš„è¯ï¼Œå°±å·²ç»çŸ¥é“å®ƒå¦‚ä½•å·¥ä½œäº†ã€‚ï¼‰</p> <p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œ<code>useReducer</code> ä¼šæ¯” <code>useState</code> æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚</p> <p>å¹¶ä¸”ï¼Œä½¿ç”¨ <code>useReducer</code> è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸º<a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="noopener noreferrer">ä½ å¯ä»¥ä»…å‘å­ç»„ä»¶ä¼ é€’ä¸€ä¸ª <code>dispatch</code> è€Œä¸æ˜¯å¤šä¸ªå›è°ƒå‡½æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ã€‚</p> <p>ä»¥ä¸‹ä¸ºä¸€ä¸ªè®¡æ•°å™¨ä¾‹å­ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Count: </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æƒ°æ€§åˆå§‹åŒ–"><a href="#æƒ°æ€§åˆå§‹åŒ–" class="header-anchor">#</a> æƒ°æ€§åˆå§‹åŒ–</h4> <p>ä½ å¯ä»¥é€‰æ‹©æƒ°æ€§åœ°åˆ›å»ºåˆå§‹ stateã€‚ä¸ºæ­¤ï¼Œéœ€è¦å°† <code>init</code> å‡½æ•°ä½œä¸º <code>useReducer</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·åˆå§‹ state å°†è¢«è®¾ç½®ä¸º <code>init(initialArg)</code>ã€‚</p> <p>è¿™ä¹ˆåšå¯ä»¥å°†ç”¨äºè®¡ç®— state çš„é€»è¾‘æå–åˆ° reducer å¤–éƒ¨ï¼Œè¿™ä¹Ÿä¸ºå°†æ¥å¯¹é‡ç½® state çš„ action åšå¤„ç†æä¾›äº†ä¾¿åˆ©ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">initialCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> initialCount<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'reset'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">init</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>initialCount<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialCount<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Count: </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'reset'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> initialCount<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Reset
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="ğŸ¤-useeffect"><a href="#ğŸ¤-useeffect" class="header-anchor">#</a> ğŸ¤ <em>useEffect</em></h3> <p>ä½ ä¹‹å‰å¯èƒ½å·²ç»åœ¨ React ç»„ä»¶ä¸­æ‰§è¡Œè¿‡æ•°æ®è·å–ã€è®¢é˜…æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹è¿‡ DOMã€‚æˆ‘ä»¬ç»Ÿä¸€æŠŠè¿™äº›æ“ä½œç§°ä¸ºâ€œå‰¯ä½œç”¨â€ï¼Œæˆ–è€…ç®€ç§°ä¸ºâ€œä½œç”¨â€ã€‚</p> <p><code>useEffect</code> å°±æ˜¯ä¸€ä¸ª Effect Hookï¼Œç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼ˆæ³¨æ„ï¼šæŸäº›è¡Œä¸ºå¹¶ä¸å®Œå…¨ç›¸åŒï¼‰ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç»„ä»¶åœ¨ React æ›´æ–° DOM åä¼šè®¾ç½®ä¸€ä¸ªé¡µé¢æ ‡é¢˜ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="useeffect-è§£ç»‘å‰¯ä½œç”¨"><a href="#useeffect-è§£ç»‘å‰¯ä½œç”¨" class="header-anchor">#</a> <em>useEffect</em> è§£ç»‘å‰¯ä½œç”¨</h4> <p>è¿™ç§åœºæ™¯å¾ˆå¸¸è§ï¼Œå½“æˆ‘ä»¬åœ¨ <code>componentDidMount</code> é‡Œæ·»åŠ äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬æˆ–å®šæ—¶å™¨ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ <code>componentWillUnmount</code> ä¸­ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶è¢«æ³¨é”€ä¹‹å‰æ¸…é™¤æ‰æˆ‘ä»¬æ·»åŠ çš„äº‹ä»¶ç›‘å¬æˆ–å®šæ—¶å™¨ï¼Œå¦åˆ™å†…å­˜æ³„æ¼çš„é—®é¢˜å°±å‡ºç°äº†ã€‚</p> <p>é‚£ä¹ˆåº”è¯¥å¦‚ä½•è§£ç»‘å‘¢ï¼Ÿ</p> <p>åªéœ€è¦åœ¨ <code>useEffect</code> ä¸­è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å³å¯ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå°†åœ¨é‡æ–°æ¸²æŸ“å‰è°ƒç”¨</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹<strong>éœ€è¦é‡è§†</strong>ï¼Œ<code>useEffect</code> ä¸­è¿”å›çš„å‡½æ•° <strong>ä¸ï¼ç­‰ï¼äºï¼</strong> <code>componentWillUnmount</code>ã€‚</p> <ul><li><code>componentWillUnmount</code> åªä¼šåœ¨ç»„ä»¶<strong>è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡</strong>ï¼ˆç‹­ä¹‰ä¸Šçš„ç»„ä»¶æ­»äº†â€” çœŸæ­£å¸è½½ï¼‰ã€‚</li> <li><code>useEffect</code> ä¸­è¿”å›çš„å‡½æ•°æ˜¯åœ¨ç»„ä»¶<strong>é‡æ–°æ¸²æŸ“å‰æ‰§è¡Œ</strong>çš„ï¼ˆå¹¿ä¹‰ä¸Šçš„ç»„ä»¶æ­»äº† â€” é‡æ–°æ¸²æŸ“ï¼‰ã€‚</li></ul> <h4 id="æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"><a href="#æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°" class="header-anchor">#</a> æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°</h4> <p>å‡å¦‚æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½è¦æ‰§è¡Œä¸€éè¿™äº›å‰¯ä½œç”¨å‡½æ•°ï¼Œæ˜¾ç„¶æ˜¯ä¸ç»æµä¸”æµªè´¹æ€§èƒ½çš„ã€‚æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„è®¡ç®—å‘¢ï¼Ÿ</p> <p>æˆ‘ä»¬åªéœ€è¦ç»™ useEffect ä¼ ç¬¬äºŒä¸ªä¾èµ–é¡¹å‚æ•°å³å¯ã€‚</p> <ul><li>è‹¥ä¼ å€¼ï¼Œå¿…é¡»ä¸ºæ•°ç»„å½¢å¼æˆ–ç©ºæ•°ç»„ã€‚</li></ul> <p>ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰ react åªæœ‰å½“è¿™ä¸ªä¾èµ–é¡¹å‚æ•°çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘ä»¬ä¼ çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€æ¡ä»£ç </span>
</code></pre></div><p>å½“æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ªç©ºæ•°ç»„ <code>[]</code> æ—¶ï¼Œå…¶å®å°±ç›¸å½“äºåªåœ¨é¦–æ¬¡æ¸²æŸ“ï¼ˆ<code>componentDidMount</code>ï¼‰çš„æ—¶å€™æ‰§è¡Œã€‚</p> <blockquote><p>ä¸è¿‡è¿™ç§ç”¨æ³•å¯èƒ½å¸¦æ¥ <code>bug</code></p> <p>è¯¦æƒ…å¯ä»¥å‚è€ƒ <a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" target="_blank" rel="noopener noreferrer">åœ¨ä¾èµ–åˆ—è¡¨ä¸­çœç•¥å‚æ•°æ˜¯å¦å®‰å…¨ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h4 id="ä½¿ç”¨å¤šä¸ª-effect-å®ç°å…³æ³¨ç‚¹åˆ†ç¦»"><a href="#ä½¿ç”¨å¤šä¸ª-effect-å®ç°å…³æ³¨ç‚¹åˆ†ç¦»" class="header-anchor">#</a> ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»</h4> <p>ä½¿ç”¨ Hook å…¶ä¸­ä¸€ä¸ª<a href="https://zh-hans.reactjs.org/docs/hooks-intro.html#complex-components-become-hard-to-understand" target="_blank" rel="noopener noreferrer">ç›®çš„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å°±æ˜¯è¦è§£å†³ class ä¸­ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç»å¸¸åŒ…å«ä¸ç›¸å…³çš„é€»è¾‘ï¼Œä½†åˆæŠŠç›¸å…³é€»è¾‘åˆ†ç¦»åˆ°äº†å‡ ä¸ªä¸åŒæ–¹æ³•ä¸­çš„é—®é¢˜ã€‚å¯æ˜¯ <code>useEffect</code> æ‰€è¿è¡Œçš„æ–¹å¼å®åœ¨æ˜¯å¤šæ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¤šæ¬¡è°ƒç”¨ <code>useEffect</code> ï¼Œè¿™ä¼šå°†ä¸ç›¸å…³é€»è¾‘åˆ†ç¦»åˆ°ä¸åŒçš„ effect ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™ä¸ª effect åªåœ¨æ¯æ¬¡æŒ‚è½½å‰éƒ½æ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// è¿™ä¸ª effect åªåœ¨é‡æ–°æ¸²æŸ“å‰æ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™ä¸ª effect å……å½“ watchEffect(vue)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>xx<span class="token punctuation">,</span>xxx<span class="token punctuation">,</span>xxxx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="ğŸ¥—-usecontext"><a href="#ğŸ¥—-usecontext" class="header-anchor">#</a> ğŸ¥— <em>useContext</em></h3> <p>æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> prop å†³å®šã€‚</p> <p>æˆ‘ä»¬éƒ½çŸ¥é“ <code>MyContext.Provider</code> ç”¨äºæä¾›æ•°æ®ï¼Œè€Œ <code>MyContext.Consumer</code> ç”¨äºè·å–æ•°æ®ï¼Œé‚£ä¹ˆ <code>useContext</code> å…¶å®å°±æ˜¯ä¸“é—¨ç»™æ— çŠ¶æ€ç»„ä»¶ç”¨äºè·å– <code>MyContext</code> æ•°æ®çš„ APIã€‚</p> <p>é¦–å…ˆé¡¶çº§ç»„ä»¶ä¸€å®šè¦å°† <code>createContext</code> è¿”å›çš„å¯¹è±¡æš´éœ²ç»™éœ€è¦ä½¿ç”¨æ•°æ®çš„å­ç»„ä»¶ï¼Œç„¶åå°† <code>Context</code> ä¼ é€’ç»™ <code>useContext</code> ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span>setName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>Context<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="header-anchor">#</a> æ³¨æ„ï¼š</h4> <p>åˆ«å¿˜è®° <code>useContext</code> çš„å‚æ•°å¿…é¡»æ˜¯ <em>context å¯¹è±¡æœ¬èº«</em>ï¼š</p> <ul><li><strong>æ­£ç¡®ï¼š</strong> <code>useContext(MyContext)</code></li> <li><strong>é”™è¯¯ï¼š</strong> <code>useContext(MyContext.Consumer)</code></li> <li><strong>é”™è¯¯ï¼š</strong> <code>useContext(MyContext.Provider)</code></li></ul> <p>å¦‚æœä½ åœ¨æ¥è§¦ Hook å‰å·²ç»å¯¹ context API æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé‚£åº”è¯¥å¯ä»¥ç†è§£ï¼Œ<code>useContext(MyContext)</code> å…¶å®ç›¸å½“äº class ç»„ä»¶ä¸­çš„ <code>static contextType = MyContext</code> æˆ–è€… <code>&lt;MyContext.Consumer&gt;</code>ã€‚</p> <p><code>useContext(MyContext)</code> åªæ˜¯è®©ä½ èƒ½å¤Ÿ<em>è¯»å–</em> context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚</p> <p><strong>ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨</strong> <code>&lt;MyContext.Provider&gt;</code> æ¥ä¸ºä¸‹å±‚ç»„ä»¶<em>æä¾›</em> contextï¼Œè¿™ä¸€æ­¥æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚</p> <h3 id="ğŸ”-usememo"><a href="#ğŸ”-usememo" class="header-anchor">#</a> ğŸ” useMemo</h3> <blockquote><p><code>useMemo</code> æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–é’©å­ï¼Œå®ƒå¯ä»¥ç¼“å­˜ä¸€ä¸ªä»»æ„å€¼ï¼Œå¹¶æŒ‡å®šä¾èµ–ï¼Œåªæœ‰å½“ä¾èµ–å˜äº†ï¼Œå€¼æ‰ä¼šé‡æ–°è·å–ã€‚</p></blockquote> <p><code>useMemo</code> é’©å­æ˜¯æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„é’©å­ï¼Œè¦ç†è§£å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å…ˆè¦çœ‹å‡ ä¸ªæ€§èƒ½é—®é¢˜ã€‚</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301132150751.png" alt="code" style="zoom:50%;"> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301132150786.gif" alt="demo" style="zoom:67%;"> <p>æˆ‘ä»¬å‡è®¾ä¸Šé¢è¿™æ®µä»£ç ä¸­çš„ <code>processiCount</code> ä¸­ç»è¿‡äº†å¤§é‡çš„è®¡ç®—æ‰å¾—å‡º <code>count</code> ï¼Œä½†æ˜¯æ¯æ¬¡ <code>time</code> æ›´æ–°è¿›è€Œå¼•å‘æ•´ä¸ªç»„ä»¶æ›´æ–°æ—¶ã€‚<code>processiCount</code> è¿™ä¸ªå‡½æ•°ä½œä¸ºæ˜¾ç¤ºå†…å®¹å°±ä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™åœ¨ä»£ç å±‚é¢æ˜¯åˆä¹æƒ…ç†çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚</p> <p>ä½† <code>time</code> çš„æ›´æ–°ä¸ <code>processiCount</code> å¹¶æ²¡æœ‰ç›´æ¥çš„è”ç³»ï¼Œæˆ‘ä»¬æˆ–è®¸æ ¹æœ¬ä¸æƒ³ <code>processiCount</code> é‡å¤æ‰§è¡Œï¼Œé‚£å°±è¦ä½¿ç”¨ <code>useMemo</code> Hook æ¥åŒ…è£… <code>processiCount</code> å‡½æ•°ï¼Œå¦‚ä¸‹é¢è¿™æ®µä¼ªä»£ç ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301132150646.png" alt="code" style="zoom:50%;"> <p><code>useMemo</code> çš„ä½œç”¨éå¸¸åƒ<strong>ç¼“å­˜</strong>ï¼Œå®ƒå°†ç¬¬ä¸€æ¬¡è·å¾—çš„å€¼å­˜èµ·æ¥ï¼Œåªæœ‰å½“ä¾èµ–æ›´æ–°æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚</p> <h5 id="è¯·æ³¨æ„"><a href="#è¯·æ³¨æ„" class="header-anchor">#</a> è¯·æ³¨æ„ï¼š</h5> <ul><li><code>useMemo</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª <code>getter</code> å‡½æ•°ï¼Œå‡½æ•°ä¸­å¿…é¡»æ˜ç¡®è¿”å›å€¼ï¼Œè¿”å›å€¼å°±æ˜¯ <code>useMemo</code> çš„è¿”å›å€¼ã€‚</li> <li><code>useMemo</code> çš„ç¬¬äºŒä¸ªå‚æ•°ä»¥æ•°ç»„çš„å½¢å¼å®šä¹‰ä¾èµ–é¡¹ï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜ï¼Œå†…éƒ¨å‡½æ•°æˆ–å€¼æ‰ä¼šé‡æ–°è·å–ã€‚</li></ul> <h5 id="æ¢ä¸€ç§æ–¹å¼"><a href="#æ¢ä¸€ç§æ–¹å¼" class="header-anchor">#</a> æ¢ä¸€ç§æ–¹å¼</h5> <p>æ‰€ä»¥ï¼Œ<code>useMemo</code> é’©å­ç¡®å®å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨è¿™é‡Œé¿å…ä¸å¿…è¦çš„è®¡ç®—â€¦â€¦ä½†å®ƒ<em>çœŸçš„</em>æ˜¯è¿™é‡Œæœ€å¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ</p> <p>ä½† <code>useMemo</code> èƒ½åšåˆ°çš„ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥å°†å…¶å°è£…æˆä¸¤ä¸ªäº’ä¸ç›¸å¹²çš„ç»„ä»¶å³å¯è§£å†³é—®é¢˜ï¼Œå°±åƒè¿™æ®µä¼ªä»£ç ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022244122.png" alt="code" style="zoom:50%;"> <p>ä½†è¿™ä¹Ÿä¸æ˜¯æœ€ä¼˜è§£ï¼Œå› ä¸ºåœ¨çœŸå®çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šç»„ä»¶ä¸å¾—ä¸å°†çŠ¶æ€é›†ä¸­åˆ°ä¸€èµ·ï¼Œåˆ†å¼€æ”¾ç½®é€šå¸¸æ˜¯ä¸è¡Œçš„ã€‚</p> <p>å…¶å®æˆ‘ä»¬å¯ä»¥å°†æŸäº›ç»„ä»¶å®šä¹‰æˆ<strong>çº¯ç»„ä»¶(Pure components)</strong>ï¼Œçº¯ç»„ä»¶é€šå¸¸æ„å‘³ç€ï¼š</p> <ul><li><h5 id="ç»„ä»¶çš„è¾“å…¥-åº”è¯¥æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„è¾“å…¥-è¾“å…¥ä¸å˜-è¾“å‡ºæ°¸è¿œä¸å˜ã€‚"><a href="#ç»„ä»¶çš„è¾“å…¥-åº”è¯¥æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„è¾“å…¥-è¾“å…¥ä¸å˜-è¾“å‡ºæ°¸è¿œä¸å˜ã€‚" class="header-anchor">#</a> ç»„ä»¶çš„è¾“å…¥ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„è¾“å…¥ï¼Œè¾“å…¥ä¸å˜ï¼Œè¾“å‡ºæ°¸è¿œä¸å˜ã€‚</h5> <ul><li>å¯ä»¥ç†è§£ä¸ºè‹¥ç»„ä»¶çš„ <code>props</code> ä¸å˜ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šå› ä¸ºå…¶ä»–çš„ä¸œè¥¿è€Œé‡æ–°æ¸²æŸ“ï¼Œå®ƒåªå…³æ³¨ <code>props</code> çš„å˜åŒ–ã€‚</li> <li>é€šè¿‡ <code>React.memo()</code> å®šä¹‰çº¯ç»„ä»¶</li></ul></li></ul> <h4 id="react-memo"><a href="#react-memo" class="header-anchor">#</a> React.memo</h4> <blockquote><p>React.memo æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–é’©å­ï¼Œå®ƒçš„ç”¨æ³•ä¸ useMemo å·®ä¸å¤šï¼Œä¸è¿‡ memo æ—¶ç»„ä»¶å±‚é¢çš„ç¼“å­˜ç»„ä»¶ï¼Œä¹Ÿè¢«æˆä¸ºçº¯ç»„ä»¶ã€‚</p></blockquote> <p>ç»“åˆ <code>useMemo</code> çš„ä¾‹å­ï¼Œæˆ‘ä»¬çŸ¥é“æœ‰æ—¶å€™æ˜¯æ— æ³•åšåˆ°å°†ä¸¤ä¸ªç»„ä»¶å½»åº•åˆ†å¼€çš„ï¼Œå¤§å¤šæ—¶å€™éƒ½éœ€è¦å°†çŠ¶æ€é›†ä¸­ï¼Œè¿™ä¹Ÿæ„å‘³ç€å½“å‰ç»„ä»¶å› ä¸ºæŸäº›å€¼é‡æ–°æ¸²æŸ“æ—¶ä¼šå¯¼è‡´å­ç»„ä»¶ä¹Ÿé‡æ–°æ¸²æŸ“ï¼Œå°±åƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022246260.png" alt="code" style="zoom:50%;"> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022246571.png" alt="code" style="zoom:50%;"> <p>ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œæ¯å½“ <code>time</code> æ›´æ–°å¼•èµ· <code>App</code> ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ<code>Counter</code> ç»„ä»¶ä¹Ÿä¼šè¢«è¿«é‡æ–°æ¸²æŸ“ï¼Œè€Œä¸”å®ƒæ²¡æœ‰æ›´æ–°ä»»ä½•ä¸œè¥¿ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ <code>React.memo</code> å°†å®ƒå®šä¹‰ä¸ºçº¯ç»„ä»¶ï¼Œå¦‚ä¸‹é¢è¿™æ®µä¼ªä»£ç ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022247882.png" alt="code" style="zoom:50%;"> <blockquote><p><code>memo</code> æ›´å¸¸è§çš„æ˜¯åœ¨å¯¼å‡ºæ—¶å°±å®šä¹‰ï¼Œè€Œä¸æ˜¯åœ¨å¼•å…¥æ—¶å®šä¹‰ï¼š<code>export default memo(function xxx ())</code></p></blockquote> <p>è¿™æ ·å®šä¹‰åï¼Œæ¯å½“ <code>time</code> æ›´æ–°æ—¶ï¼Œ<code>Counter</code> ä¸ä¼šè¢«è¿«é‡æ–°æ¸²æŸ“äº†</p> <h5 id="ä¸€ä¸ª-memo-å¤±æ•ˆçš„åœºæ™¯"><a href="#ä¸€ä¸ª-memo-å¤±æ•ˆçš„åœºæ™¯" class="header-anchor">#</a> ä¸€ä¸ª memo å¤±æ•ˆçš„åœºæ™¯</h5> <p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ <code>memo</code> â€œå¤±æ•ˆäº†â€ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022248846.png" alt="code" style="zoom:50%;"> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022250850.png" alt="code" style="zoom:50%;"> <p>è¿™æ˜¯ä½¿ç”¨åœºæ™¯ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301021749023.gif" alt="demo" style="zoom:50%;"> <p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ç»„ <code>styles</code> å°†å®ƒä¼ å…¥ <code>Boxes</code> çº¯ç»„ä»¶ä¸­ã€‚ç†æƒ³çš„æƒ…å†µä¸‹åªæœ‰å½“æˆ‘ä»¬ç§»åŠ¨æ»šè½®æ‰ä¼šè§¦å‘ <code>Boxes</code> æ¸²æŸ“ã€‚ä½†å¦‚æœæˆ‘ä»¬æ‰“å¼€æ§åˆ¶å°å°±ä¼šçœ‹åˆ° <code>Boxes</code> ç»„ä»¶å¹¶æ²¡æœ‰åƒæˆ‘ä»¬æƒ³çš„é‚£æ ·æ¸²æŸ“ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301021752510.gif" alt="demo" style="zoom:50%;"> <p>å…¶å®é—®é¢˜å¹¶ä¸å¤æ‚ï¼Œå¹¶ä¸æ˜¯ <code>memo</code> å¤±æ•ˆäº†ï¼Œè€Œæ˜¯æˆ‘ä»¬å®šä¹‰çš„é‚£ä¸€ç»„ <code>styles</code> å‡ºé—®é¢˜äº†ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥çœ‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹ã€‚</p> <ol><li>é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>styles</code> æ•°ç»„ï¼Œå°†å®ƒä¼ å…¥äº† <code>&lt;Boxes&gt;</code> ä¸­ã€‚
<ul><li>æ•°ç»„æ˜¯å¼•ç”¨å¯¹è±¡ï¼Œè€Œ <code>time</code> æ¯æ¬¡æ›´æ–°éƒ½ä¼šé‡æ–°å®šä¹‰ <code>styles</code> æ•°ç»„ï¼Œé‚£ä¹ˆ <code>styles</code> çš„åœ°å€å…¶å®æ¯ç§’éƒ½åœ¨å˜æ›´ã€‚</li></ul></li> <li><code>styles</code> æ•°ç»„åœ°å€æ¯ç§’éƒ½åœ¨æ›´æ”¹ï¼Œå¯¼è‡´ <code>&lt;Boxes&gt;</code> æ¯ç§’éƒ½æ¥æ”¶ç€ä¸åŒçš„ <code>props</code>ã€‚</li> <li><code>&lt;Boxes&gt;</code> æ¯ç§’é‡æ–°æ¸²æŸ“ã€‚</li></ol> <p>é—®é¢˜å¾ˆå¥½è§£å†³ï¼Œåªéœ€è¦å°† <code>styles</code> ä½¿ç”¨ <code>useMemo</code> ç»™ä»–ä¸€ä¸ªä¾èµ–ç¼“å­˜èµ·æ¥å°±è¡Œäº†ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022253689.png" alt="code" style="zoom:50%;"> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301021852786.gif" alt="demo" style="zoom:50%;"> <h3 id="ğŸŒ¯-usecallback"><a href="#ğŸŒ¯-usecallback" class="header-anchor">#</a> ğŸŒ¯ useCallback</h3> <blockquote><p>useCallback æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–é’©å­ï¼Œå®ƒå¯ä»¥ç¼“å­˜ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æŒ‡å®šä¾èµ–ï¼Œåªæœ‰å½“ä¾èµ–å˜æ›´æ—¶ï¼Œæ‰ä¼šé‡æ–°å®šä¹‰å‡½æ•°ã€‚</p></blockquote> <p><code>useCallback</code> çš„ä½œç”¨ä¸ <code>useMemo</code> å·®ä¸å¤šï¼Œä¸è¿‡ <code>useMemo</code> åœ¨è¯­ä¹‰åŒ–å±‚é¢æ›´åŠ ä¾§é‡ç¼“å­˜<strong>å€¼ç±»å‹</strong>ï¼Œ<code>useCallback</code> ä¾§é‡ç¼“å­˜<strong>å‡½æ•°ç±»å‹</strong>ã€‚</p> <p>è¿˜æ˜¯ <code>useMemo</code> ä¸­çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç»™å­ç»„ä»¶ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä½†ç»„ä»¶ä¸­çš„ <code>time</code> æ¯ç§’éƒ½åœ¨å˜æ›´ï¼Œé‚£ä¹ˆæ‰€å®šä¹‰çš„å‡½æ•°ä¹Ÿä¼šé‡å¤å®šä¹‰ï¼Œä¸”é‡å¤ä¼ å…¥å­ç»„ä»¶ä¸­ï¼Œä»è€Œå¼•èµ·å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022255980.png" alt="code" style="zoom:50%;"> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301021955708.gif" alt="demo" style="zoom:50%;"> <p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ <code>useCallback</code> åŒ…è£¹å‡½æ•°ä½“å³å¯ã€‚</p> <ul><li><p><code>useCallback</code> ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°æˆ–å‡½æ•°ä½“ï¼Œå®ƒçš„è¿”å›å€¼å°±æ˜¯ä¼ å…¥çš„å‡½æ•°æˆ–å‡½æ•°ä½“</p></li> <li><p><code>useCallback</code> ç¬¬äºŒä¸ªå‚æ•°ä»¥æ•°ç»„çš„å½¢å¼å®šä¹‰ä¾èµ–é¡¹ï¼Œåªæœ‰å½“ä¾èµ–é¡¹æ”¹å˜ï¼Œå†…éƒ¨å‡½æ•°æ‰ä¼šé‡æ–°è°ƒç”¨ã€‚</p></li></ul> <p>ä¸‹é¢æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ³•ï¼š</p> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301022300680.png" alt="code" style="zoom:50%;"> <h3 id="ğŸ¥Ÿ-useref"><a href="#ğŸ¥Ÿ-useref" class="header-anchor">#</a> ğŸ¥Ÿ <em>useRef</em></h3> <p><code>useRef</code> è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆ<code>initialValue</code>ï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨ã€‚</p> <p>ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹ä¾¿æ˜¯å°†ç»„ä»¶æˆ–å…ƒç´ çš„ <code>ref</code> å®šä¹‰ä¸º <code>useRef</code> è¿”å›çš„ <code>Ref</code> å¯¹è±¡ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">TextInputWithFocusButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> inputEl <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span>
        inputEl<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputEl<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Focus the input</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ¬è´¨ä¸Šï¼Œ<code>useRef</code> å°±åƒæ˜¯å¯ä»¥åœ¨å…¶ <code>.current</code> å±æ€§ä¸­ä¿å­˜ä¸€ä¸ªå¯å˜å€¼çš„â€œç›’å­â€ã€‚</p> <p>ä½ åº”è¯¥ç†Ÿæ‚‰ ref è¿™ä¸€ç§<a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener noreferrer">è®¿é—® DOM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ä¸»è¦æ–¹å¼ã€‚å¦‚æœä½ å°† ref å¯¹è±¡ä»¥ <code>&lt;div ref={myRef} /&gt;</code> å½¢å¼ä¼ å…¥ç»„ä»¶ï¼Œåˆ™æ— è®ºè¯¥èŠ‚ç‚¹å¦‚ä½•æ”¹å˜ï¼ŒReact éƒ½ä¼šå°† ref å¯¹è±¡çš„ <code>.current</code> å±æ€§è®¾ç½®ä¸ºç›¸åº”çš„ DOM èŠ‚ç‚¹ã€‚</p> <p>åœ¨ç±»ç»„ä»¶æˆ‘ä»¬éœ€è¦å¼•ç”¨  DOM èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ <code>createRef</code>ï¼Œ<code>useRef</code> ä¸ <code>createRef</code> çš„ç”¨æ³•ä¸€è‡´ï¼Œä½† <code>useRef</code>  å¹¶ä¸å±€é™åœ¨å¼•ç”¨ DOM èŠ‚ç‚¹ä¸Šï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿å­˜æ”¾ä»»æ„å€¼çš„å¼•ç”¨ï¼Œä¸”<strong>åœ¨ç»„ä»¶æ¸²æŸ“æ—¶ä¿æŒä¸å˜</strong>ã€‚</p> <blockquote><p>è¯·è®°ä½ï¼Œå½“ ref å¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>useRef</code> å¹¶<em>ä¸ä¼š</em>é€šçŸ¥ä½ ã€‚å˜æ›´ <code>.current</code> å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæƒ³è¦åœ¨ React ç»‘å®šæˆ–è§£ç»‘ DOM èŠ‚ç‚¹çš„ ref æ—¶è¿è¡ŒæŸäº›ä»£ç ï¼Œåˆ™éœ€è¦ä½¿ç”¨<a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-can-i-measure-a-dom-node" target="_blank" rel="noopener noreferrer">å›è°ƒ ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥å®ç°ã€‚</p></blockquote> <blockquote><p>å…³äº <code>useRef</code> ï¼Œå¯ä»¥å‚è€ƒ React è¿›é˜¶ä¸­çš„ <a href="https://bigricerice.github.io/bigRiceRice.io/dist/2023/01/09/react-hight/#%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6-useref" target="_blank" rel="noopener noreferrer">å‡½æ•°ç»„ä»¶ useRef<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="hooks-faq"><a href="#hooks-faq" class="header-anchor">#</a> Hooks FAQ</h2> <h3 id="é‡‡çº³ç­–ç•¥"><a href="#é‡‡çº³ç­–ç•¥" class="header-anchor">#</a> <strong><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#adoption-strategy" target="_blank" rel="noopener noreferrer">é‡‡çº³ç­–ç•¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#which-versions-of-react-include-hooks" target="_blank" rel="noopener noreferrer">å“ªä¸ªç‰ˆæœ¬çš„ React åŒ…å«äº† Hookï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#do-i-need-to-rewrite-all-my-class-components" target="_blank" rel="noopener noreferrer">æˆ‘éœ€è¦é‡å†™æ‰€æœ‰çš„ class ç»„ä»¶å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-can-i-do-with-hooks-that-i-couldnt-with-classes" target="_blank" rel="noopener noreferrer">æœ‰ä»€ä¹ˆæ˜¯ Hook èƒ½åšè€Œ class åšä¸åˆ°çš„ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-much-of-my-react-knowledge-stays-relevant" target="_blank" rel="noopener noreferrer">æˆ‘çš„ React çŸ¥è¯†è¿˜æœ‰å¤šå°‘æ˜¯ä»ç„¶æœ‰ç”¨çš„ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both" target="_blank" rel="noopener noreferrer">æˆ‘åº”è¯¥ä½¿ç”¨ Hookï¼Œclassï¼Œè¿˜æ˜¯ä¸¤è€…æ··ç”¨ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#do-hooks-cover-all-use-cases-for-classes" target="_blank" rel="noopener noreferrer">Hook èƒ½å¦è¦†ç›– class çš„æ‰€æœ‰ä½¿ç”¨åœºæ™¯ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#do-hooks-replace-render-props-and-higher-order-components" target="_blank" rel="noopener noreferrer">Hook ä¼šæ›¿ä»£ render props å’Œé«˜é˜¶ç»„ä»¶å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router" target="_blank" rel="noopener noreferrer">Hook å¯¹äº Redux connect() å’Œ React Router ç­‰æµè¡Œçš„ API æ¥è¯´ï¼Œæ„å‘³ç€ä»€ä¹ˆï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#do-hooks-work-with-static-typing" target="_blank" rel="noopener noreferrer">Hook èƒ½å’Œé™æ€ç±»å‹ä¸€èµ·ç”¨å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-test-components-that-use-hooks" target="_blank" rel="noopener noreferrer">å¦‚ä½•æµ‹è¯•ä½¿ç”¨äº† Hook çš„ç»„ä»¶ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-exactly-do-the-lint-rules-enforce" target="_blank" rel="noopener noreferrer">lint è§„åˆ™å…·ä½“å¼ºåˆ¶äº†å“ªäº›å†…å®¹ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="ä»-class-è¿ç§»åˆ°-hook"><a href="#ä»-class-è¿ç§»åˆ°-hook" class="header-anchor">#</a> <strong><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#from-classes-to-hooks" target="_blank" rel="noopener noreferrer">ä» Class è¿ç§»åˆ° Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-do-lifecycle-methods-correspond-to-hooks" target="_blank" rel="noopener noreferrer">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¦å¦‚ä½•å¯¹åº”åˆ° Hookï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-can-i-do-data-fetching-with-hooks" target="_blank" rel="noopener noreferrer">æˆ‘è¯¥å¦‚ä½•ä½¿ç”¨ Hook è¿›è¡Œæ•°æ®è·å–ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables" target="_blank" rel="noopener noreferrer">æœ‰ç±»ä¼¼å®ä¾‹å˜é‡çš„ä¸œè¥¿å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables" target="_blank" rel="noopener noreferrer">æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª state å˜é‡ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#can-i-run-an-effect-only-on-updates" target="_blank" rel="noopener noreferrer">æˆ‘å¯ä»¥åªåœ¨æ›´æ–°æ—¶è¿è¡Œ effect å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state" target="_blank" rel="noopener noreferrer">å¦‚ä½•è·å–ä¸Šä¸€è½®çš„ props æˆ– stateï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#why-am-i-seeing-stale-props-or-state-inside-my-function" target="_blank" rel="noopener noreferrer">ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„ props å’Œ state ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops" target="_blank" rel="noopener noreferrer">æˆ‘è¯¥å¦‚ä½•å®ç° getDerivedStateFromPropsï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate" target="_blank" rel="noopener noreferrer">æœ‰ç±»ä¼¼ forceUpdate çš„ä¸œè¥¿å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#can-i-make-a-ref-to-a-function-component" target="_blank" rel="noopener noreferrer">æˆ‘å¯ä»¥å¼•ç”¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-can-i-measure-a-dom-node" target="_blank" rel="noopener noreferrer">æˆ‘è¯¥å¦‚ä½•æµ‹é‡ DOM èŠ‚ç‚¹ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-does-const-thing-setthing--usestate-mean" target="_blank" rel="noopener noreferrer">const [thing, setThing] = useState() æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> <strong><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#performance-optimizations" target="_blank" rel="noopener noreferrer">æ€§èƒ½ä¼˜åŒ–<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#can-i-skip-an-effect-on-updates" target="_blank" rel="noopener noreferrer">æˆ‘å¯ä»¥åœ¨æ›´æ–°æ—¶è·³è¿‡ effect å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" target="_blank" rel="noopener noreferrer">åœ¨ä¾èµ–åˆ—è¡¨ä¸­çœç•¥å‡½æ•°æ˜¯å¦å®‰å…¨ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often" target="_blank" rel="noopener noreferrer">å¦‚æœæˆ‘çš„ effect çš„ä¾èµ–é¢‘ç¹å˜åŒ–ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-do-i-implement-shouldcomponentupdate" target="_blank" rel="noopener noreferrer">æˆ‘è¯¥å¦‚ä½•å®ç° shouldComponentUpdateï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-memoize-calculations" target="_blank" rel="noopener noreferrer">å¦‚ä½•è®°å¿†è®¡ç®—ç»“æœï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily" target="_blank" rel="noopener noreferrer">å¦‚ä½•æƒ°æ€§åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#are-hooks-slow-because-of-creating-functions-in-render" target="_blank" rel="noopener noreferrer">Hook ä¼šå› ä¸ºåœ¨æ¸²æŸ“æ—¶åˆ›å»ºå‡½æ•°è€Œå˜æ…¢å—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="noopener noreferrer">å¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback" target="_blank" rel="noopener noreferrer">å¦‚ä½•ä» useCallback è¯»å–ä¸€ä¸ªç»å¸¸å˜åŒ–çš„å€¼ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="header-anchor">#</a> <strong><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#under-the-hood" target="_blank" rel="noopener noreferrer">åº•å±‚åŸç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-does-react-associate-hook-calls-with-components" target="_blank" rel="noopener noreferrer">React æ˜¯å¦‚ä½•æŠŠå¯¹ Hook çš„è°ƒç”¨å’Œç»„ä»¶è”ç³»èµ·æ¥çš„ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#what-is-the-prior-art-for-hooks" target="_blank" rel="noopener noreferrer">Hook ä½¿ç”¨äº†å“ªäº›ç°æœ‰æŠ€æœ¯ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#ğŸŒ -ä»€ä¹ˆæ˜¯-hooks" title="ğŸŒ  ä»€ä¹ˆæ˜¯ Hooks">ğŸŒ  ä»€ä¹ˆæ˜¯ Hooks</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-hook" title="ä¸ºä»€ä¹ˆéœ€è¦ Hook ï¼Ÿ">ä¸ºä»€ä¹ˆéœ€è¦ Hook ï¼Ÿ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†" title="ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼">ä¸€ã€æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§" title="äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§ï¼">äºŒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§ï¼</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä¸‰ã€class-çœŸçš„å¤ªè®©äººå›°æƒ‘äº†" title="ä¸‰ã€class çœŸçš„å¤ªè®©äººå›°æƒ‘äº†ï¼">ä¸‰ã€class çœŸçš„å¤ªè®©äººå›°æƒ‘äº†ï¼</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ä¸€äº›å¸¸ç”¨çš„-hook" title="ä¸€äº›å¸¸ç”¨çš„ Hook">ä¸€äº›å¸¸ç”¨çš„ Hook</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ§-usestate" title="ğŸ§ useState">ğŸ§ useState</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ—-usereducer" title="ğŸ— useReducer">ğŸ— useReducer</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ¤-useeffect" title="ğŸ¤ useEffect">ğŸ¤ useEffect</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ¥—-usecontext" title="ğŸ¥— useContext">ğŸ¥— useContext</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ”-usememo" title="ğŸ” useMemo">ğŸ” useMemo</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸŒ¯-usecallback" title="ğŸŒ¯ useCallback">ğŸŒ¯ useCallback</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ¥Ÿ-useref" title="ğŸ¥Ÿ useRef">ğŸ¥Ÿ useRef</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#hooks-faq" title="Hooks FAQ">Hooks FAQ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#é‡‡çº³ç­–ç•¥" title="é‡‡çº³ç­–ç•¥">é‡‡çº³ç­–ç•¥</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä»-class-è¿ç§»åˆ°-hook" title="ä» Class è¿ç§»åˆ° Hook">ä» Class è¿ç§»åˆ° Hook</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æ€§èƒ½ä¼˜åŒ–" title="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#åº•å±‚åŸç†" title="åº•å±‚åŸç†">åº•å±‚åŸç†</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>è¯¥ç½‘ç«™ä½¿ç”¨ vuepress + @vuepress/theme-blog æ­å»º â€”â€” by: Big Rice Â© 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.7be931a0.js" defer></script><script src="/blog/assets/js/6.4adeed80.js" defer></script><script src="/blog/assets/js/3.606773b1.js" defer></script><script src="/blog/assets/js/73.076e80b8.js" defer></script>
  </body>
</html>
