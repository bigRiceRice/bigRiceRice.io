<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6 模块化【搬运】 | Big Rice 🍚</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="在软件工程的设计原则里，有一个原则叫 “单一职责”">
    
    <link rel="preload" href="/bigRiceRice.io/dist/assets/css/0.styles.f06eef0b.css" as="style"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/app.c86c3a98.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/6.d33dc470.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/3.606773b1.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/87.bc7a3f10.js" as="script"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/10.5590a827.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/11.168de83c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/12.568a4166.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/13.622f4310.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/14.e674cb27.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/15.d1d3e4db.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/16.d5646882.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/17.b949d6b9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/18.b25a5446.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/19.b1cb79cd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/20.6ed4eadb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/21.770da3d7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/22.9897e082.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/23.9b02965b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/24.86180551.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/25.e3a1a3b9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/26.3f8ff577.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/27.ef8d3e3c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/28.8ca4206a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/29.e8e1123e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/30.828091ed.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/31.de99271d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/32.50e11b83.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/33.37495d61.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/34.76e379b0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/35.22716168.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/36.e8870ca7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/37.31e20c86.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/38.b36a7ca2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/4.34a3a307.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/40.ec32af09.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/41.e0f838f0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/42.b3357d7b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/43.26376eac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/44.d7404f3e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/45.3ca71423.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/46.560db7ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/47.aa7eacac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/48.bfdb65c7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/49.1b521d59.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/5.44ec780a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/50.ad5e5ae9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/51.60f76d0f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/52.7e85ded7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/53.d4b795ae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/54.2b22996a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/55.5231db92.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/56.fb63a532.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/57.6624e608.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/58.4aa2fff0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/59.ac0a7da9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/60.8c5f48e7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/61.f63cc4a4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/62.38b5e97d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/63.c6508c1b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/64.de37d74a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/65.ca07e0b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/66.6dd17a78.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/67.6863635c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/68.e277f1c7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/69.d2cc646e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/70.5d003bed.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/71.8c504b0b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/72.f98b9f33.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/73.076e80b8.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/74.1eb2ee3c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/75.b029f72e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/76.e37d92f0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/77.a79060a6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/78.0079ad1c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/79.e609cba4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/8.3984485a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/80.6a28ee25.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/81.c71a9c8a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/82.f0217ad4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/83.e30150fb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/84.eb17b6d0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/85.575df02b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/86.d46f3b24.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/88.eb0a78cb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/89.f13ac5fe.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/9.2eadd3a5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/90.60267868.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/91.2b571b10.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/92.dfd477c0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/93.a3efb9b1.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/94.a4a203a0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/95.c81abd73.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/96.383f3a21.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/97.2c96f1a6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/bigRiceRice.io/dist/assets/css/0.styles.f06eef0b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/bigRiceRice.io/dist/" class="nav-link home-link">Big Rice 🍚 </a> <button class="back" style="display:;">↩</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">框架</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/bigRiceRice.io/dist/" class="nav-link mobile-home-link">Big Rice 🍚 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">框架</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        ES6 模块化【搬运】
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address">   in 云梦泽</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2022-09-09T00:00:00.000Z">
      2022-09-09
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/ES6" data-v-42ccfcd5><span data-v-42ccfcd5>ES6</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><blockquote><p>以下内容摘抄自以下网站:<a href="https://vue3.chengpeiquan.com/guide.html#%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener noreferrer">学习模块化设计<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h1 id="📎-了解模块化设计"><a href="#📎-了解模块化设计" class="header-anchor">#</a> 📎 了解模块化设计</h1> <blockquote><p>在软件工程的设计原则里，有一个原则叫 “单一职责” 。</p> <p>假设一个代码块负责了多个职责的功能支持，在后续的迭代过程中，维护成本会极大的增加，虽然只需要修改这个代码块，但需要兼顾职责 1 、职责 2 、职责 3 … 等多个职责的兼容性，稍不注意就会引起工程运行的崩溃。</p> <p>“单一职责” 的目的就是减少功能维护带来的风险，把代码块的职责单一化，让代码的可维护性更高。</p></blockquote> <p>一个完整业务的内部实现，不应该把各种代码都耦合在一起，而应该按照职责去划分好代码块，再进行组合，形成一个 “高内聚，低耦合” 的工程设计。</p> <p>模块化就是由此而来，在前端工程里，每个单一职责的代码块，就叫做模块（ Module ） ，模块有自己的作用域，功能与业务解耦，非常方便复用和移植。</p> <h1 id="如何实现模块化"><a href="#如何实现模块化" class="header-anchor">#</a> 如何实现模块化</h1> <p>在前端工程的发展过程中，不同时期诞生了很多不同的模块化机制，最为主流的有以下几种：</p> <table><thead><tr><th style="text-align:center;">模块化方案</th> <th style="text-align:center;">全称</th> <th style="text-align:center;">适用范围</th></tr></thead> <tbody><tr><td style="text-align:center;">CJS</td> <td style="text-align:center;">CommonJS</td> <td style="text-align:center;">Node 端</td></tr> <tr><td style="text-align:center;"><s>AMD</s></td> <td style="text-align:center;"><s>Async Module Definition</s></td> <td style="text-align:center;"><s>浏览器</s></td></tr> <tr><td style="text-align:center;"><s>CMD</s></td> <td style="text-align:center;"><s>Common Module Definition</s></td> <td style="text-align:center;"><s>浏览器</s></td></tr> <tr><td style="text-align:center;"><s>UMD</s></td> <td style="text-align:center;"><s>Universal Module Definition</s></td> <td style="text-align:center;"><s>Node 端和浏览器</s></td></tr> <tr><td style="text-align:center;">ESM</td> <td style="text-align:center;">ES Module</td> <td style="text-align:center;">Node 端和浏览器</td></tr></tbody></table> <blockquote><p>其中 AMD 、CMD 、 UMD 都已经属于有点过去式的模块化方案了，在新的业务里，结合各种编译工具，可以直接用最新的 ESM 方案来实现模块化，所以可以在后续有接触的时候再了解。</p></blockquote> <ul><li><strong>ESM</strong> （ ES Module ） 是 JavaScript 在 ES6（ ECMAScript 2015 ）版本推出的模块化标准，旨在成为浏览器和服务端通用的模块解决方案。</li> <li><strong>CJS</strong> （ CommonJS ） 原本是服务端的模块化标准（设计之初也叫 ServerJS ），是为 JavaScript 设计的用于浏览器之外的一个模块化方案， Node 默认支持了该规范，在 Node 12 之前也只支持 CJS ，但从 Node 12 开始，已经同时支持 ES Module 的使用。</li></ul> <p>其实，不论是 Node 端还是浏览器端， ES Module 是统一的模块化标准了！</p> <p>但由于历史原因， CJS 在 Node 端依然是非常主流的模块化写法，所以还是值得进行了解，因此下面的内容将主要介绍 CJS 和 ESM 这两种模块化规范是如何实际运用。</p> <hr> <h2 id="用-commonjs-设计模块"><a href="#用-commonjs-设计模块" class="header-anchor">#</a> 用 CommonJS 设计模块</h2> <p>虽然现在<strong>推荐使用</strong> ES Module 作为模块化标准，但是日后你在工作的过程中，还是不免会遇到要维护一些老项目，因此了解 CommonJS 还是非常有必要的。</p> <h4 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h4> <p>CommonJs 规范规定，每个模块内部有两个变量可以使用：<code>require</code> 和 <code>module</code>。</p> <ul><li><p><code>module</code> 代表的是当前模块，是一个对象，存储着当前模块的相关联的属性和方法。<code>exports</code> 是 <code>module</code>上的一个属性。该属性表示当前模块对外输出的接口，其它文件加载该模块，实际上就是读取 <code>module.exports</code> 变量。</p> <ul><li>使用 <code>module.exports</code> 语法导出模块，可以导出任意合法的 JavaScript 类型，例如：字符串、布尔值、对象、数组、函数等等。</li></ul></li> <li><p>使用 <code>require</code> <strong>导入模块</strong>，在导入的时候，当文件扩展名是 <code>.js</code> 时，可以只写文件名，而此时我们使用的是 <code>.cjs</code> 扩展名，所以需要完整的书写。</p></li></ul> <h4 id="默认导出和导入-字面量形式"><a href="#默认导出和导入-字面量形式" class="header-anchor">#</a> 默认导出和导入（ 字面量形式 ）</h4> <blockquote><p>默认导出即一个模块只包含一个值；而导入默认值则意味着，导入时声明的变量名就是对应模块的值。</p></blockquote> <p>现在我们假设有一个 <code>index.cjs</code> 和一个 <code>module.cjs</code> 文件，我们的导入与导出可以这样来声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// module.cjs 默认导出</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&quot;Hello Tom ~&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.cjs 默认导入</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./module.cjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; &quot;Hello Tom ~&quot;</span>
</code></pre></div><h4 id="命名导出和导入-对象形式"><a href="#命名导出和导入-对象形式" class="header-anchor">#</a> 命名导出和导入（ 对象形式 ）</h4> <blockquote><p>默认导出的时候，一个模块只包含一个值，有时候你想把很多相同分类的函数进行模块化集中管理，例如想做一些 utils 类的工具函数文件、或者是维护项目的配置文件，全部使用默认导出的话，你会有非常多的文件要维护。</p> <p>那么就可以用到命名导出，这样既可以导出多个数据，又可以统一在一个文件里维护管理，命名导出是先声明多个变量，然后通过 <code>{}</code> 对象的形式导出。</p></blockquote> <p>现在我们再假设有一个 <code>index.cjs</code> 和一个 <code>module.cjs</code> 文件，我们的导入与导出可以这样来声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// module.cjs 命名导出</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;helloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">,</span>
    name<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.cjs 命名导入</span>
<span class="token keyword">const</span> moduleData <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./module.cjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>moduleData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// --&gt; { foo: [Function: foo], name: 'Tom' }</span>
</code></pre></div><p>也可以使用 ES6 的解构赋值语法进行数据的提取</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./module.cjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; 'helloWorld'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; Tom</span>
</code></pre></div><h4 id="导入时重命名"><a href="#导入时重命名" class="header-anchor">#</a> 导入时重命名</h4> <blockquote><p>以上都是基于非常理想的情况下使用模块，有时候不同的模块之间也会存在相同命名导出的情况，我们来看看模块化是如何解决这个问题的。</p></blockquote> <p>我们的模块文件保持不变，依然导出这两个变量：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// module.cjs</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World from foo.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">,</span>
    name<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这次在入口文件里也声明一个 <code>foo</code> 变量，我们在导入的时候对模块里的 <code>foo</code> 进行了重命名操作。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// index.cjs</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> foo2<span class="token punctuation">,</span> <span class="token comment">// !这里进行了重命名</span>
    name<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./module.cjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 就不会造成变量冲突</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; 1</span>

<span class="token comment">// 用新的命名来调用模块里的方法</span>
<span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; Hello World from foo.</span>

<span class="token comment">// 这个不冲突就可以不必处理</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; Tom</span>
</code></pre></div><p>这是利用了 ES6 解构对象的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#%E7%BB%99%E6%96%B0%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E8%B5%8B%E5%80%BC" target="_blank" rel="noopener noreferrer">给新的变量名赋值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的技巧。</p> <h2 id="用-es-module-设计模块"><a href="#用-es-module-设计模块" class="header-anchor">#</a> 用 ES Module 设计模块</h2> <blockquote><p>ES Module 是新一代的模块化标准，它是在 ES6（ ECMAScript 2015 ）版本推出的，是原生 JavaScript 的一部分。</p> <p>不过因为历史原因，如果你要直接在浏览器里使用该方案，在不同的浏览器里会有一定的兼容问题，一般都需要借助构建工具来开发，工具会帮你抹平这些差异。</p> <p>很多新推出的构建工具都默认只支持该方案（ e.g. Vite 、 Rollup ），要兼容 CJS 反而需要自己引入插件单独配置。</p> <p>后面我们会全程使用 TypeScript 来写 Vue3 ，也是需要使用 ES Module ，因此了解它对你非常重要。</p> <p>以下简称 ESM 代指 ES Module 规范。</p></blockquote> <h4 id="基本语法-2"><a href="#基本语法-2" class="header-anchor">#</a> 基本语法</h4> <p>ESM 使用 <code>export default</code> （默认导出）和 <code>export</code> （命名导出）这两个语法导出模块，和 CJS 一样， ESM 也可以导出任意合法的 JavaScript 类型，例如：字符串、布尔值、对象、数组、函数等等。</p> <p>使用 <code>import ... from ...</code> 导入模块，在导入的时候，如果文件扩展名是 <code>.js</code> 则可以省略文件名后缀，否则需要把扩展名也完整写出来。</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#用-commonjs-设计模块" title="用 CommonJS 设计模块">用 CommonJS 设计模块</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#用-es-module-设计模块" title="用 ES Module 设计模块">用 ES Module 设计模块</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>该网站使用 vuepress + @vuepress/theme-blog 搭建 —— by: Big Rice © 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/bigRiceRice.io/dist/assets/js/app.c86c3a98.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/6.d33dc470.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/3.606773b1.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/87.bc7a3f10.js" defer></script>
  </body>
</html>
