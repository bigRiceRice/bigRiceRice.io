<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ã€Vue3ã€‘çš„é‚£äº›å°ç»†èŠ‚ | Big Rice ğŸš</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Piniaã€Hooksã€å¼‚æ­¥ç»„ä»¶ã€ç±»å‹æ¨å¯¼ã€æ•°æ®æ³¨å…¥">
    
    <link rel="preload" href="/bigRiceRice.io/dist/assets/css/0.styles.e2199ed9.css" as="style"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/app.cafe85c2.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/77.364f996d.js" as="script"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/10.5590a827.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/11.168de83c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/12.568a4166.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/13.db8ed0f6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/14.92580113.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/15.73f8924b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/16.8df64f59.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/17.0a79554e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/18.32e3f4a7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/19.ca60a6f2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/20.e70148c9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/21.9d4d5a4c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/22.cb313a94.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/23.9353c20d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/24.b6ef68b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/25.80842e38.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/26.3f8ff577.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/27.8ec5cfdf.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/28.8ca4206a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/29.e8e1123e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/30.07a7e574.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/31.73b312ac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/32.ce9b6eaa.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/33.1e9cab45.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/34.7a8c94b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/35.e69c119d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/36.c8177ba2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/37.93f48cd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/38.be899865.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/4.cb5dc486.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/40.86c3d530.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/41.e0f838f0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/42.b3357d7b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/43.39f49b21.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/44.bf987907.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/45.3ca71423.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/46.560db7ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/47.fa57f3e9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/48.d99d61c4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/49.4d7bf943.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/5.44ec780a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/50.b5631b4f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/51.c176a116.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/52.7e85ded7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/53.4252bf31.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/54.adeff585.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/55.5046e0eb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/56.938a3529.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/57.b1ab4ac7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/58.1f35c496.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/59.ac0a7da9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/60.905fe27a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/61.1cc0e9c4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/62.cb4cb99a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/63.28bf2549.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/64.4573539d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/65.974abb54.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/66.4b6c9f61.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/67.830c3f18.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/68.93f88e77.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/69.3d8d8b58.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/70.643fdb4f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/71.0ec979a5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/72.9039b416.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/73.1da63caa.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/74.8d438fd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/75.b1cba427.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/76.d0af203f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/78.fdda5f24.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/79.f5a17d47.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/8.45199285.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/80.07034f90.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/81.a92349ef.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/82.fa19b559.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/83.36893000.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/84.d7be29ed.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/85.7d5fa770.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/9.2eadd3a5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/bigRiceRice.io/dist/assets/css/0.styles.e2199ed9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/bigRiceRice.io/dist/" class="nav-link home-link">Big Rice ğŸš </a> <button class="back" style="display:;">â†©</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/bigRiceRice.io/dist/" class="nav-link mobile-home-link">Big Rice ğŸš </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        ã€Vue3ã€‘çš„é‚£äº›å°ç»†èŠ‚
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address"> Â  in äº‘æ¢¦æ³½</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-12-20T00:00:00.000Z">
      2021-12-20
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/Vue3" data-v-42ccfcd5><span data-v-42ccfcd5>Vue3</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="attribute-å±æ€§é€ä¼ "><a href="#attribute-å±æ€§é€ä¼ " class="header-anchor">#</a> Attribute å±æ€§é€ä¼ </h2> <blockquote><p>åœ¨ vue2 å®˜æ–¹æ–‡æ¡£ä¸­<a href="https://v2.cn.vuejs.org/v2/guide/render-function.html#%E5%90%91%E5%AD%90%E5%85%83%E7%B4%A0%E6%88%96%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92-attribute-%E5%92%8C%E4%BA%8B%E4%BB%B6" target="_blank" rel="noopener noreferrer">é€ä¼ åŠŸèƒ½<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„ä»‹ç»è¢«ä¸€ç¬”å¸¦è¿‡</p></blockquote> <p>å½“ä¸€ä¸ªç»„ä»¶ä»¥å•ä¸ªå…ƒç´ ä¸ºæ ¹ä½œæ¸²æŸ“æ—¶ï¼Œé€ä¼ çš„ attribute ä¼šè‡ªåŠ¨è¢«æ·»åŠ åˆ°æ ¹å…ƒç´ ä¸Šã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>&lt;MyButton&gt;</code> ç»„ä»¶ï¼Œå®ƒçš„æ¨¡æ¿é•¿è¿™æ ·ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;MyButton&gt; çš„æ¨¡æ¿,æ²¡æœ‰å®šä¹‰ Script --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸€ä¸ªçˆ¶ç»„ä»¶ä½¿ç”¨äº†è¿™ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ä¼ å…¥äº† <code>class</code>ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyButton</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>æœ€åæ¸²æŸ“å‡ºçš„ DOM ç»“æœæ˜¯ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œ <code>&lt;MyButton&gt;</code> å¹¶æ²¡æœ‰å°† <code>class</code> å£°æ˜ä¸ºä¸€ä¸ªå®ƒæ‰€æ¥å—çš„ propï¼Œæ‰€ä»¥ <code>class</code> è¢«è§†ä½œé€ä¼  attributeï¼Œè‡ªåŠ¨é€ä¼ åˆ°äº† <code>&lt;MyButton&gt;</code> çš„æ ¹å…ƒç´ ä¸Šã€‚</p> <h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h3> <h5 id="æ­¤å¤„çš„-attribute-æŒ‡çš„æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å€¼ä¸­-å­ç»„ä»¶æ²¡æœ‰å°†å…¶-åˆ©ç”¨-props-æˆ–-emits-çš„é‚£äº›å±æ€§"><a href="#æ­¤å¤„çš„-attribute-æŒ‡çš„æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å€¼ä¸­-å­ç»„ä»¶æ²¡æœ‰å°†å…¶-åˆ©ç”¨-props-æˆ–-emits-çš„é‚£äº›å±æ€§" class="header-anchor">#</a> æ­¤å¤„çš„ Attribute æŒ‡çš„æ˜¯çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å€¼ä¸­ï¼Œå­ç»„ä»¶æ²¡æœ‰å°†å…¶â€œåˆ©ç”¨ï¼ˆ<a href="https://cn.vuejs.org/guide/components/props.html" target="_blank" rel="noopener noreferrer">props<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æˆ– <a href="https://cn.vuejs.org/guide/components/events.html#defining-custom-events" target="_blank" rel="noopener noreferrer">emits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼‰â€çš„é‚£äº›å±æ€§</h5> <ul><li><p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯ <code>class</code>ã€<code>style</code> å’Œ <code>id</code> è¿™äº›å±æ€§ã€‚</p></li> <li><p>è‹¥çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼å­ç»„ä»¶ä¸€ä¸ªéƒ½æ²¡æœ‰ç”¨åˆ°ï¼Œé‚£ä¹ˆå…¨éƒ½ä¼šåœ¨ <code>$attrs</code>ä¸Šï¼Œå¹¶ä¸”ä¼šæœ‰ä¸¤ç§é€ä¼ æ–¹å¼ï¼š</p> <ol><li>è‹¥æ ¹å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆç›´æ¥è‡ªåŠ¨ä¼ é€’ç»™è¿™ä¸ªæ ¹å…ƒç´ ï¼Œæˆ–æ ¹å…ƒç´ æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆä¼ é€’ç»™è¿™ä¸ªç»„ä»¶å¥—å¨ƒã€‚</li> <li>è‹¥æ ¹ç»„ä»¶æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆå°†ä¸ä¼šè‡ªåŠ¨ä¼ é€’ç»™ä»»ä½•æ ¹å…ƒç´ ï¼Œéœ€è¦äººä¸ºä¼ é€’ã€‚</li></ol></li> <li><p>ç»„ä»¶å†…çš„å•ä¸ªæ ¹å…ƒç´ è‡ªåŠ¨è·å–çš„å€¼éƒ½æ˜¯æ²¡æœ‰è¢«åˆ©ç”¨èµ·æ¥çš„å±æ€§ï¼ˆ<strong>åƒåƒåœ¾</strong>ï¼‰</p></li></ul> <p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå®šä¹‰ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ï¼Œæ²¡æœ‰ <code>script</code> éƒ¨åˆ†</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Test.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æµ‹è¯•æ–‡æœ¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨è°ƒç”¨æ—¶ç»™ä»–ä¼ å…¥å¾ˆå¤šçš„å±æ€§</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Test</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fontSize<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ²çˆ†!åŒ—äº¬ç«Ÿç„¶å‘ç”Ÿè¿™ç§äº‹ï¼<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@update-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ç„¶å¦‚æ­¤ï¼Œæ—¥æœ¬è°šè¯­æ›¾ç»è¯´è¿‡ï¼Œä¸å¹¸å¯èƒ½æˆä¸ºé€šå‘å¹¸ç¦çš„æ¡¥æ¢ã€‚è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€ã€‚
    æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåªè¦æœ‰æ„ä¹‰ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ…é‡è€ƒè™‘ã€‚
    ç”Ÿæ´»ä¸­ï¼Œè‹¥æ³¢å¤šé‡ç»“è¡£å‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Test</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸‹é¢çœ‹å…ƒç´ ç»§æ‰¿çš„è¡¨ç°ä¸ <code>$attr</code> å¯¹è±¡ï¼š</p> <img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212072133688.png" alt="image-20221207213352558" style="zoom:80%;"> <p>æˆ‘ä»¬å®Œå–„ä¸‹ <code>&lt;Test.vue&gt;</code> ç»„ä»¶çš„åŠŸèƒ½ï¼Œå°†æŸäº›èƒ½ç”¨çš„å±æ€§åˆ©ç”¨èµ·æ¥ï¼Œå†æ¥çœ‹çœ‹æ•ˆæœï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fontSize&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;updateSize&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">v</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">e</span><span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    v <span class="token operator">?</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;updateSize&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;updateSize&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClick(null, $event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹å¤§å°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ 'font-size': fontSize + 'em' }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Test</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fontSize<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ²çˆ†!åŒ—äº¬ç«Ÿç„¶å‘ç”Ÿè¿™ç§äº‹ï¼<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@update-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ç„¶å¦‚æ­¤ï¼Œæ—¥æœ¬è°šè¯­æ›¾ç»è¯´è¿‡ï¼Œä¸å¹¸å¯èƒ½æˆä¸ºé€šå‘å¹¸ç¦çš„æ¡¥æ¢ã€‚è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€ã€‚
    æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåªè¦æœ‰æ„ä¹‰ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ…é‡è€ƒè™‘ã€‚
    ç”Ÿæ´»ä¸­ï¼Œè‹¥æ³¢å¤šé‡ç»“è¡£å‡ºç°äº†ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å®ƒå‡ºç°äº†çš„äº‹å®ã€‚
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Test</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸‹é¢çœ‹å…ƒç´ ç»§æ‰¿çš„è¡¨ç°ä¸ <code>$attr</code> å¯¹è±¡ï¼š</p> <p><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212072146846.png" alt="image-20221207214656771"></p> <h3 id="å¤šæ ¹èŠ‚ç‚¹çš„-attributes-ç»§æ‰¿"><a href="#å¤šæ ¹èŠ‚ç‚¹çš„-attributes-ç»§æ‰¿" class="header-anchor">#</a> å¤šæ ¹èŠ‚ç‚¹çš„ Attributes ç»§æ‰¿</h3> <p>ä¸å•æ ¹èŠ‚ç‚¹ä¸åŒï¼Œæœ‰ç€å¤šä¸ªæ ¹èŠ‚ç‚¹çš„ç»„ä»¶æ²¡æœ‰è‡ªåŠ¨ attribute é€ä¼ è¡Œä¸ºã€‚</p> <ul><li>å› ä¸º Vue ä¸çŸ¥é“è¦å°†è¿™äº› attribute é€ä¼ åˆ°å“ªé‡Œï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Š</li></ul> <p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>&lt;script setup&gt;</code> ä¸­ä½¿ç”¨ <code>useAttrs</code> å‡½æ•°æ¥è®¿é—®è¿™äº› attributes å±æ€§ï¼Œå¹¶å°†ä»–ç»‘å®šåˆ°æŒ‡å®šçš„è·Ÿå…ƒç´ ä¸Š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> useAttrs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token function">useAttrs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attrs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨æ¨¡æ¿ä¸­è®¿é—® attributes æ›´åŠ æ–¹ä¾¿ï¼Œåªéœ€è¦è¿™æ ·</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ç¦ç”¨è‡ªåŠ¨-attributes-ç»§æ‰¿"><a href="#ç¦ç”¨è‡ªåŠ¨-attributes-ç»§æ‰¿" class="header-anchor">#</a> ç¦ç”¨è‡ªåŠ¨ Attributes ç»§æ‰¿</h3> <p>å¦‚æœä½ <strong>ä¸æƒ³è¦</strong>ä¸€ä¸ªç»„ä»¶è‡ªåŠ¨åœ°ç»§æ‰¿ attributeï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶é€‰é¡¹ä¸­è®¾ç½® <code>inheritAttrs: false</code>ã€‚</p> <p>å¦‚æœä½ ä½¿ç”¨äº† <code>&lt;script setup&gt;</code>ï¼Œä½ éœ€è¦ä¸€ä¸ªé¢å¤–çš„ <code>&lt;script&gt;</code> å—æ¥ä¹¦å†™è¿™ä¸ªé€‰é¡¹å£°æ˜ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// ä½¿ç”¨æ™®é€šçš„ &lt;script&gt; æ¥å£°æ˜é€‰é¡¹</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// ...setup éƒ¨åˆ†é€»è¾‘</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æœ€å¸¸è§çš„éœ€è¦ç¦ç”¨ attribute ç»§æ‰¿çš„åœºæ™¯å°±æ˜¯ attribute éœ€è¦åº”ç”¨åœ¨æ ¹èŠ‚ç‚¹ä»¥å¤–çš„å…¶ä»–å…ƒç´ ä¸Šã€‚é€šè¿‡è®¾ç½® <code>inheritAttrs</code> é€‰é¡¹ä¸º <code>false</code>ï¼Œä½ å¯ä»¥å®Œå…¨æ§åˆ¶é€ä¼ è¿›æ¥çš„ attribute è¢«å¦‚ä½•ä½¿ç”¨ã€‚</p> <hr> <h2 id="provide-inject-ä¾èµ–æ³¨å…¥"><a href="#provide-inject-ä¾èµ–æ³¨å…¥" class="header-anchor">#</a> Provide / Injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰</h2> <h3 id="prop-é€çº§é€ä¼ é—®é¢˜"><a href="#prop-é€çº§é€ä¼ é—®é¢˜" class="header-anchor">#</a> Prop é€çº§é€ä¼ é—®é¢˜</h3> <p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬éœ€è¦ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ï¼Œä¼šä½¿ç”¨ <code>props</code>ã€‚æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„ç»“æ„ï¼šæœ‰ä¸€äº›å¤šå±‚çº§åµŒå¥—çš„ç»„ä»¶ï¼Œå½¢æˆäº†ä¸€é¢—å·¨å¤§çš„ç»„ä»¶æ ‘ï¼Œè€ŒæŸä¸ªæ·±å±‚çš„å­ç»„ä»¶éœ€è¦ä¸€ä¸ªè¾ƒè¿œçš„ç¥–å…ˆç»„ä»¶ä¸­çš„éƒ¨åˆ†æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä»…ä½¿ç”¨ props åˆ™å¿…é¡»å°†å…¶æ²¿ç€ç»„ä»¶é“¾é€çº§ä¼ é€’ä¸‹å»ï¼Œè¿™ä¼šéå¸¸éº»çƒ¦ï¼š</p> <img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212111407207.png" alt="image-20221211140633218" style="zoom:80%;"> <p>æ³¨æ„ï¼Œè™½ç„¶è¿™é‡Œçš„ <code>&lt;Footer&gt;</code> ç»„ä»¶å¯èƒ½æ ¹æœ¬ä¸å…³å¿ƒè¿™äº› propsï¼Œä½†ä¸ºäº†ä½¿ <code>&lt;DeepChild&gt;</code> èƒ½è®¿é—®åˆ°å®ƒä»¬ï¼Œä»ç„¶éœ€è¦å®šä¹‰å¹¶å‘ä¸‹ä¼ é€’ã€‚å¦‚æœç»„ä»¶é“¾è·¯éå¸¸é•¿ï¼Œå¯èƒ½ä¼šå½±å“åˆ°æ›´å¤šè¿™æ¡è·¯ä¸Šçš„ç»„ä»¶ã€‚è¿™ä¸€é—®é¢˜è¢«ç§°ä¸ºâ€œprop é€çº§é€ä¼ â€ï¼Œæ˜¾ç„¶æ˜¯æˆ‘ä»¬å¸Œæœ›å°½é‡é¿å…çš„æƒ…å†µã€‚</p> <p><code>provide</code> å’Œ <code>inject</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸€é—®é¢˜ã€‚ ä¸€ä¸ªçˆ¶ç»„ä»¶ç›¸å¯¹äºå…¶æ‰€æœ‰çš„åä»£ç»„ä»¶ï¼Œä¼šä½œä¸º<strong>ä¾èµ–æä¾›è€…</strong>ã€‚ä»»ä½•åä»£çš„ç»„ä»¶æ ‘ï¼Œæ— è®ºå±‚çº§æœ‰å¤šæ·±ï¼Œéƒ½å¯ä»¥<strong>æ³¨å…¥</strong>ç”±çˆ¶ç»„ä»¶æä¾›ç»™æ•´æ¡é“¾è·¯çš„ä¾èµ–ã€‚</p> <img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212111409878.png" alt="img" style="zoom:80%;"> <h3 id="provide-æä¾›æ•°æ®"><a href="#provide-æä¾›æ•°æ®" class="header-anchor">#</a> Provideï¼ˆæä¾›æ•°æ®ï¼‰</h3> <p>è¦ä¸ºç»„ä»¶åä»£æä¾›æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨åˆ° <code>provide()</code> å‡½æ•°ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token function">provide</span><span class="token punctuation">(</span><span class="token comment">/* æ³¨å…¥å */</span> <span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* å€¼ */</span> <span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¦‚æœä¸ä½¿ç”¨ <code>&lt;script setup&gt;</code>ï¼Œè¯·ç¡®ä¿ <code>provide()</code> æ˜¯åœ¨ <code>setup()</code> åŒæ­¥è°ƒç”¨çš„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token comment">/* æ³¨å…¥å */</span> <span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* å€¼ */</span> <span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>provide()</code> å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚</p> <ol><li>ç¬¬ä¸€ä¸ªå‚æ•°è¢«ç§°ä¸º<strong>æ³¨å…¥å</strong>ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ª <code>Symbol</code>ã€‚åä»£ç»„ä»¶ä¼šç”¨æ³¨å…¥åæ¥æŸ¥æ‰¾æœŸæœ›æ³¨å…¥çš„å€¼ã€‚ä¸€ä¸ªç»„ä»¶å¯ä»¥å¤šæ¬¡è°ƒç”¨ <code>provide()</code>ï¼Œä½¿ç”¨ä¸åŒçš„æ³¨å…¥åï¼Œæ³¨å…¥ä¸åŒçš„ä¾èµ–å€¼ã€‚</li> <li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æä¾›çš„å€¼ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬å“åº”å¼çš„çŠ¶æ€ï¼Œæ¯”å¦‚ä¸€ä¸ª refï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æä¾›çš„å“åº”å¼çŠ¶æ€ä½¿åä»£ç»„ä»¶å¯ä»¥ç”±æ­¤å’Œæä¾›è€…å»ºç«‹å“åº”å¼çš„è”ç³»ã€‚</p> <h3 id="inject-æ³¨å…¥æ•°æ®"><a href="#inject-æ³¨å…¥æ•°æ®" class="header-anchor">#</a> Injectï¼ˆæ³¨å…¥æ•°æ®ï¼‰</h3> <p>è¦æ³¨å…¥ä¸Šå±‚ç»„ä»¶æä¾›çš„æ•°æ®ï¼Œéœ€ä½¿ç”¨ <code>inject()</code> å‡½æ•°ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åŒæ ·çš„ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ <code>&lt;script setup&gt;</code>ï¼Œ<code>inject()</code> éœ€è¦åœ¨ <code>setup()</code> å†…åŒæ­¥è°ƒç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨"><a href="#å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨" class="header-anchor">#</a> å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨</h3> <p>å½“æä¾› / æ³¨å…¥å“åº”å¼çš„æ•°æ®æ—¶ï¼Œ<strong>å»ºè®®å°½å¯èƒ½å°†ä»»ä½•å¯¹å“åº”å¼çŠ¶æ€çš„å˜æ›´éƒ½ä¿æŒåœ¨ä¾›ç»™æ–¹ç»„ä»¶ä¸­</strong>ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ‰€æä¾›çŠ¶æ€çš„å£°æ˜å’Œå˜æ›´æ“ä½œéƒ½å†…èšåœ¨åŒä¸€ä¸ªç»„ä»¶å†…ï¼Œä½¿å…¶æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p> <p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æ³¨å…¥æ–¹ç»„ä»¶ä¸­æ›´æ”¹æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èåœ¨ä¾›ç»™æ–¹ç»„ä»¶å†…å£°æ˜å¹¶æä¾›ä¸€ä¸ªæ›´æ”¹æ•°æ®çš„æ–¹æ³•å‡½æ•°ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- åœ¨ä¾›ç»™æ–¹ç»„ä»¶å†… --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;North Pole&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">updateLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    location<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;South Pole&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    location<span class="token punctuation">,</span>
    updateLocation<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- åœ¨æ³¨å…¥æ–¹ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> location<span class="token punctuation">,</span> updateLocation <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Now Location{{ location }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateLocation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>updateLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æœ€åï¼Œå¦‚æœä½ æƒ³ç¡®ä¿æä¾›çš„æ•°æ®ä¸èƒ½è¢«æ³¨å…¥æ–¹çš„ç»„ä»¶æ›´æ”¹ï¼Œç¡®ä¿ä¸¥è°¨æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <code>readonly()</code> æ¥åŒ…è£…æä¾›çš„å€¼ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- åœ¨ä¾›ç»™æ–¹ç»„ä»¶å†… --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> readonly  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'North Pole'</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">updateLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  location<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'South Pole'</span>
<span class="token punctuation">}</span>

<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'location'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">readonly</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">,</span>
  updateLocation
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ä½¿ç”¨-symbol-ä½œæ³¨å…¥å"><a href="#ä½¿ç”¨-symbol-ä½œæ³¨å…¥å" class="header-anchor">#</a> ä½¿ç”¨ Symbol ä½œæ³¨å…¥å</h3> <p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºæ³¨å…¥åã€‚ä½†å¦‚æœä½ æ­£åœ¨æ„å»ºå¤§å‹çš„åº”ç”¨ï¼ŒåŒ…å«éå¸¸å¤šçš„ä¾èµ–æä¾›ï¼Œæˆ–è€…ä½ æ­£åœ¨ç¼–å†™æä¾›ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„ç»„ä»¶åº“ï¼Œå»ºè®®æœ€å¥½ä½¿ç”¨ Symbol æ¥ä½œä¸ºæ³¨å…¥åä»¥é¿å…æ½œåœ¨çš„å†²çªã€‚</p> <p>æˆ‘ä»¬é€šå¸¸æ¨èåœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­å¯¼å‡ºè¿™äº›æ³¨å…¥å Symbolï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// keys.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> myInjectionKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åœ¨ä¾›ç»™æ–¹ç»„ä»¶ä¸­</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myInjectionKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./keys.js&quot;</span><span class="token punctuation">;</span>

<span class="token function">provide</span><span class="token punctuation">(</span>myInjectionKey<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">/*  è¦æä¾›çš„æ•°æ® */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ³¨å…¥æ–¹ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myInjectionKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./keys.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> injected <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>myInjectionKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="å¼‚æ­¥ç»„ä»¶"><a href="#å¼‚æ­¥ç»„ä»¶" class="header-anchor">#</a> å¼‚æ­¥ç»„ä»¶</h2> <p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‹†åˆ†åº”ç”¨ä¸ºæ›´å°çš„å—ï¼Œå¹¶ä»…åœ¨éœ€è¦æ—¶å†ä»æœåŠ¡å™¨åŠ è½½ç›¸å…³ç»„ä»¶ã€‚Vue æä¾›äº† <code>defineAsyncComponent</code> æ–¹æ³•æ¥å®ç°æ­¤åŠŸèƒ½ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...ä»æœåŠ¡å™¨è·å–ç»„ä»¶</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token comment">/* è·å–åˆ°çš„ç»„ä»¶ */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ... åƒä½¿ç”¨å…¶ä»–ä¸€èˆ¬ç»„ä»¶ä¸€æ ·ä½¿ç”¨ `AsyncComp`</span>
</code></pre></div><h3 id="defineasynccomponent-æ–¹æ³•"><a href="#defineasynccomponent-æ–¹æ³•" class="header-anchor">#</a> defineAsyncComponent æ–¹æ³•</h3> <p><code>defineAsyncComponent</code> å‡½æ•°æœ‰ä¸¤ç§ç”¨æ³•</p> <ol><li><p>å‚æ•°ä¸ºå‡½æ•°å¼ï¼šç›´æ¥è®¾å®šéœ€è¦åŠ è½½çš„å¼‚æ­¥ç»„ä»¶ï¼ˆå·¥å‚å‡½æ•°ï¼‰ã€‚</p> <ul><li>å‡½æ•°å¿…é¡»è¿”å› <code>Promise</code> é£æ ¼çš„åŠ è½½å‡½æ•°</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./xxx/xxx.vue&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>comp <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> comp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> e<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./xxx/xxx.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>å‚æ•°ä¸ºå¯¹è±¡å¼ï¼šå¼€å¯é«˜çº§é€‰é¡¹ï¼Œè¯¦ç»†çš„å®šä¹‰æ­¤å¼‚æ­¥ç»„ä»¶çš„å„ç§é…ç½®ï¼ˆé…ç½®é¡¹ï¼‰ã€‚</p> <ul><li>è·¯ç”±ä¸­çš„ <code>component</code> å±æ€§ä¹ŸåŒæ ·å¯ä»¥ä½¿ç”¨è¿™ç§é…ç½®æ¨¡å¼ã€‚&lt;*Vue Router 2.4.0+&gt;</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// å·¥å‚å‡½æ•°ï¼Œè¿”å›éœ€è¦åŠ è½½çš„å¼‚æ­¥ç»„ä»¶ï¼šPromise é£æ ¼è¿”å›å€¼</span>
    <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./xxx/xxx.vue'</span><span class="token punctuation">)</span>
    <span class="token comment">// åŠ è½½ä¸­æ˜¾ç¤ºçš„ç»„ä»¶ï¼šå½“å·¥å‚å‡½æ•°ä¸ºå¼‚æ­¥æ—¶ä¸­é—´åŠ è½½çš„ç»„ä»¶ï¼š</span>
    <span class="token literal-property property">loadingComponent</span><span class="token operator">:</span> loadingComponent<span class="token punctuation">,</span>
    <span class="token comment">// åŠ è½½å¤±è´¥æ˜¾ç¤ºçš„ç»„ä»¶ï¼šå½“ Timeout è¶…æ—¶æˆ– onError å‡½æ•°ä¸­è°ƒç”¨ fail() æ—¶åŠ è½½çš„ç»„ä»¶ï¼š</span>
    <span class="token literal-property property">errorComponent</span><span class="token operator">:</span> errorComponent<span class="token punctuation">,</span>
    <span class="token comment">// ç»„ä»¶å»¶è¿ŸåŠ è½½ï¼Œé»˜è®¤ä¸º 200 ms</span>
    <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token comment">// æœ€å¤§è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º Infinity æ— ç©·å¤§</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">3000</span> <span class="token punctuation">,</span>
    <span class="token comment">// æ˜¯å¦éœ€è¦ &lt;Suspense&gt; æ¥æ§åˆ¶,é»˜è®¤ä¸º true</span>
    <span class="token literal-property property">suspensible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// å½“å·¥å‚å‡½æ•°è¿”å› Reject() æ—¶çš„å›è°ƒå‡½æ•°</span>
    <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> attempts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// error    : &lt;Error&gt;    å¤±è´¥åŸå› : reject() ä¸­çš„å†…å®¹</span>
        <span class="token comment">// retry    : &lt;Function&gt; å°è¯•é‡è¯•åŠ è½½çš„å‡½æ•°ï¼Œè°ƒç”¨åå°†å†æ¬¡è°ƒç”¨å·¥å‚å‡½æ•°ï¼Œå¹¶å°† attempts åŠ ä¸€</span>
        <span class="token comment">// fail     : &lt;Function&gt; å®£å‘ŠåŠ è½½å¤±è´¥çš„å‡½æ•°ï¼Œè°ƒç”¨åç›´æ¥æ˜¾ç¤º errorComponent</span>
        <span class="token comment">// attempts : &lt;Number&gt;   å¤±è´¥æ¬¡æ•°ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåŠ ä¸€ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ä¸º 1</span>

        <span class="token comment">// æ­¤å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ retry / fail ä¸¤ä¸ªå‡½æ•°ä¸­çš„ä¸€ä¸ª</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="header-anchor">#</a> å®ä¾‹</h3> <p><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212111734283.gif" alt="01"></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// yarn add vant | npm install vant</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> showToast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Loading <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;åŠ è½½ä¸­...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Error <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;åŠ è½½å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Context <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ğŸ˜€Hello WorldğŸ˜€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> failCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">t</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>failCount <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å¤±è´¥</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>failCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">æ¬¡\næ­£åœ¨é‡è¯•...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰‹åŠ¨å¤±è´¥ï¼Œç”¨äºæµ‹è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;åŠ è½½æˆåŠŸ&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>Context <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loadingComponent</span><span class="token operator">:</span> Loading<span class="token punctuation">,</span>
    <span class="token literal-property property">errorComponent</span><span class="token operator">:</span> Error<span class="token punctuation">,</span>
    <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">suspensible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> attempts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>attempts <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">retry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AsyncComp</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨"><a href="#å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨" class="header-anchor">#</a> å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨</h3> <blockquote><p>ä¸ºäº†æ›´å¥½çš„ä¼˜åŒ–æ€§èƒ½ä»¥åŠé¦–å±å¼€å¯é€Ÿåº¦ã€‚</p></blockquote> <p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å£°æ˜äº†å¾ˆå¤šå­ç»„ä»¶ï¼Œä½†å®ƒçš„æ˜¾ç¤ºå¯ä»¥ä¸æ˜¯ç¬¬ä¸€æ¢¯é˜Ÿï¼Œå°±å¯ä»¥å°†å®ƒè®¾ç½®ä¸ºå¼‚æ­¥ç»„ä»¶ï¼Œç”¨å…¶ä»–çš„æ¡ä»¶æ¥æ§åˆ¶è¿™ä¸ªç»„ä»¶çš„æ˜¾ç¤ºä¸å¦ã€‚è¿™æ ·å°±é¿å…çš„åŒæ­¥ç»„ä»¶çš„åŒæ—¶è¯·æ±‚ã€‚</p> <ul><li>åŒæ­¥ç»„ä»¶ä¼šä¸€æ¬¡æ€§å°†å£°æ˜çš„ç»„ä»¶å…¨éƒ¨å‘ä¸€éè¯·æ±‚è·å–ç»„ä»¶ã€‚</li> <li>å¼‚æ­¥ç»„ä»¶åœ¨æ˜¾ç¤ºæ—¶æ‰ä¼šå•ç‹¬å‘è¯·æ±‚è·å–ç»„ä»¶</li></ul> <h2 id="teleport"><a href="#teleport" class="header-anchor">#</a> Teleport</h2> <p>...</p> <h2 id="suspense"><a href="#suspense" class="header-anchor">#</a> Suspense</h2> <p>...</p> <h2 id="hooks-ç»„åˆå¼å‡½æ•°"><a href="#hooks-ç»„åˆå¼å‡½æ•°" class="header-anchor">#</a> Hooks ç»„åˆå¼å‡½æ•°</h2> <p>åœ¨ Vue2 ä¸­ï¼Œé‡åˆ°é‡å¤çš„é€»è¾‘æˆ‘ä»¬å¯ä»¥å°†å…¶æ”¾ç½®åˆ°ä¸€ä¸ª JS æ–‡ä»¶ä¸­ç„¶åä½¿ç”¨ <code>mixin</code> æ··å…¥æŒ‚è½½åˆ°å…¨å±€å®ä¾‹ä¸Šï¼Œä½†è¿™ç§æ¨¡å¼æœ‰ä¸‰ä¸ªä¸»è¦çš„çŸ­æ¿ï¼š</p> <ol><li><strong>æ•°æ®æ¥æºä¸æ¸…æ™°</strong>ï¼šå½“ä½¿ç”¨äº†å¤šä¸ª mixin æ—¶ï¼Œå®ä¾‹ä¸Šçš„æ•°æ®å±æ€§æ¥è‡ªå“ªä¸ª mixin å˜å¾—ä¸æ¸…æ™°ï¼Œè¿™ä½¿è¿½æº¯å®ç°å’Œç†è§£ç»„ä»¶è¡Œä¸ºå˜å¾—å›°éš¾ã€‚
<ul><li>åœ¨ç»„åˆå¼å‡½æ•°ä¸­ä½¿ç”¨ ref + è§£æ„æ¨¡å¼ï¼šè®©å±æ€§çš„æ¥æºåœ¨æ¶ˆè´¹ç»„ä»¶æ—¶ä¸€ç›®äº†ç„¶ã€‚</li></ul></li> <li><strong>å‘½åç©ºé—´å†²çª</strong>ï¼šå¤šä¸ªæ¥è‡ªä¸åŒä½œè€…çš„ mixin å¯èƒ½ä¼šæ³¨å†Œç›¸åŒçš„å±æ€§åï¼Œé€ æˆå‘½åå†²çªã€‚
<ul><li>é€šè¿‡åœ¨è§£æ„å˜é‡æ—¶å¯¹å˜é‡è¿›è¡Œé‡å‘½åæ¥é¿å…ç›¸åŒçš„é”®åã€‚</li></ul></li> <li><strong>éšå¼çš„è·¨ mixin äº¤æµ</strong>ï¼šå¤šä¸ª mixin éœ€è¦ä¾èµ–å…±äº«çš„å±æ€§åæ¥è¿›è¡Œç›¸äº’ä½œç”¨ï¼Œè¿™ä½¿å¾—å®ƒä»¬éšæ€§åœ°è€¦åˆåœ¨ä¸€èµ·ã€‚
<ul><li>ä¸€ä¸ªç»„åˆå¼å‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªç»„åˆå¼å‡½æ•°çš„å‚æ•°è¢«ä¼ å…¥ï¼Œåƒæ™®é€šå‡½æ•°é‚£æ ·ã€‚</li></ul></li></ol> <h3 id="hook-è§„èŒƒ"><a href="#hook-è§„èŒƒ" class="header-anchor">#</a> hook è§„èŒƒ</h3> <p>å› ä¸º ç»„åˆå¼å‡½æ•° ä¸ <strong>React hooks</strong> å‡½æ•° éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥åœ¨ <code>/src</code> ä¸‹æ–°å»ºä¸€ä¸ª <code>Hook</code> æ–‡ä»¶å¤¹ï¼Œä¸‹é¢å­˜æ”¾è¿™äº›ç»„åˆå¼å‡½æ•°ã€‚</p> <ul><li>ç»„åˆå¼å‡½æ•°çº¦å®šç”¨é©¼å³°å‘½åæ³•å‘½åï¼Œå¹¶ä»¥ <code>â€œuseâ€</code> ä½œä¸ºå¼€å¤´ã€‚</li> <li>ç»„åˆå¼å‡½æ•°åº”å§‹ç»ˆè¢«<strong>åŒæ­¥åœ°</strong>è°ƒç”¨ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯ä¸ºäº†è®© Vue èƒ½å¤Ÿç¡®å®šå½“å‰æ­£åœ¨è¢«æ‰§è¡Œçš„åˆ°åº•æ˜¯å“ªä¸ªç»„ä»¶å®ä¾‹ï¼Œåªæœ‰èƒ½ç¡®è®¤å½“å‰ç»„ä»¶å®ä¾‹ï¼Œæ‰èƒ½å¤Ÿï¼š
<ul><li>ç”Ÿå‘½å‘¨æœŸé’©å­èƒ½å¤Ÿæ­£å¸¸æ³¨å†Œåˆ°è¯¥ç»„ä»¶å®ä¾‹ä¸Šã€‚</li> <li>å°†è®¡ç®—å±æ€§å’Œç›‘å¬å™¨æ³¨å†Œåˆ°è¯¥ç»„ä»¶å®ä¾‹ä¸Šï¼Œä»¥ä¾¿åœ¨è¯¥ç»„ä»¶è¢«å¸è½½æ—¶åœæ­¢ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li></ul></li></ul> <h3 id="é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹"><a href="#é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹" class="header-anchor">#</a> é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// src/hoos/useMouse.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> y<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>event<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
        y<span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMouse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useMouse&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>åæ ‡ï¼š{{ x }}:{{ y }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212121329985.gif" alt="01" style="zoom:80%;"> <h3 id="å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹"><a href="#å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹" class="header-anchor">#</a> å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹</h3> <p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ <code>hook</code> å‡½æ•°å®šä¹‰æˆå…·æœ‰å¼‚æ­¥çŠ¶æ€çš„å‡½æ•°ã€‚</p> <blockquote><p>æ ¹æ® url è¯·æ±‚æ•°æ®çš„ä¾‹å­</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> isRef<span class="token punctuation">,</span> unref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useAsyncFetch</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> Ref<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token operator">|</span> Ref<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> error<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Error<span class="token operator">&gt;</span> <span class="token operator">|</span> Ref<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">doFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        error<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                data<span class="token punctuation">.</span>value <span class="token operator">=</span> v<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">watchEffect</span><span class="token punctuation">(</span>doFetch<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">doFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAsyncFetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../hooks/useAsyncFetch&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;http://43.139.22.50:5588/client/getClassify&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAsyncFetch</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    url<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;http://43.139.22.50:5588/client/randomNews&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>å½“å‰URLï¼š{{ url }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ error }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ data }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fetch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click Fetch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212121437370.gif" alt="01" style="zoom:80%;"> <hr> <h2 id="pinia"><a href="#pinia" class="header-anchor">#</a> Pinia</h2> <p>åœ¨ Vue2 ä¸­ï¼Œå…¨å±€çš„çŠ¶æ€ç®¡ç†æˆ‘ä»¬ä¼šä½¿ç”¨ <code>Vuex</code> æ¥å®Œæˆï¼Œåœ¨ Vue3 ä¸­æˆ‘ä»¬åˆ™ä½¿ç”¨ <code>Pinia</code>ã€‚</p> <ul><li>Pinia æ˜¯ VueX5 çš„è¿‡æ¸¡äº§å“ï¼ŒåŒæ ·ä¹Ÿæ˜¯ Vue å®˜æ–¹å‡ºå“çš„å…¨å±€çŠ¶æ€ç®¡ç†æ’ä»¶ã€‚</li></ul> <h3 id="ä¸-vuex-çš„ä¸åŒä¹‹å¤„"><a href="#ä¸-vuex-çš„ä¸åŒä¹‹å¤„" class="header-anchor">#</a> ä¸ Vuex çš„ä¸åŒä¹‹å¤„ï¼š</h3> <ul><li><code>mutation</code> è¢«å¼ƒç”¨ã€‚å®ƒä»¬ç»å¸¸è¢«è®¤ä¸ºæ˜¯<strong>æå…¶å†—ä½™çš„</strong>ã€‚å®ƒä»¬åˆè¡·æ˜¯å¸¦æ¥ devtools çš„é›†æˆæ–¹æ¡ˆï¼Œä½†è¿™å·²ä¸å†æ˜¯ä¸€ä¸ªé—®é¢˜äº† ã€‚</li> <li>å¤©ç”Ÿæ”¯æŒ TS ã€‚</li> <li>ä¸å†æœ‰åµŒå¥—ç»“æ„çš„<strong>æ¨¡å—</strong>ï¼Œæ¨¡å—ç‹¬ç«‹ã€‚</li></ul> <h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="header-anchor">#</a> å¼€å§‹</h3> <ol><li><p>ä¸‹è½½ <code>Pinia</code>ï¼š<em><code>yarn add pinia | npm install pinia</code></em></p></li> <li><p>å¯¼å…¥ <code>Pinia</code> ï¼šä½¿ç”¨ <em><code>createPinia()</code></em> æ–¹æ³•</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>å®šä¹‰ <code>Store</code>ï¼šæ¯ä¸ª Store ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œå³ç‹¬ç«‹çš„ <code>js|ts</code> æ–‡ä»¶</p> <p>ä½¿ç”¨ <em><code>defineStore</code></em> å®šä¹‰ <code>Store</code> æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶<strong>åº”è¯¥å¯¼å‡º <em><code>defineStore</code></em> å‡½æ•°çš„è¿”å›å€¼</strong></p> <p><code>Store</code> çš„å‘½ååº”å‘å‡½æ•°å¼ç»„ä»¶çœ‹é½ï¼Œå³ä½¿ç”¨ <em><code>use</code></em> å¼€å¤´</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Store/useGlobal.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useGlobal <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;Global&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…¶ä»–é…ç½®...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>ç»„ä»¶ä¸­è®¿é—®ï¼š</p> <ul><li><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGlobal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../Store/useGlobal&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> globalData <span class="token operator">=</span> <span class="token function">useGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ol> <h3 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> æ ¸å¿ƒæ¦‚å¿µ</h3> <h4 id="å®šä¹‰-store"><a href="#å®šä¹‰-store" class="header-anchor">#</a> å®šä¹‰ Store</h4> <p>åœ¨æ·±å…¥ç ”ç©¶æ ¸å¿ƒæ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬å¾—çŸ¥é“ Store æ˜¯ç”¨ <code>defineStore()</code> å®šä¹‰çš„ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°è¦æ±‚æ˜¯ä¸€ä¸ª<strong>ç‹¬ä¸€æ— äºŒçš„</strong>åå­—ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ä½ å¯ä»¥å¯¹ `defineStore()` çš„è¿”å›å€¼è¿›è¡Œä»»æ„å‘½åï¼Œä½†æœ€å¥½ä½¿ç”¨ Store çš„åå­—ï¼ŒåŒæ—¶ä»¥ `use` å¼€å¤´ä¸”ä»¥ `Store` ç»“å°¾ã€‚(æ¯”å¦‚ `useUserStore`ï¼Œ`useCartStore`ï¼Œ`useProductStore`)</span>
<span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„åº”ç”¨ä¸­ Store çš„å”¯ä¸€ IDã€‚</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…¶ä»–é…ç½®...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ä¸ª<strong>åå­—</strong> ï¼Œä¹Ÿè¢«ç”¨ä½œ <em>id</em> ï¼Œæ˜¯å¿…é¡»ä¼ å…¥çš„ï¼Œ Pinia å°†ç”¨å®ƒæ¥è¿æ¥ Store å’Œ devtoolsã€‚ä¸ºäº†å…»æˆä¹ æƒ¯æ€§çš„ç”¨æ³•ï¼Œå°†è¿”å›çš„å‡½æ•°å‘½åä¸º <em>use...</em> æ˜¯ä¸€ä¸ªç¬¦åˆç»„åˆå¼å‡½æ•°é£æ ¼çš„çº¦å®šã€‚</p> <p><code>defineStore()</code> çš„ç¬¬äºŒä¸ªå‚æ•°å¯æ¥å—ä¸¤ç±»å€¼ï¼š</p> <ol><li><em>Options</em> å¯¹è±¡</li> <li><em>Setup</em> å‡½æ•°</li></ol> <h5 id="options-store"><a href="#options-store" class="header-anchor">#</a> <em>Options Store</em></h5> <p>ä¸ Vue çš„é€‰é¡¹å¼ API ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¸¦æœ‰ <code>State</code>ã€<code>actions</code> ä¸ <code>getters</code> å±æ€§çš„ Option å¯¹è±¡</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// State é…ç½®çš„è¿”å›å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”å‡½æ•°çš„è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</span>
    <span class="token comment">// Pinia ä¼šç”¨ Reactive åŒ…è£…è¿™ä¸ªå¯¹è±¡</span>
    <span class="token function-variable function">State</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    getters<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">double</span><span class="token operator">:</span> State <span class="token operator">=&gt;</span> State<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯ä»¥è®¤ä¸º <code>State</code> æ˜¯ Store çš„æ•°æ® (<code>data</code>)ï¼Œ<code>getters</code> æ˜¯ Store çš„è®¡ç®—å±æ€§ (<code>computed</code>)ï¼Œè€Œ <code>actions</code> åˆ™æ˜¯æ–¹æ³• (<code>methods</code>)ã€‚</p> <p>ä¸ºæ–¹ä¾¿ä¸Šæ‰‹ä½¿ç”¨ï¼Œ<em>Option Store</em> åº”å°½å¯èƒ½ç›´è§‚ç®€å•ã€‚</p> <h5 id="setup-store"><a href="#setup-store" class="header-anchor">#</a> <em>Setup Store</em></h5> <p>ä¹Ÿå­˜åœ¨å¦ä¸€ç§å®šä¹‰ Store çš„å¯ç”¨è¯­æ³•ã€‚ä¸ Vue ç»„åˆå¼ API çš„ <a href="https://cn.vuejs.org/api/composition-api-setup.html" target="_blank" rel="noopener noreferrer">setup å‡½æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å®šä¹‰äº†ä¸€äº›å“åº”å¼å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”<strong>è¿”å›ä¸€ä¸ªå¸¦æœ‰æˆ‘ä»¬æƒ³æš´éœ²å‡ºå»çš„å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡</strong>ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ <em>Setup Store</em> ä¸­ï¼š</p> <ul><li><code>ref()</code> å°±æ˜¯ <code>State</code> å±æ€§</li> <li><code>computed()</code> å°±æ˜¯ <code>getters</code></li> <li><code>function()</code> å°±æ˜¯ <code>actions</code></li></ul> <p><em>Setup Store</em> æ¯” <em>Options Store</em> å¸¦æ¥äº†æ›´å¤šçš„çµæ´»æ€§</p> <ul><li>å› ä¸ºæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª Store å†…åˆ›å»ºä¾¦å¬å™¨ï¼Œå¹¶è‡ªç”±åœ°ä½¿ç”¨ä»»ä½•<a href="https://cn.vuejs.org/guide/reusability/composables.html#composables" target="_blank" rel="noopener noreferrer">ç»„åˆå¼å‡½æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</li> <li>ä¸è¿‡ï¼Œè¯·è®°ä½ï¼Œä½¿ç”¨ç»„åˆå¼å‡½æ•°ä¼šè®© <a href="https://pinia.vuejs.org/zh/cookbook/composables.html" target="_blank" rel="noopener noreferrer">SSR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å˜å¾—æ›´åŠ å¤æ‚ã€‚</li></ul> <h5 id="ä½¿ç”¨-store"><a href="#ä½¿ç”¨-store" class="header-anchor">#</a> ä½¿ç”¨ <em>Store</em></h5> <p>è™½ç„¶æˆ‘ä»¬å‰é¢å®šä¹‰äº†ä¸€ä¸ª Storeï¼Œä½†åœ¨ <code>setup()</code> è°ƒç”¨ <code>useStore()</code> ä¹‹å‰ï¼ŒStore å®ä¾‹æ˜¯ä¸ä¼šè¢«åˆ›å»ºçš„ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> useCounterStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../Store/useCounterStore&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token function">useCounterStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰<strong>ä»»æ„å¤š</strong>çš„ Storeã€‚</p> <blockquote><p>ä½†ä¸ºäº†è®©ä½¿ç”¨ pinia çš„ç›Šå¤„æœ€å¤§åŒ–(æ¯”å¦‚å…è®¸æ„å»ºå·¥å…·è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ä»¥åŠ TypeScript æ¨æ–­)ï¼Œ<strong>åº”è¯¥åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­å»å®šä¹‰ Store</strong>ã€‚</p></blockquote> <p>ä¸€æ—¦ Store è¢«å®ä¾‹åŒ–ï¼Œä½ å¯ä»¥ç›´æ¥è®¿é—®åœ¨ Store çš„ <code>State</code>ã€<code>getters</code> å’Œ <code>actions</code> ä¸­å®šä¹‰çš„ä»»ä½•å±æ€§ã€‚æˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ç»§ç»­äº†è§£è¿™äº›ç»†èŠ‚ï¼Œç›®å‰è‡ªåŠ¨è¡¥å…¨å°†å¸®åŠ©ä½ ä½¿ç”¨ç›¸å…³å±æ€§ã€‚</p> <p>è¯·æ³¨æ„ï¼ŒStore æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>reactive</code> åŒ…è£…çš„å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦åœ¨å±æ€§åé¢å†™ <code>.value</code>ã€‚</p> <p>å¹¶ä¸”å¯¹ Store ä½¿ç”¨ç»“æ„èµ‹å€¼ä¹Ÿä¸ä¼šè§¦å‘å“åº”å¼ï¼Œä¸ç»“æ„èµ‹å€¼ <code>Props</code> çš„ç»“æœç›¸åŒ</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGlobal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../Store/useGlobal&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> global <span class="token operator">=</span> <span class="token function">useGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> global<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ global }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>global.id = 'hahah'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212131930055.gif" alt="01"></p> <p>ä¸ºäº†èƒ½ä» Store ä¸­<strong>æå–</strong>å±æ€§æ—¶ä¿æŒå…¶å“åº”æ€§ï¼Œéœ€è¦ä½¿ç”¨ <em><code>storeToRefs</code></em> å‡½æ•°ã€‚å®ƒå°†ä¸ºæ¯ä¸€ä¸ªå“åº”å¼å±æ€§åˆ›å»ºå¼•ç”¨ã€‚å½“ä½ åªä½¿ç”¨ Store çš„çŠ¶æ€è€Œä¸è°ƒç”¨ä»»ä½• Action æ—¶ï¼Œå®ƒä¼šéå¸¸æœ‰ç”¨ã€‚è¯·æ³¨æ„ï¼Œä½ å¯ä»¥ç›´æ¥ä» Store ä¸­è§£æ„ Actionï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿè¢«ç»‘å®šåˆ° Store ä¸Šï¼š</p> <ul><li><em><code>storeToRefs()</code></em> å¯ä»¥å°†ä¸€ä¸ª Store ä¸­çš„ State ä¸ Getter å±æ€§çš„å€¼ä½¿ç”¨ <code>Ref</code> åŒ…è£…ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯¹å®ƒçš„è¿”å›å€¼ä½¿ç”¨ç»“æ„èµ‹å€¼çš„åŒæ—¶ä¸å½±å“åˆ°å…¶å“åº”å¼äº†ã€‚</li> <li><em><code>storeToRefs()</code></em> ä¸­<strong>ä¸èƒ½è·å–</strong>åˆ° Action ï¼Œæå– Action åªèƒ½åœ¨åŸæœ¬çš„ Store ä¸Šç»“æ„ã€‚</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGlobal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../Store/useGlobal&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> global <span class="token operator">=</span> <span class="token function">useGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ global }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>global.id = 'hahah'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹ID<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://gitee.com/superbigrice/upload-image-for_-typora/raw/master/Images/202212131941273.gif" alt="demo$yyyy-MM-dd_HH-mm-ss$"></p> <h3 id="state-getter-action"><a href="#state-getter-action" class="header-anchor">#</a> State / Getter / Action</h3> <p>ä»¥ä¸Šä¸‰ä¸ªæ²¡æœ‰å¤ªéš¾çš„ä¸œè¥¿ï¼ŒæŠŠ State çœ‹ä½œ Dataï¼ŒGetter çœ‹ä½œ Computedï¼ŒAction çœ‹ä½œ Methods å°±å¯ä»¥äº†</p> <hr> <h2 id="props-ts-ç±»å‹æ¨å¯¼"><a href="#props-ts-ç±»å‹æ¨å¯¼" class="header-anchor">#</a> Props - TS ç±»å‹æ¨å¯¼</h2> <p>åœ¨ vue2 ä¸­ä½¿ç”¨ <code>options</code> ä»£ç é£æ ¼å®šä¹‰ <code>props</code> çš„ç±»å‹æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè¿™ä¹ˆå®šä¹‰ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ vue3 ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·å®šä¹‰ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bar</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    props<span class="token punctuation">.</span>foo<span class="token punctuation">;</span> <span class="token comment">// string</span>
    props<span class="token punctuation">.</span>bar<span class="token punctuation">;</span> <span class="token comment">// number | undefined</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½†æœ€æ–¹ä¾¿çš„å…¶å®æ˜¯æ˜¯åŒ <code>TS</code> è¯­æ³•æ¥æŒ‡å®šç±»å‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
        bar<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½†æ˜¯æˆ‘ä»¬å¤±å»äº†å®šä¹‰é»˜è®¤å€¼çš„åŠŸèƒ½ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª API æ¥å®ç°ï¼š<code>withDefaults</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
    msg<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    labels<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    msg<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">labels</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="components-ts-ç±»å‹æ¨å¯¼"><a href="#components-ts-ç±»å‹æ¨å¯¼" class="header-anchor">#</a> Components - TS ç±»å‹æ¨å¯¼</h2> <blockquote><p>æ€»ç»“ï¼š <code>ref&lt;InstanceType&lt;typeof XXX&gt;()</code></p></blockquote> <p>æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦ä¸ºä¸€ä¸ªå­ç»„ä»¶æ·»åŠ ä¸€ä¸ª Ref æ¨¡æ¿å¼•ç”¨ï¼Œä»¥ä¾¿è°ƒç”¨å®ƒå…¬å¼€çš„æ–¹æ³•ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>MyModal</code> å­ç»„ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸ªæ‰“å¼€æ¨¡æ€æ¡†çš„æ–¹æ³•ï¼š</p> <ul><li>é»˜è®¤æ˜¯ä¸ä¼šæœ‰ TS çš„ç±»å‹æ¨å¯¼çš„</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- MyModal.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">openDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰“å¼€å¼¹çª—çš„é€»è¾‘...</span>
<span class="token punctuation">}</span>

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    openDialog<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyModal <span class="token keyword">from</span> <span class="token string">&quot;../MyModal.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> modal <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é»˜è®¤æ˜¯æ²¡æœ‰è‡ªåŠ¨æç¤º/è¡¥å…¨çš„</span>
    modal<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">openDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyModal</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸ºäº†è·å– <code>MyModal</code> çš„ç±»å‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€šè¿‡ <code>typeof</code> å¾—åˆ°å…¶ç±»å‹ï¼Œå†ä½¿ç”¨ TypeScript å†…ç½®çš„ <code>InstanceType</code> å·¥å…·ç±»å‹æ¥è·å–å…¶å®ä¾‹ç±»å‹ï¼š</p> <ul><li>ä»£ç å°±è¦æ”¹æˆè¿™æ ·</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyModal <span class="token keyword">from</span> <span class="token string">&quot;../MyModal.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> modal <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> MyModal<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ”¯æŒè‡ªåŠ¨æç¤º/è¡¥å…¨</span>
    modal<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">openDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyModal</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#attribute-å±æ€§é€ä¼ " title="Attribute å±æ€§é€ä¼ ">Attribute å±æ€§é€ä¼ </a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æ€»ç»“" title="æ€»ç»“">æ€»ç»“</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å¤šæ ¹èŠ‚ç‚¹çš„-attributes-ç»§æ‰¿" title="å¤šæ ¹èŠ‚ç‚¹çš„ Attributes ç»§æ‰¿">å¤šæ ¹èŠ‚ç‚¹çš„ Attributes ç»§æ‰¿</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç¦ç”¨è‡ªåŠ¨-attributes-ç»§æ‰¿" title="ç¦ç”¨è‡ªåŠ¨ Attributes ç»§æ‰¿">ç¦ç”¨è‡ªåŠ¨ Attributes ç»§æ‰¿</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#provide-inject-ä¾èµ–æ³¨å…¥" title="Provide / Injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰">Provide / Injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#prop-é€çº§é€ä¼ é—®é¢˜" title="Prop é€çº§é€ä¼ é—®é¢˜">Prop é€çº§é€ä¼ é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#provide-æä¾›æ•°æ®" title="Provideï¼ˆæä¾›æ•°æ®ï¼‰">Provideï¼ˆæä¾›æ•°æ®ï¼‰</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#inject-æ³¨å…¥æ•°æ®" title="Injectï¼ˆæ³¨å…¥æ•°æ®ï¼‰">Injectï¼ˆæ³¨å…¥æ•°æ®ï¼‰</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨" title="å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨">å’Œå“åº”å¼æ•°æ®æ­é…ä½¿ç”¨</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä½¿ç”¨-symbol-ä½œæ³¨å…¥å" title="ä½¿ç”¨ Symbol ä½œæ³¨å…¥å">ä½¿ç”¨ Symbol ä½œæ³¨å…¥å</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å¼‚æ­¥ç»„ä»¶" title="å¼‚æ­¥ç»„ä»¶">å¼‚æ­¥ç»„ä»¶</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#defineasynccomponent-æ–¹æ³•" title="defineAsyncComponent æ–¹æ³•">defineAsyncComponent æ–¹æ³•</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å®ä¾‹" title="å®ä¾‹">å®ä¾‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨" title="å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨">å¼‚æ­¥ç»„ä»¶çš„ä½œç”¨</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#teleport" title="Teleport">Teleport</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#suspense" title="Suspense">Suspense</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#hooks-ç»„åˆå¼å‡½æ•°" title="Hooks ç»„åˆå¼å‡½æ•°">Hooks ç»„åˆå¼å‡½æ•°</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#hook-è§„èŒƒ" title="hook è§„èŒƒ">hook è§„èŒƒ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹" title="é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹">é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹" title="å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹">å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#pinia" title="Pinia">Pinia</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä¸-vuex-çš„ä¸åŒä¹‹å¤„" title="ä¸ Vuex çš„ä¸åŒä¹‹å¤„ï¼š">ä¸ Vuex çš„ä¸åŒä¹‹å¤„ï¼š</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å¼€å§‹" title="å¼€å§‹">å¼€å§‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æ ¸å¿ƒæ¦‚å¿µ" title="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#state-getter-action" title="State / Getter / Action">State / Getter / Action</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#props-ts-ç±»å‹æ¨å¯¼" title="Props - TS ç±»å‹æ¨å¯¼">Props - TS ç±»å‹æ¨å¯¼</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#components-ts-ç±»å‹æ¨å¯¼" title="Components - TS ç±»å‹æ¨å¯¼">Components - TS ç±»å‹æ¨å¯¼</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>è¯¥ç½‘ç«™ä½¿ç”¨ vuepress + @vuepress/theme-blog æ­å»º â€”â€” by: Big Rice Â© 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/bigRiceRice.io/dist/assets/js/app.cafe85c2.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/77.364f996d.js" defer></script>
  </body>
</html>
