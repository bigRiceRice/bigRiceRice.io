<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ã€Vue3ã€‘åšå‡ºäº†å“ªäº›æ”¹å˜ï¼Ÿ | Big Rice ğŸš</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="æœ¬æ–‡ä¸º Vue3 çš„å…¥é—¨æ€»ç»“">
    
    <link rel="preload" href="/bigRiceRice.io/dist/assets/css/0.styles.c200281f.css" as="style"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/app.0c07d28e.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/3.606773b1.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/84.dea54f2b.js" as="script"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/10.5590a827.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/11.168de83c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/12.568a4166.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/13.0931f5c0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/14.d53a8be2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/15.73051ff3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/16.72b8966a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/17.313e1789.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/18.6c2905ca.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/19.8eb937dd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/20.4abd9217.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/21.770da3d7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/22.99f75c54.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/23.7a860a2e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/24.86180551.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/25.21b03854.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/26.a817fdfe.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/27.4059e335.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/28.91db7974.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/29.e8e1123e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/30.53e58f2b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/31.73b312ac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/32.50e11b83.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/33.1e9cab45.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/34.7a8c94b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/35.e69c119d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/36.dee06fd5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/37.93f48cd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/38.b36a7ca2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/4.9a75fb9f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/40.9348ddae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/41.ac71460e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/42.6ca10554.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/43.39f49b21.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/44.b69b697f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/45.6368e269.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/46.2c134927.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/47.b0da3cfb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/48.1f951dfb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/49.4d7bf943.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/5.44ec780a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/50.ad5e5ae9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/51.60f76d0f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/52.9ec1bd2e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/53.4252bf31.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/54.1272cce0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/55.5046e0eb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/56.938a3529.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/57.8100162f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/58.1704f54a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/59.a9e3d13a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/60.dd86caec.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/61.1b7c6527.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/62.79bd5628.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/63.c1e64965.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/64.1c880a7e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/65.d83ee281.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/66.6dd17a78.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/67.6863635c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/68.471581d3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/69.87a1fc99.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/70.d6112df9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/71.8c504b0b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/72.585d3454.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/73.ce15c6c6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/74.09ac90c6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/75.72330813.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/76.3f46709a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/77.7b5bcb83.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/78.98103b7a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/79.96b8ad67.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/8.222ede8f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/80.69352813.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/81.c71a9c8a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/82.f9e415e6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/83.e30150fb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/85.3a64c6e8.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/86.f57a165d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/87.b310a5a2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/88.8a006c1a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/89.005ab224.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/9.d2750760.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/90.3fe3492e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/91.2a066c09.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/92.cb4edbcf.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/93.bb917c3d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/94.a25e0bb0.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/95.8417c783.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/96.dabb753e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/97.126c265d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/bigRiceRice.io/dist/assets/css/0.styles.c200281f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/bigRiceRice.io/dist/" class="nav-link home-link">Big Rice ğŸš </a> <button class="back" style="display:;">â†©</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/bigRiceRice.io/dist/" class="nav-link mobile-home-link">Big Rice ğŸš </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        ã€Vue3ã€‘åšå‡ºäº†å“ªäº›æ”¹å˜ï¼Ÿ
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address"> Â  in äº‘æ¢¦æ³½</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-12-20T00:00:00.000Z">
      2021-12-20
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/Vue3" data-v-42ccfcd5><span data-v-42ccfcd5>Vue3</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="é€‰æ‹©-api-é£æ ¼"><a href="#é€‰æ‹©-api-é£æ ¼" class="header-anchor">#</a> é€‰æ‹© API é£æ ¼</h2> <p>åœ¨ Vue3 ï¼Œå¯ä»¥æŒ‰ä¸¤ç§ä¸åŒçš„é£æ ¼ä¹¦å†™ä»£ç ï¼š<strong>é€‰é¡¹å¼ API</strong> å’Œ<strong>ç»„åˆå¼ API</strong>ã€‚</p> <h3 id="é€‰é¡¹å¼-api-options-api"><a href="#é€‰é¡¹å¼-api-options-api" class="header-anchor">#</a> é€‰é¡¹å¼ APIï¼ˆOptions APIï¼‰</h3> <p><code>Options API</code> å¤§è‡´å†™æ³•äº Vue2 æ²¡æœ‰ä»€ä¹ˆå·®å¼‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token comment">// data() è¿”å›çš„å±æ€§å°†ä¼šæˆä¸ºå“åº”å¼çš„çŠ¶æ€</span>
        <span class="token comment">// å¹¶ä¸”æš´éœ²åœ¨ `this` ä¸Š</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// methods æ˜¯ä¸€äº›ç”¨æ¥æ›´æ”¹çŠ¶æ€ä¸è§¦å‘æ›´æ–°çš„å‡½æ•°</span>
        <span class="token comment">// å®ƒä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½œä¸ºäº‹ä»¶ç›‘å¬å™¨ç»‘å®š</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// ç”Ÿå‘½å‘¨æœŸé’©å­ä¼šåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªä¸åŒé˜¶æ®µè¢«è°ƒç”¨</span>
        <span class="token comment">// ä¾‹å¦‚è¿™ä¸ªå‡½æ•°å°±ä¼šåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåè¢«è°ƒç”¨</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The initial count is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ç»„åˆå¼-api-composition-api"><a href="#ç»„åˆå¼-api-composition-api" class="header-anchor">#</a> ç»„åˆå¼ APIï¼ˆComposition APIï¼‰</h3> <p>é€šè¿‡ Composition APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¼å…¥çš„ API å‡½æ•°æ¥æè¿°ç»„ä»¶é€»è¾‘ã€‚åœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œç»„åˆå¼ API é€šå¸¸ä¼šä¸ <code>&lt;script setup&gt;</code> è¯­æ³•ç³–æ­é…ä½¿ç”¨ã€‚è¿™ä¸ª <code>setup</code> å±æ€§æ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œå‘Šè¯‰ Vue éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›å¤„ç†ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´ç®€æ´åœ°ä½¿ç”¨ç»„åˆå¼ APIã€‚æ¯”å¦‚ï¼Œ<code>&lt;script setup&gt;</code> ä¸­çš„å¯¼å…¥å’Œé¡¶å±‚å˜é‡/å‡½æ•°éƒ½èƒ½å¤Ÿåœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ã€‚</p> <p>ä¸‹é¢æ˜¯ä½¿ç”¨äº†ç»„åˆå¼ API ä¸ <code>&lt;script setup&gt;</code> æ”¹é€ åå’Œä¸Šé¢çš„æ¨¡æ¿å®Œå…¨ä¸€æ ·çš„ç»„ä»¶ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// å“åº”å¼çŠ¶æ€</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ç”¨æ¥ä¿®æ”¹çŠ¶æ€ã€è§¦å‘æ›´æ–°çš„å‡½æ•°</span>
    <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The initial count is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ğŸ³-æ€»ç»“"><a href="#ğŸ³-æ€»ç»“" class="header-anchor">#</a> ğŸ³ æ€»ç»“</h3> <ul><li><p>composition API æ˜¯åœ¨ options API çš„åŸºç¡€ä¸Šå®ç°çš„</p></li> <li><p>options API ä»¥â€œç»„ä»¶å®ä¾‹â€çš„æ¦‚å¿µä¸ºä¸­å¿ƒï¼Œå³ <code>this</code></p></li> <li><p>composition API çš„æ ¸å¿ƒæ€æƒ³æ˜¯ç›´æ¥åœ¨å‡½æ•°ä½œç”¨åŸŸå†…å®šä¹‰å“åº”å¼çŠ¶æ€å˜é‡ï¼Œå¹¶å°†ä»å¤šä¸ªå‡½æ•°ä¸­å¾—åˆ°çš„çŠ¶æ€ç»„åˆèµ·æ¥å¤„ç†å¤æ‚é—®é¢˜ã€‚</p></li> <li><h5 id="æ¨èä½¿ç”¨-composition-api"><a href="#æ¨èä½¿ç”¨-composition-api" class="header-anchor">#</a> æ¨èä½¿ç”¨ <code>composition API</code></h5></li></ul> <h2 id="vue3-çš„å“åº”å¼åŸºç¡€"><a href="#vue3-çš„å“åº”å¼åŸºç¡€" class="header-anchor">#</a> Vue3 çš„å“åº”å¼åŸºç¡€</h2> <p>åœ¨ Vue3 ä¸­ ï¼Œå“åº”å¼å¯¹è±¡æ˜¯åŸºäº <code>Proxy</code> ï¼ˆES 6 ä»£ç†å¯¹è±¡ï¼‰å®ç°çš„ã€‚</p> <p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ <code>ref</code> ä¸ <code>reactive</code> æ¥å£°æ˜å“åº”å¼å˜é‡</p> <h3 id="reactive"><a href="#reactive" class="header-anchor">#</a> reactive</h3> <p>å¯ç”¨äºåˆ›å»ºä¸€ä¸ªå“åº”å¼<strong>å¯¹è±¡æˆ–æ•°ç»„</strong>ï¼Œå®ƒæœ‰ä¸¤æ¡é™åˆ¶ï¼š</p> <ol><li><p>ä»…å¯¹å¯¹è±¡ç±»å‹æœ‰æ•ˆï¼Œï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œ <code>Map</code>ã€<code>Set</code> è¿™æ ·çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects#%E4%BD%BF%E7%94%A8%E9%94%AE%E7%9A%84%E9%9B%86%E5%90%88%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">é›†åˆç±»å‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œè€Œå¯¹ <code>string</code>ã€<code>number</code> å’Œ <code>boolean</code> è¿™æ ·çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive" target="_blank" rel="noopener noreferrer">åŸå§‹ç±»å‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ— æ•ˆã€‚</p></li> <li><p>ä¸å¯éšæ„<strong>æ›¿æ¢</strong>ç”± <code>reactive</code> å®šä¹‰çš„å“åº”å¼å˜é‡ï¼Œå› ä¸ºè¿™å°†å¯¼è‡´å¯¹åˆå§‹å¼•ç”¨çš„å“åº”æ€§è¿æ¥ä¸¢å¤±ï¼š</p> <blockquote><p>å› ä¸º Vue çš„å“åº”å¼ç³»ç»Ÿæ˜¯é€šè¿‡å±æ€§è®¿é—®è¿›è¡Œè¿½è¸ªçš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å§‹ç»ˆä¿æŒå¯¹è¯¥å“åº”å¼å¯¹è±¡çš„ç›¸åŒå¼•ç”¨</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¸Šé¢çš„å¼•ç”¨ ({ count: 0 }) å°†ä¸å†è¢«è¿½è¸ªï¼ˆå“åº”æ€§è¿æ¥å·²ä¸¢å¤±ï¼ï¼‰</span>
state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åŒæ—¶è¿™ä¹Ÿæ„å‘³ç€å½“æˆ‘ä»¬å°†å“åº”å¼å¯¹è±¡çš„å±æ€§èµ‹å€¼æˆ–è§£æ„è‡³æœ¬åœ°å˜é‡æ—¶ï¼Œæˆ–æ˜¯å°†è¯¥å±æ€§ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼šå¤±å»å“åº”æ€§ï¼š</span>

<span class="token comment">// n æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ŒåŒ state.count</span>
<span class="token comment">// å¤±å»å“åº”æ€§è¿æ¥</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> state<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
<span class="token comment">// ä¸å½±å“åŸå§‹çš„ state</span>
n<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token comment">// count ä¹Ÿå’Œ state.count å¤±å»äº†å“åº”æ€§è¿æ¥</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="token comment">// ä¸ä¼šå½±å“åŸå§‹çš„ state</span>
count<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token comment">// è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ™®é€šæ•°å­—ï¼Œå¹¶ä¸”</span>
<span class="token comment">// å°†æ— æ³•è·Ÿè¸ª state.count çš„å˜åŒ–</span>
<span class="token function">callSomeFunction</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h3> <p>å¯ç”¨äºåˆ›å»ºä»»ä½•å€¼ç±»å‹çš„å“åº”å¼å˜é‡</p> <ul><li><p><code>reactive()</code> çš„ç§ç§é™åˆ¶å½’æ ¹ç»“åº•æ˜¯å› ä¸º JavaScript æ²¡æœ‰å¯ä»¥ä½œç”¨äºæ‰€æœ‰å€¼ç±»å‹çš„ â€œå¼•ç”¨â€ æœºåˆ¶ã€‚ä¸ºæ­¤ï¼ŒVue æä¾›äº†ä¸€ä¸ª <a href="https://cn.vuejs.org/api/reactivity-core.html#ref" target="_blank" rel="noopener noreferrer"><code>ref()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ–¹æ³•æ¥å…è®¸æˆ‘ä»¬åˆ›å»ºå¯ä»¥ä½¿ç”¨ä»»ä½•å€¼ç±»å‹çš„å“åº”å¼ <strong>ref</strong>ï¼š</p></li> <li><p><code>ref()</code> å°†ä¼ å…¥å‚æ•°çš„å€¼åŒ…è£…ä¸ºä¸€ä¸ªå¸¦ <code>.value</code> å±æ€§çš„ ref å¯¹è±¡ï¼š</p> <ul><li><p>è¿™æ„å‘³ç€è®¿é—®/ä¿®æ”¹ <code>ref</code> å˜é‡çš„å€¼éœ€è¦é€šè¿‡ <code>xxx.value.xxx</code> æ¥ä¿®æ”¹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> objectRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿™æ˜¯å“åº”å¼çš„æ›¿æ¢</span>
objectRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ref è¢«ä¼ é€’ç»™å‡½æ•°æˆ–æ˜¯ä»ä¸€èˆ¬å¯¹è±¡ä¸Šè¢«è§£æ„æ—¶ï¼Œä¸ä¼šä¸¢å¤±å“åº”æ€§ï¼š</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ª ref</span>
<span class="token comment">// éœ€è¦é€šè¿‡ .value å–å€¼</span>
<span class="token comment">// ä½†å®ƒä¼šä¿æŒå“åº”æ€§</span>
<span class="token function">callSomeFunction</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä»ç„¶æ˜¯å“åº”å¼çš„</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul> <h3 id="ref-å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…"><a href="#ref-å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…" class="header-anchor">#</a> ref å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…</h3> <p>å½“ ref åœ¨æ¨¡æ¿ä¸­ä½œä¸ºé¡¶å±‚å±æ€§è¢«è®¿é—®æ—¶ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨â€œè§£åŒ…â€ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ <code>.value</code>ã€‚ä¸‹é¢æ˜¯ä¹‹å‰çš„è®¡æ•°å™¨ä¾‹å­ï¼Œç”¨ <code>ref()</code> ä»£æ›¿ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    {{ count }}
    <span class="token comment">&lt;!-- æ— éœ€ .value --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>è¯·æ³¨æ„</strong>ï¼Œä»…å½“ <code>ref</code> å˜é‡æ˜¯ <code>&lt;script setup&gt;</code> ä¸­å®šä¹‰çš„é¡¶çº§å±æ€§æ—¶æ‰é€‚ç”¨è‡ªåŠ¨â€œè§£åŒ…â€ã€‚</p> <ul><li><p>ä¾‹å¦‚ï¼Œ foo æ˜¯é¡¶å±‚å±æ€§ï¼Œä½† object.foo ä¸æ˜¯ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> object<span class="token punctuation">;</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        object<span class="token punctuation">.</span>foo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token comment">// è¡¨è¾¾å¼å°†ä¸ä¼šå·¥ä½œï¼Œå°†ä¼šæ¸²æŸ“å‡º [object Object] + 1 è¿›è€ŒæŠ¥é”™</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        foo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token comment">// è¡¨è¾¾å¼æ­£å¸¸å·¥ä½œï¼Œè¾“å…¥ 2</span>
</code></pre></div></li> <li><p>å¦‚æœ <code>{{}}</code> ä¸­å†™å…¥çš„è¡¨è¾¾å¼ä¸éœ€è¦ä½¿ç”¨åˆ° <code>JS</code> è®¡ç®—ï¼Œé‚£ä¹ˆä¹Ÿä¼šè‡ªåŠ¨è§£åŒ…ï¼Œè¿™åªæ˜¯æ–‡æœ¬æ’å€¼çš„ä¸€ä¸ªæ–¹ä¾¿åŠŸèƒ½ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        object<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token comment">// 2</span>
</code></pre></div></li></ul> <h2 id="å…ƒç´ -ref-ä¸-defineexpose"><a href="#å…ƒç´ -ref-ä¸-defineexpose" class="header-anchor">#</a> å…ƒç´  Ref ä¸ defineExpose</h2> <p><code>ref</code> å¯ä»¥ç”¨æ¥åˆ›å»ºä¸€ä¸ªå“åº”å¼å˜é‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥è·å– DOM å…ƒç´ æˆ–å­ç»„ä»¶</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// å£°æ˜ä¸€ä¸ª ref æ¥å­˜æ”¾è¯¥å…ƒç´ çš„å¼•ç”¨</span>
    <span class="token comment">// å¿…é¡»å’Œæ¨¡æ¿é‡Œçš„ ref åŒå</span>
    <span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        input<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ç»„ä»¶ä¸Šçš„-ref"><a href="#ç»„ä»¶ä¸Šçš„-ref" class="header-anchor">#</a> ç»„ä»¶ä¸Šçš„ ref</h3> <p><code>ref</code> å¼•ç”¨ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ä¸€ä¸ªå­ç»„ä»¶ä¸Šã€‚è¿™ç§æƒ…å†µä¸‹å¼•ç”¨ä¸­è·å¾—çš„å€¼æ˜¯ç»„ä»¶å®ä¾‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">&quot;./Child.vue&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// child.value æ˜¯ &lt;Child /&gt; ç»„ä»¶çš„å®ä¾‹</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼š</p></blockquote> <ul><li><p>è‹¥å­ç»„ä»¶çš„ä»£ç é£æ ¼ä¸º options API ä¸”æ²¡æœ‰ä½¿ç”¨ <code>setup()</code> é’©å­å‡½æ•°ï¼Œ<code>ref</code> å¼•ç”¨çš„å€¼æ‰æ˜¯å®Œæ•´çš„ç»„ä»¶å®ä¾‹ã€‚</p></li> <li><p>ä½¿ç”¨äº† <code>&lt;script setup&gt;</code> çš„ç»„ä»¶æ˜¯<strong>é»˜è®¤ç§æœ‰</strong>çš„ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶æ— æ³•è®¿é—®åˆ°ä¸€ä¸ªä½¿ç”¨äº† <code>&lt;script setup&gt;</code> çš„å­ç»„ä»¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œé™¤éå­ç»„ä»¶åœ¨å…¶ä¸­é€šè¿‡ <code>defineExpose</code> å®æ˜¾å¼æš´éœ²ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        a<span class="token punctuation">,</span>
        b<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>å½“çˆ¶ç»„ä»¶é€šè¿‡æ¨¡æ¿å¼•ç”¨è·å–åˆ°äº†è¯¥ç»„ä»¶çš„å®ä¾‹æ—¶ï¼Œå¾—åˆ°çš„å®ä¾‹ç±»å‹ä¸º <code>{ a: 1, b: 2}</code> (ref éƒ½ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œå’Œä¸€èˆ¬çš„å®ä¾‹ä¸€æ ·)ã€‚</li></ul></li></ul> <h2 id="ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–"><a href="#ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–</h2> <table><thead><tr><th style="text-align:center;">Vue2</th> <th style="text-align:center;"></th> <th style="text-align:center;">Vue3</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>beforeCreate</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>setup</code></td></tr> <tr><td style="text-align:center;"><code>created</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>setup</code></td></tr> <tr><td style="text-align:center;"><code>beforeMount</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onBeforeMount</code></td></tr> <tr><td style="text-align:center;"><code>Mounted</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onMounted</code></td></tr> <tr><td style="text-align:center;"><code>beforeUpdate</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onBeforeUpdate</code></td></tr> <tr><td style="text-align:center;"><code>updated</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onUpdated</code></td></tr> <tr><td style="text-align:center;"><code>beforeDestroy</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onBeforeUnmount</code></td></tr> <tr><td style="text-align:center;"><code>destroyed</code></td> <td style="text-align:center;">--&gt;</td> <td style="text-align:center;"><code>onUnmounted</code></td></tr></tbody></table> <h2 id="transition-ç±»åå˜åŒ–"><a href="#transition-ç±»åå˜åŒ–" class="header-anchor">#</a> Transition ç±»åå˜åŒ–</h2> <p>vue3 çš„ <code>Transition</code> ç±»åä¹Ÿæœ‰ä¸€ç‚¹å˜åŒ–</p> <table><thead><tr><th style="text-align:center;">Vue2</th> <th style="text-align:center;"></th> <th>Vue3</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>v-enter</code></td> <td style="text-align:center;">--&gt;</td> <td><code>v-enter-from</code></td></tr> <tr><td style="text-align:center;"><code>v-leave</code></td> <td style="text-align:center;">--&gt;</td> <td><code>v-leave-from</code></td></tr></tbody></table> <h2 id="å…³äº-watch-watcheffect"><a href="#å…³äº-watch-watcheffect" class="header-anchor">#</a> å…³äº Watch | watchEffect</h2> <p>Vue3 çš„ä¾¦å¬å™¨ç›¸è¾ƒäº Vue2 æ˜¯æœ‰å¾ˆå¤§çš„å˜åŒ–çš„ï¼Œæœ‰å‡ ç§ç”¨æ³•ã€‚</p> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h3> <ul><li><p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<strong>æ•°æ®æº</strong>ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ª <code>ref</code>ã€<code>reactive</code>ã€Getter å‡½æ•°æˆ–å¤šä¸ªæ•°æ®æºç»„æˆçš„æ•°ç»„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å•ä¸ª ref</span>
<span class="token function">watch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token parameter">newX</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// getter å‡½æ•°,å‡½æ•°ä¸­çš„ä»»ä½•å€¼å‘ç”Ÿæ”¹å˜éƒ½ä¼šè§¦å‘</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>value <span class="token operator">+</span> y<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token parameter">sum</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">sum of x + y is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sum<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¤šä¸ªæ¥æºç»„æˆçš„æ•°ç»„</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> y<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>newX<span class="token punctuation">,</span> newY<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">x is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and y is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newY<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ç¬¬äºŒä¸ªå‚æ•°ï¼š<strong>å›è°ƒå‡½æ•°</strong></p> <ul><li>å›è°ƒå‡½æ•°çš„å‚æ•°ï¼š
<ul><li>è‹¥ä¸ºå•ä¸ªç›‘å¬æºï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸º <code>callback(newValue,oldValye)</code></li> <li>è‹¥ä¸ºå¤šä¸ªç›‘å¬æºï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸º <code>cakkback(newArray,oldArray)</code> <ul><li><code>const [newValue,oldValue] = newArray</code> ï¼Œ oldArray åŒç†</li></ul></li></ul></li></ul></li> <li><p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š<strong>é…ç½®é¡¹</strong>ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦ä¸ºæ·±åº¦ç›‘å¬ã€æ˜¯å¦ç«‹å³æ‰§è¡Œç­‰</p></li></ul> <blockquote><p>æ³¨æ„ï¼š</p></blockquote> <ol><li><p>ä¸èƒ½<strong>ç›´æ¥ä¾¦å¬å“åº”å¼å¯¹è±¡çš„å±æ€§å€¼</strong>ï¼Œä¾‹å¦‚:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// é”™è¯¯ï¼Œå› ä¸º watch() å¾—åˆ°çš„å‚æ•°æ˜¯ä¸€ä¸ª number è€Œä¸æ˜¯ä¸€ä¸ªå“åº”å¼ä»£ç†</span>
<span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token parameter">count</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>éœ€è¦å°†å…¶å®šä¹‰ä¸º <code>getter</code> å‡½æ•°çš„å½¢å¼</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
    <span class="token parameter">count</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>ç›´æ¥ç»™ <code>watch()</code> ä¼ å…¥ä¸€ä¸ª <code>reactive</code> å“åº”å¼å¯¹è±¡ï¼Œä¼šéšå¼åœ°åˆ›å»ºä¸€ä¸ªæ·±å±‚ä¾¦å¬å™¨â€”â€”è¯¥å›è°ƒå‡½æ•°åœ¨æ‰€æœ‰åµŒå¥—çš„å˜æ›´æ—¶éƒ½ä¼šè¢«è§¦å‘ï¼š</p></li></ol> <h3 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> watchEffect</h3> <p><code>watch()</code> æ˜¯æ‡’æ‰§è¡Œçš„ï¼š<strong>ä»…å½“æ•°æ®æºå˜åŒ–æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå›è°ƒ</strong>ã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨åˆ›å»ºä¾¦å¬å™¨æ—¶ï¼Œç«‹å³æ‰§è¡Œä¸€éå›è°ƒã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è¯·æ±‚ä¸€äº›åˆå§‹æ•°æ®ï¼Œç„¶ååœ¨ç›¸å…³çŠ¶æ€æ›´æ”¹æ—¶é‡æ–°è¯·æ±‚æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;https://æ¥å£åœ°å€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç«‹å³è·å–</span>
<span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...å†ä¾¦å¬ url å˜åŒ–</span>
<span class="token function">watch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> fetchData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½†æˆ‘ä»¬å¯ä»¥ç”¨ <code>watchEffect</code> å‡½æ•°æ¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ã€‚</p> <ul><li><p><code>watchEffect()</code> ä¼š<strong>ç«‹å³æ‰§è¡Œä¸€é</strong>å›è°ƒå‡½æ•°</p></li> <li><p>å¦‚æœè¿™æ—¶å‡½æ•°äº§ç”Ÿäº†å‰¯ä½œç”¨ï¼ŒVue ä¼š<strong>è‡ªåŠ¨è¿½è¸ªå‰¯ä½œç”¨çš„ä¾èµ–å…³ç³»ï¼Œè‡ªåŠ¨åˆ†æå‡ºå“åº”æº</strong>ã€‚</p></li></ul> <p>ä¸Šé¢çš„ä¾‹å­å¯ä»¥é‡å†™ä¸ºï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå›è°ƒä¼šç«‹å³æ‰§è¡Œã€‚åœ¨æ‰§è¡ŒæœŸé—´ï¼Œå®ƒä¼šè‡ªåŠ¨è¿½è¸ª <code>url.value</code> ä½œä¸ºä¾èµ–ï¼ˆå’Œè®¡ç®—å±æ€§çš„è¡Œä¸ºç±»ä¼¼ï¼‰ã€‚</p> <p>æ¯å½“ <code>url.value</code> å˜åŒ–æ—¶ï¼Œå›è°ƒä¼šå†æ¬¡æ‰§è¡Œã€‚</p> <h3 id="watch-vs-watcheffect"><a href="#watch-vs-watcheffect" class="header-anchor">#</a> watch VS watchEffect</h3> <p><code>watch</code> å’Œ <code>watchEffect</code> éƒ½èƒ½å“åº”å¼åœ°æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„å›è°ƒã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯è¿½è¸ªå“åº”å¼ä¾èµ–çš„æ–¹å¼</p> <ul><li><p><code>watch</code> åªè¿½è¸ªæ˜ç¡®ä¾¦å¬çš„æ•°æ®æºã€‚å®ƒä¸ä¼šè¿½è¸ªä»»ä½•åœ¨å›è°ƒä¸­è®¿é—®åˆ°çš„ä¸œè¥¿ã€‚å¦å¤–ï¼Œä»…åœ¨æ•°æ®æºç¡®å®æ”¹å˜æ—¶æ‰ä¼šè§¦å‘å›è°ƒã€‚<code>watch</code> ä¼šé¿å…åœ¨å‘ç”Ÿå‰¯ä½œç”¨æ—¶è¿½è¸ªä¾èµ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬èƒ½æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å›è°ƒå‡½æ•°çš„è§¦å‘æ—¶æœºã€‚</p></li> <li><p><code>watchEffect</code>ï¼Œåˆ™ä¼šåœ¨å‰¯ä½œç”¨å‘ç”ŸæœŸé—´è¿½è¸ªä¾èµ–ã€‚å®ƒä¼šåœ¨åŒæ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨è¿½è¸ªæ‰€æœ‰èƒ½è®¿é—®åˆ°çš„å“åº”å¼å±æ€§ã€‚è¿™æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä»£ç å¾€å¾€æ›´ç®€æ´ï¼Œä½†æœ‰æ—¶å…¶å“åº”æ€§ä¾èµ–å…³ç³»ä¼šä¸é‚£ä¹ˆæ˜ç¡®ã€‚</p></li> <li><h5 id="watcheffect-æ›´åƒ-watch-çš„å‡çº§è‡ªåŠ¨ç‰ˆ"><a href="#watcheffect-æ›´åƒ-watch-çš„å‡çº§è‡ªåŠ¨ç‰ˆ" class="header-anchor">#</a> watchEffect æ›´åƒ watch çš„å‡çº§è‡ªåŠ¨ç‰ˆ</h5></li></ul> <h3 id="ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº"><a href="#ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº" class="header-anchor">#</a> ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº</h3> <p>å½“ä½ æ›´æ”¹äº†å“åº”å¼çŠ¶æ€ï¼Œå®ƒå¯èƒ½ä¼šåŒæ—¶è§¦å‘ Vue ç»„ä»¶æ›´æ–°å’Œä¾¦å¬å™¨å›è°ƒã€‚</p> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºçš„ä¾¦å¬å™¨å›è°ƒï¼Œéƒ½ä¼šåœ¨ Vue ç»„ä»¶æ›´æ–°<strong>ä¹‹å‰</strong>è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ä½ åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®çš„ DOM å°†æ˜¯è¢« Vue æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ã€‚</p> <p>å¦‚æœæƒ³åœ¨ä¾¦å¬å™¨å›è°ƒä¸­èƒ½è®¿é—®è¢« Vue æ›´æ–°<strong>ä¹‹å</strong>çš„ DOMï¼Œéœ€è¦æŒ‡æ˜ <code>flush: 'post'</code> é€‰é¡¹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åç½®åˆ·æ–°çš„ <code>watchEffect()</code> æœ‰ä¸ªæ›´æ–¹ä¾¿çš„åˆ«å <code>watchPostEffect()</code>ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchPostEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token function">watchPostEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* åœ¨ Vue æ›´æ–°åæ‰§è¡Œ */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åˆ é™¤ä¾¦å¬å™¨"><a href="#åˆ é™¤ä¾¦å¬å™¨" class="header-anchor">#</a> åˆ é™¤ä¾¦å¬å™¨</h3> <p>åœ¨ <code>setup()</code> æˆ– <code>&lt;script setup&gt;</code> ä¸­å®šä¹‰çš„ä¾¦å¬å™¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ç”¨å…³å¿ƒå®ƒä¼šåœ¨ä½•æ—¶é”€æ¯ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨ç»‘å®šåˆ°å®¿ä¸»ç»„ä»¶å®ä¾‹ä¸Šï¼Œå¹¶ä¸”ä¼šåœ¨å®¿ä¸»ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ã€‚</p> <p>ä½†å¦‚æœä½¿ç”¨å¼‚æ­¥è¯­å¥åˆ›å»ºä¸€ä¸ªä¾¦å¬å™¨ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šç»‘å®šåˆ°å½“å‰ç»„ä»¶ä¸Šï¼Œä½ å¿…é¡»æ‰‹åŠ¨åˆ é™¤å®ƒï¼Œä»¥é˜²å†…å­˜æ³„æ¼ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// å®ƒä¼šè‡ªåŠ¨åœæ­¢</span>
    <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...è¿™ä¸ªåˆ™ä¸ä¼šï¼</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¦æ‰‹åŠ¨åœæ­¢ä¸€ä¸ªä¾¦å¬å™¨ï¼Œéœ€è¦è°ƒç”¨ <code>watch</code> æˆ– <code>watchEffect</code> è¿”å›çš„å‡½æ•°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> unwatch <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶</span>
<span class="token function">unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ³¨æ„ï¼Œéœ€è¦å¼‚æ­¥åˆ›å»ºä¾¦å¬å™¨çš„æƒ…å†µå¾ˆå°‘ï¼Œè¯·å°½å¯èƒ½é€‰æ‹©åŒæ­¥åˆ›å»ºã€‚å¦‚æœéœ€è¦ç­‰å¾…ä¸€äº›å¼‚æ­¥æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨æ¡ä»¶å¼çš„ä¾¦å¬é€»è¾‘ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// éœ€è¦å¼‚æ­¥è¯·æ±‚å¾—åˆ°çš„æ•°æ®</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ•°æ®åŠ è½½åæ‰§è¡ŒæŸäº›æ“ä½œ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h2> <p>Vue3 çš„è·¯ç”±ç”¨æ³•ä¹Ÿä¸ä¹‹å‰ä¹Ÿæœ‰å·®åˆ«</p> <ol><li><p>ä¸‹è½½ <code>vue-roter</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> vue-router@laster <span class="token operator">|</span> <span class="token function">npm</span> <span class="token function">install</span> vue-router@laster
</code></pre></div></li> <li><p>åˆ›å»º <code>router</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»º <code>index.ts | index.js</code> æ–‡ä»¶</p> <p><code>createWebHashHistory</code> ï¼šè®¾ç½®æ¨¡å¼ä¸º <code>history</code>ï¼Œå³å¸¦ <code>#</code> çš„è·¯å¾„</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">&quot;./routes&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>åˆ›å»º <code>routes.ts | routes.js</code> è·¯ç”±æ–‡ä»¶</p> <p><code>RouteRecordRaw</code> ï¼šè·¯ç”±ç±»å‹</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../xxx/xxx.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>æœ€ååœ¨ <code>Main.ts | Main.js</code> ä¸­æ³¨å†Œ <code>router/index</code> æ–‡ä»¶</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router/index&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¿…é¡»åœ¨æŒ‚è½½å‰æ³¨å†Œè·¯ç”±æ–‡ä»¶</span>
root<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h5 id="ä¸ºè·¯ç”±åˆ‡æ¢æ·»åŠ è¿‡æ¸¡æ•ˆæœ"><a href="#ä¸ºè·¯ç”±åˆ‡æ¢æ·»åŠ è¿‡æ¸¡æ•ˆæœ" class="header-anchor">#</a> ä¸ºè·¯ç”±åˆ‡æ¢æ·»åŠ è¿‡æ¸¡æ•ˆæœ</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appear</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.fade-enter-from,
.fade-leave-to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-20px<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.9<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-enter-active,
.fade-leave-active</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.52<span class="token punctuation">,</span> -0.22<span class="token punctuation">,</span> 0.29<span class="token punctuation">,</span> 1.92<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>æ•ˆæœ</p></blockquote> <p><img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301121343540.gif" alt="01"></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#é€‰æ‹©-api-é£æ ¼" title="é€‰æ‹© API é£æ ¼">é€‰æ‹© API é£æ ¼</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#é€‰é¡¹å¼-api-options-api" title="é€‰é¡¹å¼ APIï¼ˆOptions APIï¼‰">é€‰é¡¹å¼ APIï¼ˆOptions APIï¼‰</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç»„åˆå¼-api-composition-api" title="ç»„åˆå¼ APIï¼ˆComposition APIï¼‰">ç»„åˆå¼ APIï¼ˆComposition APIï¼‰</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ³-æ€»ç»“" title="ğŸ³ æ€»ç»“">ğŸ³ æ€»ç»“</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#vue3-çš„å“åº”å¼åŸºç¡€" title="Vue3 çš„å“åº”å¼åŸºç¡€">Vue3 çš„å“åº”å¼åŸºç¡€</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#reactive" title="reactive">reactive</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ref" title="ref">ref</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ref-å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…" title="ref å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…">ref å˜é‡åœ¨æ¨¡æ¿ä¸­çš„è§£åŒ…</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å…ƒç´ -ref-ä¸-defineexpose" title="å…ƒç´  Ref ä¸ defineExpose">å…ƒç´  Ref ä¸ defineExpose</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç»„ä»¶ä¸Šçš„-ref" title="ç»„ä»¶ä¸Šçš„ ref">ç»„ä»¶ä¸Šçš„ ref</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–" title="ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–">ç”Ÿå‘½å‘¨æœŸåç§°å˜åŒ–</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#transition-ç±»åå˜åŒ–" title="Transition ç±»åå˜åŒ–">Transition ç±»åå˜åŒ–</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å…³äº-watch-watcheffect" title="å…³äº Watch | watchEffect">å…³äº Watch | watchEffect</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watch" title="watch">watch</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watcheffect" title="watchEffect">watchEffect</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watch-vs-watcheffect" title="watch VS watchEffect">watch VS watchEffect</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº" title="ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº">ä¾¦å¬å™¨å›è°ƒè§¦å‘æ—¶æœº</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#åˆ é™¤ä¾¦å¬å™¨" title="åˆ é™¤ä¾¦å¬å™¨">åˆ é™¤ä¾¦å¬å™¨</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#vue-router" title="vue-router">vue-router</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>è¯¥ç½‘ç«™ä½¿ç”¨ vuepress + @vuepress/theme-blog æ­å»º â€”â€” by: Big Rice Â© 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/bigRiceRice.io/dist/assets/js/app.0c07d28e.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/3.606773b1.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/84.dea54f2b.js" defer></script>
  </body>
</html>
