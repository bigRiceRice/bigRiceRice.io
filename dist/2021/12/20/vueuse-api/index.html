<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueUse - è¶…å¼ºçš„ Vue Hook å·¥å…·åº“ | Big Rice ğŸš</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="æ ¹æ® VueUse å®˜æ–¹æ–‡æ¡£æ•´ç†çš„ä¸€äº› API æ‰‹å†Œ">
    
    <link rel="preload" href="/bigRiceRice.io/dist/assets/css/0.styles.425f9a7f.css" as="style"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/app.1ab36bb0.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/62.42d890ab.js" as="script"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/10.5590a827.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/11.168de83c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/12.568a4166.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/13.2a842132.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/14.a3bf35c8.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/15.73f8924b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/16.a1436b30.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/17.313e1789.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/18.b25a5446.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/19.b1cb79cd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/20.6ed4eadb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/21.85a3511a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/22.cb313a94.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/23.25fd78cd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/24.471429ef.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/25.3a1e5f8f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/26.3f8ff577.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/27.0853cfce.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/28.ee76b4d9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/29.0226dfe3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/30.53e58f2b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/31.73b312ac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/32.8e24d0c3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/33.e9c1b639.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/34.7a8c94b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/35.a16fc359.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/36.e8870ca7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/37.93f48cd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/38.be899865.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/4.cb5dc486.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/40.9348ddae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/41.ac71460e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/42.437e7888.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/43.26376eac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/44.b69b697f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/45.3ca71423.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/46.560db7ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/47.fa57f3e9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/48.a343344e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/49.4d7bf943.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/5.44ec780a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/50.ad5e5ae9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/51.60f76d0f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/52.9ec1bd2e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/53.506fdaeb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/54.210b57cb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/55.495f17ce.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/56.938a3529.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/57.6624e608.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/58.1f35c496.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/59.ac0a7da9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/60.905fe27a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/61.4d4c2383.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/63.b6c66778.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/64.d298e54c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/65.e3a74f1d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/66.4bf0888d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/67.830c3f18.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/68.93f88e77.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/69.3d8d8b58.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/70.7cdaf442.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/71.7543f1ae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/72.9039b416.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/73.1da63caa.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/74.8d438fd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/75.e082d0f6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/76.f2431b7b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/77.8f4d73ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/78.1224ea26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/79.0a70005e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/8.45199285.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/80.99aff656.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/81.e4a37126.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/82.9c2059c3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/83.47b33f69.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/84.92de7f3f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/85.bba0081a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/9.2eadd3a5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/bigRiceRice.io/dist/assets/css/0.styles.425f9a7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/bigRiceRice.io/dist/" class="nav-link home-link">Big Rice ğŸš </a> <button class="back" style="display:;">â†©</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/bigRiceRice.io/dist/" class="nav-link mobile-home-link">Big Rice ğŸš </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">æ¡†æ¶</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        VueUse - è¶…å¼ºçš„ Vue Hook å·¥å…·åº“
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address"> Â  in äº‘æ¢¦æ³½</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-12-20T00:00:00.000Z">
      2021-12-20
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/Vue3" data-v-42ccfcd5><span data-v-42ccfcd5>Vue3</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/API VueUse" data-v-42ccfcd5><span data-v-42ccfcd5>API VueUse</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="ğŸŒŒ-è·å–"><a href="#ğŸŒŒ-è·å–" class="header-anchor">#</a> ğŸŒŒ è·å–</h2> <h3 id="npm"><a href="#npm" class="header-anchor">#</a> NPM</h3> <p>æ‰§è¡Œ <code>yarn add @vueuse/core | npm install @vueuse/core</code> å®‰è£…ã€‚</p> <p>ä½¿ç”¨ <code>ESMoudle</code> è¯­æ³•ä» <code>@vueuse/core</code> å¼•ç”¨å‡½æ•°ä½¿ç”¨å³å¯ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLocalStorage<span class="token punctuation">,</span> useMouse<span class="token punctuation">,</span> usePreferredDark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·Ÿè¸ªé¼ æ ‡ä½ç½®</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å½“å‰æ˜¯å¦ä¸ºé»‘è‰²ä¸»é¢˜</span>
        <span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">usePreferredDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å°†çŠ¶æ€ä¿å­˜åœ¨localStorageä¸­</span>
        <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useLocalStorage</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> isDark<span class="token punctuation">,</span> store <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cdn"><a href="#cdn" class="header-anchor">#</a> CDN</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@vueuse/shared<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@vueuse/core<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å°†ä»¥å…¨å±€çš„å½¢å¼æš´éœ²ç»™ <code>window.VueUse</code></p> <h2 id="ğŸ›«-æœ€ä½³å®è·µ"><a href="#ğŸ›«-æœ€ä½³å®è·µ" class="header-anchor">#</a> ğŸ›« æœ€ä½³å®è·µ</h2> <h3 id="ç»“æ„"><a href="#ç»“æ„" class="header-anchor">#</a> ç»“æ„</h3> <p>VueUse ä¸­ç»å¤§å¤šæ•°å‡½æ•°éƒ½è¿”å›ä¸€ç»„ Refs å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ ES6 çš„å¯¹è±¡ç»“æ„æ¥è·å–éœ€è¦çš„å€¼ã€‚ä¾‹å¦‚ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useMouse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// &quot;x&quot; ä¸ &quot;y&quot; æ˜¯ Ref å¯¹è±¡</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å°†-ref-ä½œä¸ºå‚æ•°ä¼ é€’"><a href="#å°†-ref-ä½œä¸ºå‚æ•°ä¼ é€’" class="header-anchor">#</a> å°† Ref ä½œä¸ºå‚æ•°ä¼ é€’</h3> <p>åœ¨ Vue ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>setup()</code> å‡½æ•°æ¥æ„å»ºæ•°æ®å’Œé€»è¾‘ä¹‹é—´çš„â€œè”ç³»â€ã€‚</p> <p>ä¸ºäº†ä½¿å…¶çµæ´»ï¼Œå¤§å¤šæ•° VueUse å‡½æ•°è¿˜æ¥å—å‚æ•°çš„ Ref ç‰ˆæœ¬ã€‚</p> <p>è¿™é‡Œä½¿ç”¨ <code>useTitle</code> æ¥ä¸¾ä¾‹ï¼š</p> <ul><li><h5 id="æ­£å¸¸ä½¿ç”¨"><a href="#æ­£å¸¸ä½¿ç”¨" class="header-anchor">#</a> æ­£å¸¸ä½¿ç”¨</h5> <p>é€šå¸¸ <code>useTitle</code> è¿”å›ä¸€ä¸ªé¡µé¢æ ‡é¢˜çš„ Ref å¯¹è±¡ï¼Œå½“å®ƒçš„å€¼ä¿®æ”¹æ—¶ï¼Œé¡µé¢çš„æ ‡é¢˜ä¹Ÿä¼šéšä¹‹ä¿®æ”¹ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">&quot;VueUse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watch</span><span class="token punctuation">(</span>isDark<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">.</span>value <span class="token operator">=</span> isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;ğŸŒ™ æ™šä¸Šå¥½!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜€ï¸ æ—©ä¸Šå¥½!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="è®¡ç®—å‚æ•°"><a href="#è®¡ç®—å‚æ•°" class="header-anchor">#</a> è®¡ç®—å‚æ•°</h5> <p>ä¹Ÿå¯ä»¥åŠ¨æ€çš„è®¾ç½® <code>useTitle</code> çš„å…¥å‚å€¼æ¥è¾¾åˆ°ä¿®æ”¹æ ‡é¢˜ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;ğŸŒ™ æ™šä¸Šå¥½!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜€ï¸ æ—©ä¸Šå¥½!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="getter"><a href="#getter" class="header-anchor">#</a> Getter</h5> <p>åœ¨ VueUse 9.0 ä»¥åæ”¯æŒäº†ä¼ å…¥ Getter å‡½æ•°çš„å½¢å¼ï¼Œä½¿ç”¨ä¸Šè·Ÿè®¡ç®—å‚æ•°ç±»ä¼¼ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;ğŸŒ™ æ™šä¸Šå¥½!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜€ï¸ æ—©ä¸Šå¥½!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="æ— æ¸²æŸ“ç»„ä»¶"><a href="#æ— æ¸²æŸ“ç»„ä»¶" class="header-anchor">#</a> æ— æ¸²æŸ“ç»„ä»¶</h3> <p>VueUse 5.0 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°åŒ…ï¼Œ<code>@vueuse/components</code> å¯ä»¥æä¾›æŸäº›å‡½æ•°çš„æ— æ¸²æŸ“ç»„ä»¶ç‰ˆæœ¬</p> <ul><li><h5 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="header-anchor">#</a> ä¸‹è½½</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @vueuse/components <span class="token operator">|</span> <span class="token function">npm</span> <span class="token function">install</span> @vueuse/components
</code></pre></div></li> <li><h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨</h5> <p>ä¾‹å¦‚ï¼š<code>onClickOutside</code> æ˜¯ä¸€ä¸ªç›‘å¬å…ƒç´ å¤–ç‚¹å‡»äº‹ä»¶çš„å‡½æ•°</p> <p>æ­£å¸¸ä½¿ç”¨ä¼šä»£ç ä¼šæ˜¾å¾—å†—ä½™ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ— æ¸²æŸ“ç»„ä»¶ç‰ˆæœ¬ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onClickOutside <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token function">onClickOutside</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> close<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click Outside of Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸‹é¢æ¥çœ‹çœ‹æ— æ¸²æŸ“ç»„ä»¶ç‰ˆæœ¬ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> OnClickOutside <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/components&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OnClickOutside</span> <span class="token attr-name">@trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Click Outside of Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OnClickOutside</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>Script</code> ä»£ç ä¸­ç®€æ´äº†è®¸å¤šã€‚</p></li> <li><h5 id="è·å–è¿”å›å€¼"><a href="#è·å–è¿”å›å€¼" class="header-anchor">#</a> è·å–è¿”å›å€¼</h5> <p>æˆ‘ä»¬å¯ä»¥è®¿é—®ä½œç”¨åŸŸæ’æ§½æ¥è·å–æŸäº›ç»„ä»¶çš„è¿”å›å€¼ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseMouse</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ x, y }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  x: {{ x }}
  y: {{ y }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseMouse</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseDark</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ isDark, toggleDark }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggleDark()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Is Dark: {{ isDark }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseDark</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="state-çŠ¶æ€ç›¸å…³"><a href="#state-çŠ¶æ€ç›¸å…³" class="header-anchor">#</a> State çŠ¶æ€ç›¸å…³</h2> <h3 id="userefhistory"><a href="#userefhistory" class="header-anchor">#</a> useRefHistory</h3> <p>åŸºäºä»£ç†å¯¹è±¡è¿½è¸ªå®ƒçš„å˜æ›´åˆ›å»ºä¸€ä¸ª**â€œå†å²è®°å½•â€**ã€‚å¹¶æä¾›åé€€ã€å‰è¿›ã€é‡ç½®åŠŸèƒ½ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯"><a href="#è¯¦ç»†ä¿¡æ¯" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºéœ€è¦è¿½è¸ªçš„å“åº”å¼å¯¹è±¡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯é€‰çš„é…ç½®é¡¹å¯¹è±¡ï¼š</p> <ul><li><code>deep</code> ï¼šæ˜¯å¦ä¸ºæ¯ä¸ªå†å²è®°å½•åˆ›å»ºå…‹éš†å¹¶æ•´åˆä¸ºä¸€ä¸ªï¼Œé»˜è®¤ä¸º <code>false</code>ã€‚</li> <li><code>dump</code> ï¼šè‡ªå®šä¹‰å†å²è®°å½•å€¼çš„åºåˆ—åŒ–è¡Œä¸ºï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ¥è¾¾åˆ°æ ¼å¼åŒ–çš„ç›®çš„ã€‚
<ul><li><code>deep</code> ä¸º <code>true</code> æ—¶æ‰ä¼šæ‰§è¡Œã€‚</li> <li>é»˜è®¤æ‰§è¡Œ <code>JSON.parse(JSON.stringify(xxx))</code>ã€‚</li></ul></li> <li><code>parse</code> ï¼šè‡ªå®šä¹‰å†å²è®°å½•çš„è§£æè¡Œä¸ºã€‚</li> <li><code>flush</code> ï¼šåˆ›å»ºå†å²è®°å½•çš„æ—¶æœºï¼Œé»˜è®¤ä¸º <code>pre</code>ï¼Œå…¶ä»–å–å€¼ä¸º <code>sync</code>ï¼Œ<code>post</code>ã€‚</li></ul> <p>è¿”å›å€¼ä¸ºå¤šä¸ªå‡½æ•°æˆ–å¯¹è±¡ï¼š</p> <ul><li><p><code>history</code> ï¼šå†å²è®°å½•å¯¹è±¡ï¼Œæœ‰ä¸¤ä¸ªå±æ€§ã€‚ã€<em>Object</em>ã€‘</p> <ul><li><code>snapshot</code> ï¼šå¿«ç…§ï¼Œå³ä¿®æ”¹åçš„å€¼ã€‚ã€<em>String</em>ã€‘</li> <li><code>timestamp</code> ï¼šä¿®æ”¹çš„æ—¶é—´æˆ³ã€‚ã€<em>String</em>ã€‘</li></ul></li> <li><p><code>redo</code> ï¼šå‰è¿›ã€‚ã€<em>Function</em>ã€‘</p></li> <li><p><code>canRedo</code> ï¼šæ˜¯å¦å¯ä»¥å‰è¿›ã€‚ã€<em>Boolean</em>ã€‘</p></li> <li><p><code>undo</code> ï¼šåé€€ã€‚ã€<em>Function</em>ã€‘</p></li> <li><p><code>canUndo</code> ï¼šæ˜¯å¦å¯ä»¥åé€€ã€‚ã€<em>Boolean</em>ã€‘</p></li> <li><p><code>commit</code> ï¼šæ‰‹åŠ¨æäº¤åˆ›å»ºä¸€æ¬¡å†å²è®°å½•ã€‚ã€<em>Function</em>ã€‘</p></li> <li><p><code>clear</code> ï¼šä½¿ç”¨æœ€åä¸€æ¬¡å†å²è®°å½•çš„å€¼é‡ç½®å†å²è®°å½•åˆ—è¡¨ã€‚ã€<em>Function</em>ã€‘</p></li></ul></li> <li><h5 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>è¿½è¸ªä¸€ä¸ªæ–‡æœ¬æ¡†çš„å†å²å˜æ›´è®°å½•ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newTodo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo<span class="token punctuation">,</span> commit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>newTodo<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newTodo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>undo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åé€€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‰è¿›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ‰‹åŠ¨æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>ä»¥ä¸‹ä¸ºå†å²è®°å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>{{ history }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>ä»¥ä¸Šä»£ç æœ‰ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºæ–‡æœ¬æ¡†å·²ç»ç»‘å®šäº† <code>vModel</code> ï¼Œæ‰€æœ‰æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šè‡ªåŠ¨è§¦å‘ <code>commit</code> ï¼Œæ‰€ä»¥ä¸éœ€è¦å†é‡å¤ <code>commit</code> äº†ã€‚</li> <li>æˆ–è€…ä½¿ç”¨ <code>useManualRefHistory</code> æ‡’æ‰§è¡Œã€‚</li></ul></li></ul> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091242992.gif" alt="demo" style="zoom:80%;"> <p>åˆ©ç”¨ <code>useRefHistory</code> è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€é™‹çš„ Todo-Listï¼Œå¹¶è¾¾åˆ°â€œ<strong>æ—¶å…‰å€’æµ</strong>â€çš„æ•ˆæœï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newTodo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> todos <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo<span class="token punctuation">,</span> clear <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newTodo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todos.unshift(newTodo), (newTodo = '')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>undo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åé€€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‰è¿›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>{{ history }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>æ³¨æ„ï¼šè¿™é‡Œé…ç½®é¡¹ä¸­çš„ <code>deep</code> å¿…é¡»å¼€å¯ã€‚</p> <ul><li><p>å› ä¸ºåœ¨ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œç”±äºæ›´æ”¹å®ƒä»¬çš„å±æ€§ä¸ä¼šæ›´æ”¹å¼•ç”¨ï¼Œå› æ­¤ä¸ä¼šè§¦å‘æäº¤ã€‚</p></li> <li><p>æˆ–å°† <code>flush</code> é…ç½®é¡¹è®¾ç½®ä¸º <code>post</code> ï¼šåœ¨å…ƒç´ æ¸²æŸ“åå†æ·»åŠ å¿«ç…§ã€‚</p></li></ul></li></ul> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091242142.gif" alt="demo" style="zoom:80%;"> <p>è®¾ç½®å­˜å‚¨å†å²è®°å½•çš„æœ€å¤§å€¼ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> refHistory <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    capacity<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token comment">// é™åˆ¶ä¸º15æ¡å†å²è®°å½•</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

refHistory<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…é™¤æ‰€æœ‰å†å²è®°å½•</span>
</code></pre></div><ul><li><h5 id="å‚è§-https-vueuse-org-core-userefhistory"><a href="#å‚è§-https-vueuse-org-core-userefhistory" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useRefHistory/</h5></li></ul> <h3 id="usemanualrefhistory"><a href="#usemanualrefhistory" class="header-anchor">#</a> useManualRefHistory</h3> <p>æ‡’æ‰§è¡Œç‰ˆæœ¬çš„ <code>useRefHistory</code>ï¼Œæºå¯¹è±¡ä¿®æ”¹ä¸ä¼šè‡ªåŠ¨è¿½è¸ªï¼Œå¿…é¡»è¦æ‰‹åŠ¨è°ƒç”¨ <code>commit</code> æ‰ä¼šæ·»åŠ å¿«ç…§ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useManualRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useManualRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>

counter<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚æœ commit ä¸æ‰‹åŠ¨è°ƒç”¨ï¼Œé‚£ä¹ˆå¿«ç…§ä¸ä¼šæ·»åŠ ï¼</span>
<span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* [
  { snapshot: 1, timestamp: 1601912898062 },
  { snapshot: 0, timestamp: 1601912898061 }
] */</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usemanualrefhistory"><a href="#å‚è§-https-vueuse-org-core-usemanualrefhistory" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useManualRefHistory/</h5></li></ul> <h3 id="usedebouncedrefhistory"><a href="#usedebouncedrefhistory" class="header-anchor">#</a> useDebouncedRefHistory</h3> <p>ç”¨æ³•ä¸ <code>useRefHistory</code> ç±»ä¼¼ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå€¼ä¸º <code>number</code> çš„ <code>debounce</code> â€œé˜²æŠ–â€é…ç½®</p> <ul><li><h5 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDebouncedRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useDebouncedRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    debounce<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usedebouncedrefhistory"><a href="#å‚è§-https-vueuse-org-core-usedebouncedrefhistory" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useDebouncedRefHistory/</h5></li></ul> <h3 id="usethrottledrefhistory"><a href="#usethrottledrefhistory" class="header-anchor">#</a> useThrottledRefHistory</h3> <p>ç”¨æ³•ä¸ <code>useRefHistory</code> ç±»ä¼¼ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå€¼ä¸º <code>number</code> çš„ <code>throttle</code> â€œèŠ‚æµâ€é…ç½®</p> <ul><li><h5 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useThrottledRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useThrottledRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    throttle<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usethrottledrefhistory"><a href="#å‚è§-https-vueuse-org-core-usethrottledrefhistory" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useThrottledRefHistory/</h5></li></ul> <h3 id="ğŸ’-usestorage"><a href="#ğŸ’-usestorage" class="header-anchor">#</a> ğŸ’ useStorage</h3> <p>è¿”å›ä¸€ä¸ª Ref å¯¹è±¡ï¼Œå¹¶å“åº”å¼çš„è®¾ç½® <code>LocalStorage</code> æˆ– <code>SessionStorage</code> ä¸­çš„å€¼ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-2"><a href="#è¯¦ç»†ä¿¡æ¯-2" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”®åï¼Œå¿…é¡»ä¸ºå­—ç¬¦ä¸²ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ï¼Œå½“æŒ‡å®šçš„ <code>Storage</code> ä¸­æ²¡æœ‰è¯¥é”®æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„é”®å¹¶è®¾ç½®è¯¥å‚æ•°å€¼ã€‚</p> <ul><li>è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ï¼Œå®ƒå¯ä»¥åŒæ—¶æŒ‡å®šå€¼çš„ç±»å‹ï¼Œå‡å¦‚å°†è¿™ä¸ªå‚æ•°çš„ç±»å‹è®¾ç½®ä¸ºåŸºæœ¬ç±»å‹ï¼Œä¿®æ”¹æºå€¼ä¸ºå¯¹è±¡æˆ–æ•°ç»„å°†ä¸ä¼šç»è¿‡åºåˆ—åŒ–ã€‚</li></ul> <p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º<strong>å¯é€‰</strong>æŒ‡å®šçš„ <code>Storage</code>ï¼Œå¯ä¼ å…¥ <code>LocalStorage</code> æˆ– <code>SessionStorage</code>ï¼Œé»˜è®¤ä¸º <code>LocalStorage</code>ã€‚</p> <p>ç¬¬å››ä¸ªå‚æ•°æ˜¯<strong>å¯é€‰</strong>çš„é…ç½®é¡¹ï¼š</p> <ul><li><p>TS ç±»å‹å¦‚ä¸‹ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseStorageOptions<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span>
    <span class="token keyword">extends</span> <span class="token class-name">ConfigurableEventFilter</span><span class="token punctuation">,</span>
        ConfigurableWindow<span class="token punctuation">,</span>
        ConfigurableFlush <span class="token punctuation">{</span>
    <span class="token comment">// æ˜¯å¦å¼€å¯æ·±åº¦ç›‘å¬ï¼Œé»˜è®¤ä¸º True</span>
    deep<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯å¦ç›‘å¬ Storage çš„ä¿®æ”¹ï¼Œè¿™åœ¨å¤šæ ‡ç­¾é¡µä¸­æœ‰ç”¨ï¼Œé»˜è®¤ä¸º True</span>
    listenToStorageChanges<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// å½“é»˜è®¤å€¼æˆ–é”®ä¸å­˜åœ¨æ—¶ï¼Œæ˜¯å¦å°†å…¶å†™å…¥ Storageï¼Œé»˜è®¤ä¸º True</span>
    writeDefaults<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// å½“ç»‘å®šçš„é”®ä¸Šæœ‰å€¼ï¼Œæ˜¯å¦å°†é»˜è®¤å€¼è¿›è¡Œæµ…åˆå¹¶ï¼Œé»˜è®¤ä¸º False</span>
    <span class="token comment">// ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªè‡ªå®šä¹‰åˆå¹¶è¡Œä¸ºçš„å‡½æ•°</span>
    mergeDefaults<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>storageValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> defaults<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è‡ªå®šä¹‰åºåˆ—åŒ–è¡Œä¸º,ç±»å‹åœ¨ä¸‹æ–¹</span>
    <span class="token comment">// é»˜è®¤è¡Œä¸ºæ˜¯é‡åˆ°å¯¹è±¡|æ•°ç»„ä½¿ç”¨ JSON.stringify / JSON.parse</span>
    <span class="token comment">// é‡åˆ°æ•°å­—|å­—ç¬¦ä¸²ä½¿ç”¨ Number.toString / parseFloat</span>
    serializer<span class="token operator">?</span><span class="token operator">:</span> Serializer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// é”™è¯¯å›è°ƒå‡½æ•° é»˜è®¤æ‰§è¡Œ `console.error</span>
    onError<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯å¦ä½¿ç”¨æµ…å¼•ç”¨ä½œä¸ºå‚è€ƒï¼Œé»˜è®¤ä¸º False</span>
    shallow<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Serializer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function">read</span><span class="token punctuation">(</span>raw<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token function">write</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Serializer ç”¨æ³•</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    serializer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// å½“ç”¨æˆ·è¯»å– localStorage.getItem('my-storage') æ—¶è§¦å‘</span>
        <span class="token comment">// æ­¤å‡½æ•°å¿…é¡»è¿”å› useStorage çš„æ³›å‹ç±»å‹</span>
        <span class="token function">read</span><span class="token punctuation">(</span>raw<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// raw çš„ç±»å‹æ˜¯ string</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>raw<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// å½“ Ref å¯¹è±¡å€¼ä¿®æ”¹æ—¶è§¦å‘ï¼Œåˆå§‹åŒ–é»˜è®¤å€¼ä¹Ÿä¼šè‡ªåŠ¨è§¦å‘ä¸€æ¬¡</span>
        <span class="token comment">// æ­¤å‡½æ•°å¿…é¡»è¿”å› string ç±»å‹ï¼Œå› ä¸ºè¦å†™å…¥åˆ° Storage ä¸­</span>
        <span class="token function">write</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// value çš„ç±»å‹ä¸€å®šæ˜¯æ³›å‹çš„ç±»å‹</span>
            <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p>è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>Ref</code> å¯¹è±¡ï¼Œä¿®æ”¹è¿™ä¸ª <code>Ref</code> å¯¹è±¡çš„å€¼ä¹Ÿä¼šåŒæ­¥ä¿®æ”¹ <code>Storage</code> ä¸­çš„å€¼ã€‚</p></li> <li><h5 id="ç¤ºä¾‹-5"><a href="#ç¤ºä¾‹-5" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>å“åº”å¼æ›´æ”¹ <code>LocalStorage</code> ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> useStorage<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    storage<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243590.gif" alt="demo"></p> <p>å“åº”å¼ä¿®æ”¹ <code>SessionStorage</code> ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> useStorage<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sessionStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    storage<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usestorage"><a href="#å‚è§-https-vueuse-org-core-usestorage" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useStorage/</h5></li></ul> <h3 id="usesessionstorage"><a href="#usesessionstorage" class="header-anchor">#</a> useSessionStorage</h3> <p>è¿”å›ä¸€ä¸ª Ref å¯¹è±¡ï¼Œå¹¶å“åº”å¼çš„è®¾ç½® <code>SessionStorage</code> ä¸­çš„å€¼ã€‚</p> <p>ç”¨æ³•ä¸ useStorage ç±»ä¼¼ï¼Œä¸è¿‡æ²¡æœ‰äº† è®¾ç½® Storage çš„å‚æ•°ã€‚</p> <ul><li><h5 id="å‚è§-https-vueuse-org-core-usesessionstorage"><a href="#å‚è§-https-vueuse-org-core-usesessionstorage" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useSessionStorage/</h5></li></ul> <h3 id="uselocalstorage"><a href="#uselocalstorage" class="header-anchor">#</a> useLocalStorage</h3> <p>è¿”å›ä¸€ä¸ª Ref å¯¹è±¡ï¼Œå¹¶å“åº”å¼çš„è®¾ç½® <code>LocalStorage</code> ä¸­çš„å€¼ã€‚</p> <p>ç”¨æ³•ä¸ useStorage ç±»ä¼¼ï¼Œä¸è¿‡æ²¡æœ‰äº† è®¾ç½® Storage çš„å‚æ•°ã€‚</p> <ul><li><h5 id="å‚è§-https-vueuse-org-core-uselocalstorage"><a href="#å‚è§-https-vueuse-org-core-uselocalstorage" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useLocalStorage/</h5></li></ul> <h2 id="dom-å…ƒç´ ç›¸å…³"><a href="#dom-å…ƒç´ ç›¸å…³" class="header-anchor">#</a> DOM å…ƒç´ ç›¸å…³</h2> <h3 id="useactiveelement"><a href="#useactiveelement" class="header-anchor">#</a> useActiveElement</h3> <p>åŠ¨æ€çš„è·å–å½“å‰æ–‡æ¡£ä¸­èšç„¦çŠ¶æ€çš„å…ƒç´ ã€‚æ­¤å¤„çš„ <strong>èšç„¦</strong> ä¸æ˜¯å•çº¯çš„æ–‡æœ¬æ¡† <code>:Focus</code> æˆ– <code>:active</code> èšç„¦çš„çŠ¶æ€ã€‚</p> <p>è€Œæ˜¯æŒ‡ç”¨æˆ·ä½¿ç”¨ Tab åˆ‡æ¢ç„¦ç‚¹æ—¶å¯¹åº”çš„å…ƒç´ ã€‚</p> <p>æ²¡æœ‰ç„¦ç‚¹å…ƒç´ æ—¶é»˜è®¤è¿”å› <code>&lt;Body&gt;</code> æˆ– <code>null</code></p> <ul><li><h5 id="ç¤ºä¾‹-6"><a href="#ç¤ºä¾‹-6" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>ä¸ºç„¦ç‚¹å…ƒç´ æ·»åŠ æ ·å¼ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useActiveElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> aEL <span class="token operator">=</span> useActiveElement<span class="token operator">&lt;</span>HTMLInputElement <span class="token operator">|</span> HTMLButtonElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> activeValue <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>aEL<span class="token punctuation">.</span>value<span class="token operator">?.</span>tagName <span class="token operator">==</span> <span class="token string">&quot;BODY&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;Body&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> aEL<span class="token operator">?.</span>value<span class="token operator">?.</span>value <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token operator">?</span> aEL<span class="token punctuation">.</span>value<span class="token punctuation">.</span>textContent <span class="token operator">:</span> aEL<span class="token punctuation">.</span>value<span class="token operator">?.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>aEL<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">nV<span class="token punctuation">,</span> oV</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    oV<span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nV<span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in 6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Button-{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in 6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`Input-${item}`<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Current Active Element: ã€{{ activeValue }}ã€‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243209.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-useactiveelement"><a href="#å‚è§-https-vueuse-org-core-useactiveelement" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useActiveElement/</h5></li></ul> <h3 id="ğŸ’-useelementbounding"><a href="#ğŸ’-useelementbounding" class="header-anchor">#</a> ğŸ’ useElementBounding</h3> <p>åŠ¨æ€çš„è·å–å…ƒç´ çš„è¾¹ç•Œä¿¡æ¯ï¼Œå¦‚ï¼šå®½åº¦ã€é«˜åº¦ã€X è½´ã€Y è½´ç­‰ã€‚</p> <ul><li><h5 id="ts-ç±»å‹"><a href="#ts-ç±»å‹" class="header-anchor">#</a> TS ç±»å‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useElementBounding</span><span class="token punctuation">(</span>
    target<span class="token operator">:</span> MaybeComputedElementRef<span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseElementBoundingOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…ƒç´ é«˜åº¦</span>
    height<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è·ç¦»è§†å£åº•éƒ¨å¤šå°‘åƒç´ </span>
    bottom<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è·ç¦»è§†å£å·¦è¾¹å¤šå°‘åƒç´ </span>
    left<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è·ç¦»è§†å£å³è¾¹å¤šå°‘åƒç´ </span>
    right<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è·ç¦»è§†å£åº•éƒ¨å¤šå°‘åƒç´ </span>
    top<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´ å®½åº¦</span>
    width<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´ çš„ç»å¯¹å®šä½ X å€¼,ä¸ left ç›¸åŒ</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´ çš„ç»å¯¹å®šä½ X å€¼,ä¸ top ç›¸åŒ</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="ç¤ºä¾‹-7"><a href="#ç¤ºä¾‹-7" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>åŠ¨æ€è·å–å…ƒç´ è¾¹ç•Œä¿¡æ¯ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> left<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementBounding</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ”¯æŒæ— æ¸²æŸ“ç»„ä»¶ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementBounding</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Width: {{ width }}
  Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementBounding</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-useelementbounding"><a href="#å‚è§-https-vueuse-org-core-useelementbounding" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/UseElementBounding/</h5></li></ul> <h3 id="useelementsize"><a href="#useelementsize" class="header-anchor">#</a> useElementSize</h3> <p>åŠ¨æ€çš„è·å–å…ƒç´ çš„å®½åº¦ä¸é«˜åº¦ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-8"><a href="#ç¤ºä¾‹-8" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>åŠ¨æ€è·å–å®½åº¦ä¸é«˜åº¦ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementSize</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ”¯æŒæ— æ¸²æŸ“ç»„ä»¶ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementSize</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Width: {{ width }} Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementSize</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-useelementsize"><a href="#å‚è§-https-vueuse-org-core-useelementsize" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useElementSize/</h5></li></ul> <h3 id="ğŸ’-useelementvisibility"><a href="#ğŸ’-useelementvisibility" class="header-anchor">#</a> ğŸ’ useElementVisibility</h3> <p>åˆ¤æ–­å…ƒç´ æ˜¯å¦è¿˜åœ¨æµè§ˆå™¨è§†å£ä¸­å‡ºç°ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-9"><a href="#ç¤ºä¾‹-9" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useElementVisibility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> targetIsVisible <span class="token operator">=</span> <span class="token function">useElementVisibility</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> IsVisible <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    targetIsVisible<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;äºè§†å£ä¸­å¯è§&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;äºè§†å£ä¸­æ¶ˆå¤±&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tool<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å…ƒç´ {{ IsVisible }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243753.gif" alt="demo" style="zoom:80%;"> <p>æ”¯æŒæ— æ¸²æŸ“ç»„ä»¶ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementVisibility</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ isVisible }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Is Visible: {{ isVisible }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementVisibility</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-useelementvisibility"><a href="#å‚è§-https-vueuse-org-core-useelementvisibility" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useElementVisibility/</h5></li></ul> <h3 id="ğŸ’-usemouseinelement"><a href="#ğŸ’-usemouseinelement" class="header-anchor">#</a> ğŸ’ useMouseInElement</h3> <p>åŠ¨æ€çš„è·å–é¼ æ ‡äºå…ƒç´ ä¹‹é—´çš„å…³ç³»ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-3"><a href="#è¯¦ç»†ä¿¡æ¯-3" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>è¿”å›å€¼ä¸ºï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useMouseInElement</span><span class="token punctuation">(</span>
    target<span class="token operator">?</span><span class="token operator">:</span> MaybeElementRef<span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> MouseInElementOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¼ æ ‡çš„ X è½´å€¼</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// é¼ æ ‡çš„ Y è½´å€¼</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    sourceType<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span>MouseSourceType<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// é¼ æ ‡è·ç¦»å…ƒç´ å·¦è¾¹å¤šå°‘åƒç´ </span>
    elementX<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// é¼ æ ‡è·ç¦»å…ƒç´ é¡¶éƒ¨å¤šå°‘åƒç´ </span>
    elementY<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´  X è½´ä½ç½®å€¼</span>
    elementPositionX<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´  Y è½´ä½ç½®å€¼</span>
    elementPositionY<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´ é«˜åº¦</span>
    elementHeight<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// å…ƒç´ å®½åº¦</span>
    elementWidth<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// é¼ æ ‡æ˜¯å¦åœ¨å…ƒç´ å†…éƒ¨</span>
    isOutside<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// åœæ­¢ç›‘å¬</span>
    <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="ç¤ºä¾‹-10"><a href="#ç¤ºä¾‹-10" class="header-anchor">#</a> ç¤ºä¾‹</h5> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243567.gif" alt="demo" style="zoom:80%;"> <p>æ”¯æŒæ— æ¸²æŸ“ç»„ä»¶ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseMouseInElement</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ elementX, elementY, isOutside }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  x: {{ elementX }}
  y: {{ elementY }}
  Is Outside: {{ isOutside }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseMouseInElement</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usemouseinelement"><a href="#å‚è§-https-vueuse-org-core-usemouseinelement" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useMouseInElement/</h5></li></ul> <h3 id="ğŸ’-usewindowscroll"><a href="#ğŸ’-usewindowscroll" class="header-anchor">#</a> ğŸ’ useWindowScroll</h3> <p>åŠ¨æ€è·å–æ»šåŠ¨æ¡† Xã€Y å€¼ï¼Œå€¼è¶Šå¤§è·ç¦»è¶Šè¿œã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-11"><a href="#ç¤ºä¾‹-11" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useWindowScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usewindowscroll"><a href="#å‚è§-https-vueuse-org-core-usewindowscroll" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useWindowScroll/</h5></li></ul> <h3 id="ğŸ’-usewindowsize"><a href="#ğŸ’-usewindowsize" class="header-anchor">#</a> ğŸ’ useWindowSize</h3> <p>åŠ¨æ€è·å–è§†å£çš„å®½åº¦ä¸é«˜åº¦ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-12"><a href="#ç¤ºä¾‹-12" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useWindowSize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243932.gif" alt="demo" style="zoom:80%;"> <p>æ”¯æŒæ— æ¸²æŸ“ç»„ä»¶ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseWindowSize</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Width: {{ width }}
  Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseWindowSize</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usewindowsize"><a href="#å‚è§-https-vueuse-org-core-usewindowsize" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useWindowSize/</h5></li></ul> <h2 id="bom-ç›¸å…³"><a href="#bom-ç›¸å…³" class="header-anchor">#</a> BOM ç›¸å…³</h2> <h3 id="usedark"><a href="#usedark" class="header-anchor">#</a> useDark</h3> <p>è·å–å½“å‰æ˜¯å¦ä¸ºæ·±è‰²æ¨¡å¼ï¼Œè¿”å›ä¸€ä¸ªå€¼ä¸ºå¸ƒå°”å€¼çš„ Ref å¯¹è±¡ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-4"><a href="#è¯¦ç»†ä¿¡æ¯-4" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ä½¿ç”¨äº†è¿™ä¸ª APIï¼Œä¼šé»˜è®¤åœ¨ HTML æ ‡ç­¾ä¸­åˆ›å»ºä¸€ä¸ªç±»ï¼Œè‹¥å½“å‰æ˜¯æ·±è‰²æ¨¡å¼ï¼Œåˆ™ç±»çš„å€¼ä¸º <code>drak</code>ï¼Œè‹¥æ˜¯æµ…è‰²æ¨¡å¼æ˜¯ï¼Œåˆ™ç±»çš„å€¼ä¸ºç©ºã€‚</p> <p>å¹¶ä¼šåœ¨ <code>LocalStorage</code> ä¸­å“åº”å¼åˆ›å»ºä¸€ä¸ªå€¼ä¸º <code>drak</code> æˆ– <code>light</code> æˆ– <code>auto</code> çš„ <code>vueuse-color-scheme</code> é»˜è®¤é”®ã€‚</p></li> <li><h5 id="ç¤ºä¾‹-13"><a href="#ç¤ºä¾‹-13" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœä¸ºæ·±è‰²æ¨¡å¼ï¼Œèµ‹ç»™ selector ä¸Š attribute çš„å€¼</span>
    valueDark<span class="token operator">:</span> <span class="token string">&quot;drak&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// å¦‚æœä¸ºæµ…è‰²æ¨¡å¼ï¼Œèµ‹ç»™ selector ä¸Š attribute çš„å€¼</span>
    valueLight<span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// éœ€è¦èµ‹å€¼çš„å…ƒç´ é€‰æ‹©å™¨</span>
    selector<span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// èµ‹å€¼çš„å±æ€§å</span>
    attribute<span class="token operator">:</span> <span class="token string">&quot;color-scheme&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// éœ€è¦ä¿å­˜åˆ° Storage ä¸­çš„é”®å</span>
    storageKey<span class="token operator">:</span> <span class="token string">&quot;color-scheme&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// ä¿å­˜åˆ° sessionStorage</span>
    storage<span class="token operator">:</span> sessionStorage<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usedark"><a href="#å‚è§-https-vueuse-org-core-usedark" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useDark/</h5></li></ul> <h3 id="ğŸ’-useeventlistener"><a href="#ğŸ’-useeventlistener" class="header-anchor">#</a> ğŸ’ useEventListener</h3> <p>è½»æ¾ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨ï¼Œåœ¨è£…è½½æ—¶ä½¿ç”¨ <code>addEventListener</code> æ³¨å†Œï¼Œåœ¨å¸è½½æ—¶è‡ªåŠ¨ä½¿ç”¨ <code>removeEventListener</code> æ³¨å†Œã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-5"><a href="#è¯¦ç»†ä¿¡æ¯-5" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç›‘å¬çš„å¯¹è±¡ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºäº‹ä»¶çš„åç§°ã€‚</p> <p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ã€‚</p> <p>è¿”å›å€¼ä¸ºå¸è½½ç›‘å¬å™¨çš„å‡½æ•°</p></li> <li><h5 id="ç¤ºä¾‹-14"><a href="#ç¤ºä¾‹-14" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token function">useEventListener</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> ev <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ª Ref æ¨¡æ¿å¼•ç”¨ä½œä¸ºäº‹ä»¶ç›®æ ‡ï¼Œå½“ Ref ç›®æ ‡åˆ‡æ¢æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ç»‘å®šåœ¨ä¹‹å‰å¼•ç”¨ä¸Šçš„äº‹ä»¶ç›‘å¬å¹¶æ³¨å†Œæ–°çš„äº‹ä»¶ç›‘å¬ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useEventListener</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cond<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Div1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Div2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½¿ç”¨è¿”å›å€¼å¸è½½ç›‘å¬å™¨ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cleanup <span class="token operator">=</span> <span class="token function">useEventListener</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¸è½½ç›‘å¬å™¨</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-useeventlistener"><a href="#å‚è§-https-vueuse-org-core-useeventlistener" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useEventListener/</h5></li></ul> <h3 id="ğŸ’-usefiledialog"><a href="#ğŸ’-usefiledialog" class="header-anchor">#</a> ğŸ’ useFileDialog</h3> <p>è½»æ¾æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ã€‚</p> <ul><li><h5 id="ts-ç±»å‹-2"><a href="#ts-ç±»å‹-2" class="header-anchor">#</a> TS ç±»å‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useFileDialog</span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> UseFileDialogOptions<span class="token punctuation">)</span><span class="token operator">:</span> UseFileDialogReturn<span class="token punctuation">;</span>
<span class="token comment">// å…¥å‚é…ç½®é¡¹</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseFileDialogOptions</span> <span class="token keyword">extends</span> <span class="token class-name">ConfigurableDocument</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ˜¯å¦æ”¯æŒå¤šä¸ª,é»˜è®¤ä¸º True</span>
    multiple<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// é™åˆ¶æ–‡ä»¶ç±»å‹ï¼Œé»˜è®¤ä¸º `*`</span>
    accept<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    capture<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseFileDialogReturn</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–åˆ°çš„æ–‡ä»¶</span>
    files<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>FileList <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰“å¼€æ–‡ä»¶é€‰æ‹©æ¡†çš„å‡½æ•°</span>
    <span class="token function-variable function">open</span><span class="token operator">:</span> <span class="token punctuation">(</span>localOptions<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&lt;</span>UseFileDialogOptions<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// é‡ç½®æ–‡ä»¶</span>
    <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="è¯¦ç»†ä¿¡æ¯-6"><a href="#è¯¦ç»†ä¿¡æ¯-6" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFileDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> files<span class="token punctuation">,</span> open<span class="token punctuation">,</span> reset <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>open()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Choose file<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>reset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åç§°ï¼š{{ files[0].name }}ï¼Œå¤§å°ï¼š{{ files[0].size }}å­—èŠ‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243638.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-usefiledialog"><a href="#å‚è§-https-vueuse-org-core-usefiledialog" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useFileDialog/</h5></li></ul> <h3 id="ğŸ’-usetitle"><a href="#ğŸ’-usetitle" class="header-anchor">#</a> ğŸ’ useTitle</h3> <p>åŠ¨æ€çš„è®¾ç½®å½“å‰é¡µé¢æ ‡é¢˜</p> <ul><li><h5 id="ç¤ºä¾‹-15"><a href="#ç¤ºä¾‹-15" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useTitle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">// ä¿®æ”¹å½“å‰æ ‡é¢˜</span>
</code></pre></div><p>å…¥å‚ä¸ºé»˜è®¤æ ‡é¢˜ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">&quot;åˆå§‹æ ‡é¢˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ”¯æŒè®¡ç®—å±æ€§ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;ğŸŒ™ æ™šä¸Šå¥½!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜€ï¸ æ—©ä¸Šå¥½!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ–è€… Getter å‡½æ•°</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;ğŸŒ™ æ™šä¸Šå¥½!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜€ï¸ æ—©ä¸Šå¥½!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usetitle"><a href="#å‚è§-https-vueuse-org-core-usetitle" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useTitle/</h5></li></ul> <h2 id="ç›‘å¬ç›¸å…³"><a href="#ç›‘å¬ç›¸å…³" class="header-anchor">#</a> ç›‘å¬ç›¸å…³</h2> <h3 id="onclickoutside"><a href="#onclickoutside" class="header-anchor">#</a> onClickOutside</h3> <p>å“åº”å¼ç›‘å¬å¯¹æŒ‡å®šå…ƒç´ å¤–çš„ç‚¹å‡»ï¼Œå¯¹æ¨¡å¼æˆ–ä¸‹æ‹‰èœå•å¾ˆæœ‰ç”¨ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-16"><a href="#ç¤ºä¾‹-16" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onClickOutside</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> event <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç‚¹å‡»å…ƒç´ å¤–&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243091.gif" alt="demo" style="zoom:80%;"> <p>æä¾›æ— æ¸²æŸ“ç»„ä»¶ç‰ˆæœ¬ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OnClickOutside</span>
    <span class="token attr-name">@trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
        ignore: [
            /* ... */
        ],
    }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘å¤–é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OnClickOutside</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-onclickoutside"><a href="#å‚è§-https-vueuse-org-core-onclickoutside" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/onClickOutside/</h5></li></ul> <h3 id="useelementhover"><a href="#useelementhover" class="header-anchor">#</a> useElementHover</h3> <p>å“åº”å¼ç›‘å¬å¯¹å…ƒç´ çš„æ‚¬åœçŠ¶æ€ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-17"><a href="#ç¤ºä¾‹-17" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useElementHover <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isHovered <span class="token operator">=</span> <span class="token function">useElementHover</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>isHovered<span class="token punctuation">,</span> <span class="token parameter">nV</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nV <span class="token operator">?</span> <span class="token string">&quot;è¿›æ¥äº†&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å‡ºå»äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243468.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-useelementhover"><a href="#å‚è§-https-vueuse-org-core-useelementhover" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useElementHover/</h5></li></ul> <h3 id="ğŸ’-useinfinitescroll"><a href="#ğŸ’-useinfinitescroll" class="header-anchor">#</a> ğŸ’ useInfiniteScroll</h3> <p>æ— é™æ»šåŠ¨ï¼Œç›‘å¬æŒ‡å®šå…ƒç´ çš„æ»šåŠ¨æ¡åˆ°åº•åæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-7"><a href="#è¯¦ç»†ä¿¡æ¯-7" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå…ƒç´ ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p> <p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé…ç½®é¡¹å¯¹è±¡ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseInfiniteScrollOptions</span> <span class="token keyword">extends</span> <span class="token class-name">UseScrollOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·ç¦»æŒ‡å®šæ–¹å‘åˆ°å¤´å¤šå°‘åƒç´ æ—¶è§¦å‘å›è°ƒå‡½æ•°ï¼Œé»˜è®¤ä¸º `0`</span>
    distance<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// æŒ‡å®šç›‘å¬çš„æ–¹ä½ï¼Œé»˜è®¤ä¸º `bottom`</span>
    direction<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;bottom&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;left&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯å¦æ¯æ¬¡è§¦å‘å›è°ƒåå›åˆ°åŸç‚¹ï¼Œé»˜è®¤ä¸º `False`</span>
    preserveScrollPosition<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="ç¤ºä¾‹-18"><a href="#ç¤ºä¾‹-18" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>ç›‘å¬ window æ»šåŠ¨æ¡åˆ°åº•å¢åŠ å…ƒç´ é«˜åº¦ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementSize</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useInfiniteScroll</span><span class="token punctuation">(</span>
    window<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        distance<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243980.gif" alt="demo" style="zoom:80%;"> <p>æ— é™æ·»åŠ å…ƒç´ ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useInfiniteScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useInfiniteScroll</span><span class="token punctuation">(</span>
    main<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> items<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            items<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243042.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-useinfinitescroll"><a href="#å‚è§-https-vueuse-org-core-useinfinitescroll" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useInfiniteScroll/</h5></li></ul> <h3 id="ğŸ’-usescroll"><a href="#ğŸ’-usescroll" class="header-anchor">#</a> ğŸ’ useScroll</h3> <p>å“åº”å¼è·å–æŒ‡å®šå…ƒç´ æ»šåŠ¨æ¡çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œå¦‚æ»šåŠ¨æ˜¯å¦åˆ°åº•ã€æ˜¯å¦æ­£åœ¨æ»šåŠ¨ã€æ»šåŠ¨æ¡ä½ç½®å€¼ç­‰...</p> <ul><li><h5 id="ts-ç±»å‹-3"><a href="#ts-ç±»å‹-3" class="header-anchor">#</a> TS ç±»å‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useScroll</span><span class="token punctuation">(</span>
    element<span class="token operator">:</span> MaybeComputedRef<span class="token operator">&lt;</span>
        HTMLElement <span class="token operator">|</span> SVGElement <span class="token operator">|</span> Window <span class="token operator">|</span> Document <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
    <span class="token operator">&gt;</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseScrollOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ»šåŠ¨æ¡çš„ X è½´ä½ç½®å€¼</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>WritableComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨æ¡çš„ Y è½´ä½ç½®å€¼</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>WritableComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨æ¡æ˜¯å¦æ­£åœ¨æ»šåŠ¨</span>
    isScrolling<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨æ¡ä½ç½®çŠ¶æ€</span>
    arrivedState<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `åº•éƒ¨`æ»šåŠ¨æ¡æ˜¯å¦åœ¨`æœ€å·¦è¾¹`ï¼Œå³ `X` æ˜¯å¦ä¸º `0`</span>
        left<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `åº•éƒ¨`æ»šåŠ¨æ¡æ˜¯å¦åœ¨`æœ€å³è¾¹`ï¼Œå³ `X` æ˜¯å¦ä¸º`æœ€å¤§`</span>
        right<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `å³è¾¹`æ»šåŠ¨æ¡æ˜¯å¦åœ¨`æœ€ä¸Šé¢`ï¼Œå³ `Y` æ˜¯å¦ä¸º `0`</span>
        top<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `å³è¾¹`æ»šåŠ¨æ¡æ˜¯å¦åœ¨`æœ€ä¸‹é¢`ï¼Œå³ `Y` æ˜¯å¦ä¸º`æœ€å¤§`</span>
        bottom<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨æ¡è¿åŠ¨çŠ¶æ€</span>
    directions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `åº•éƒ¨`æ»šåŠ¨æ¡æ˜¯å¦æ­£åœ¨å‘`å·¦`æ»šåŠ¨</span>
        left<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `åº•éƒ¨`æ»šåŠ¨æ¡æ˜¯å¦æ­£åœ¨å‘`å³`æ»šåŠ¨</span>
        right<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `å³è¾¹`æ»šåŠ¨æ¡æ˜¯å¦æ­£åœ¨å‘`ä¸Š`æ»šåŠ¨</span>
        top<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `å³è¾¹`æ»šåŠ¨æ¡æ˜¯å¦æ­£åœ¨å‘`ä¸‹`æ»šåŠ¨</span>
        bottom<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="è¯¦ç»†ä¿¡æ¯-8"><a href="#è¯¦ç»†ä¿¡æ¯-8" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŒ‡å®šç›‘å¬çš„å…ƒç´ ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºæŒ‡å®šçš„é…ç½®é¡¹å¯¹è±¡ï¼Œç±»å‹å¦‚ä¸‹ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseScrollOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// èŠ‚æµäº‹ä»¶ï¼Œé»˜è®¤ä¸º `0`</span>
    throttle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨ç»“æŸæ—¶çš„æ£€æŸ¥æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º `200`</span>
    <span class="token comment">// å½“`throttle`è¢«é…ç½®æ—¶ï¼Œæ­¤é…ç½®å°†è¢«è®¾ç½®ä¸º `(throttle + idle)`ã€‚</span>
    idle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// ä»¥xåƒç´ åç§»åˆ°è¾¾çŠ¶æ€ï¼Œä¸çŸ¥é“æœ‰å•¥ç”¨</span>
    offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        left<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        right<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        top<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        bottom<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨ä¸­è§¦å‘</span>
    onScroll<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨åœæ­¢è§¦å‘</span>
    onStop<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// æ»šåŠ¨äº‹ä»¶çš„ç›‘å¬å™¨é€‰é¡¹</span>
    <span class="token comment">// é»˜è®¤ä¸º `{capture: false, passive: true}`</span>
    eventListenerOptions<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> AddEventListenerOptions<span class="token punctuation">;</span>
    <span class="token comment">// å½“è®¾ç½®æ»šåŠ¨æ¡ä½ç½®æ—¶æ˜¯å¦å¼€å¯å¹³æ»‘ç§»åŠ¨ï¼Œé»˜è®¤å€¼ä¸º `auto`ï¼Œå¯é€‰å€¼ä¸º `smooth`</span>
    behavior<span class="token operator">?</span><span class="token operator">:</span> MaybeComputedRef<span class="token operator">&lt;</span>ScrollBehavior<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿”å›å€¼ä¸ºï¼šè§ä¸Šæ–¹ TS ç±»å‹ã€‚</p></li> <li><h5 id="ç¤ºä¾‹-19"><a href="#ç¤ºä¾‹-19" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>æ‰‹åŠ¨æ— é™æ·»åŠ å…ƒç´ ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> directions<span class="token punctuation">,</span> arrivedState <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useScroll</span><span class="token punctuation">(</span>main<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arrivedState<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> items<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            items<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>y += 200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å»ä¸‹é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>y -= 200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å»ä¸Šé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243990.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-usescroll"><a href="#å‚è§-https-vueuse-org-core-usescroll" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useScroll/</h5></li></ul> <h3 id="usetextselection"><a href="#usetextselection" class="header-anchor">#</a> useTextSelection</h3> <p>å“åº”å¼è·å–ç”¨æˆ·é€‰ä¸­æ–‡æœ¬</p> <ul><li><h5 id="ç¤ºä¾‹-20"><a href="#ç¤ºä¾‹-20" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTextSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243499.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-core-usetextselection"><a href="#å‚è§-https-vueuse-org-core-usetextselection" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useTextSelection/</h5></li></ul> <h2 id="åŠ¨ç”»ç›¸å…³"><a href="#åŠ¨ç”»ç›¸å…³" class="header-anchor">#</a> åŠ¨ç”»ç›¸å…³</h2> <h3 id="usetransition"><a href="#usetransition" class="header-anchor">#</a> useTransition</h3> <p>ç›‘å¬æºå€¼çš„ä¿®æ”¹ï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥è¿‡æ¸¡å½¢å¼ä¸æ–­ä¿®æ”¹çš„åŸå€¼é•œåƒã€‚</p> <ul><li><h5 id="ts-ç±»å‹-4"><a href="#ts-ç±»å‹-4" class="header-anchor">#</a> TS ç±»å‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>
    source<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseTransitionOptions
<span class="token punctuation">)</span><span class="token operator">:</span> ComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useTransition</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span>
    source<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseTransitionOptions
<span class="token punctuation">)</span><span class="token operator">:</span> ComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="è¯¦ç»†ä¿¡æ¯-9"><a href="#è¯¦ç»†ä¿¡æ¯-9" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç›‘å¬çš„å¯¹è±¡å€¼ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºé…ç½®é¡¹å¯¹è±¡ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseTransitionOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¼€å§‹ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ï¼Œå•ä½ä¸º `ms`ï¼Œé»˜è®¤ä¸º 0</span>
    delay<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯å¦ç¦ç”¨è¿‡æ¸¡æ•ˆæœ</span>
    disabled<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿‡æ¸¡æŒç»­çš„æ—¶é—´ï¼Œå•ä½ä¸º `ms`</span>
    duration<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿‡æ¸¡å®Œæˆæ—¶æ‰§è¡Œçš„å›è°ƒ</span>
    onFinished<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿‡æ¸¡å¼€å§‹æ—¶æ‰§è¡Œçš„å›è°ƒ</span>
    onStarted<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// æŒ‡å®šè´å¡å°”æ›²çº¿ï¼Œå€¼ä¸º [x,x,x,x]</span>
    transition<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span>EasingFunction <span class="token operator">|</span> CubicBezierPoints<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="ç¤ºä¾‹-21"><a href="#ç¤ºä¾‹-21" class="header-anchor">#</a> ç¤ºä¾‹</h5> <p>æ•°å­—è¿‡æ¸¡æ•ˆæœï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¿®æ”¹ num çš„å€¼ä¼šä»¥`è¿‡æ¸¡`çš„å½¢å¼æ”¹å˜ tNum çš„å€¼</span>
<span class="token keyword">const</span> tNum <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.34</span><span class="token punctuation">,</span> <span class="token number">0.52</span><span class="token punctuation">,</span> <span class="token number">0.91</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num += 500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å¢åŠ 500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        {{ tNum.toFixed(0) }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243498.gif" alt="demo" style="zoom:80%;"></li></ul> <p>HSL é¢œè‰²è¿‡æ¸¡æ•ˆæœï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¿®æ”¹ color çš„å€¼ä¼šä»¥`è¿‡æ¸¡`çš„å½¢å¼æ”¹å˜ outHalColor çš„å€¼</span>
<span class="token comment">// outHalColor ä¸º color çš„`é•œåƒ`</span>
<span class="token keyword">const</span> outHalColor <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.34</span><span class="token punctuation">,</span> <span class="token number">0.52</span><span class="token punctuation">,</span> <span class="token number">0.91</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hslStyle <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>h<span class="token punctuation">,</span> s<span class="token punctuation">,</span> l<span class="token punctuation">]</span> <span class="token operator">=</span> outHalColor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>h<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">deg, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>l<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Hue - è‰²ç›¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[0]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>360<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Saturation - é¥±å’Œåº¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[1]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Lightness - äº®åº¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[2]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: hslStyle }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ hslStyle }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243283.gif" alt="demo" style="zoom:80%;"> <ul><li><h5 id="å‚è§-https-vueuse-org-core-usetransition"><a href="#å‚è§-https-vueuse-org-core-usetransition" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useTransition/</h5></li></ul> <h2 id="å¢å¼º-watch"><a href="#å¢å¼º-watch" class="header-anchor">#</a> å¢å¼º Watch</h2> <h3 id="watcharray"><a href="#watcharray" class="header-anchor">#</a> watchArray</h3> <p><code>watchArray</code> æ›´åŠ ä¾§é‡äºç›‘å¬æ•°ç»„æºå¯¹è±¡ã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-10"><a href="#è¯¦ç»†ä¿¡æ¯-10" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç›‘å¬çš„å“åº”å¼æ•°ç»„å¯¹è±¡ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å½¢å‚å¦‚ä¸‹ï¼š</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name">WatchArrayCallback<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">OV</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token comment">// æ–°å€¼</span>
    value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">,</span>
    <span class="token comment">// æ—§å€¼</span>
    oldValue<span class="token operator">:</span> <span class="token constant">OV</span><span class="token punctuation">,</span>
    <span class="token comment">// æ·»åŠ çš„å…ƒç´ ï¼Œç”¨ `[]` åŒ…è£¹</span>
    added<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">,</span>
    <span class="token comment">// ç§»é™¤çš„å…ƒç´ ï¼Œç”¨ `[]` åŒ…è£¹</span>
    removed<span class="token operator">:</span> <span class="token constant">OV</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‰§è¡Œå›è°ƒå‡½æ•°å‰çš„æ¸…ç†å‡½æ•°</span>
    <span class="token function-variable function">onCleanup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token function-variable function">cleanupFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><h5 id="ç¤ºä¾‹-22"><a href="#ç¤ºä¾‹-22" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchArray <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watchArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token punctuation">(</span>newList<span class="token punctuation">,</span> oldList<span class="token punctuation">,</span> added<span class="token punctuation">,</span> removed<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>added<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-shared-watcharray"><a href="#å‚è§-https-vueuse-org-shared-watcharray" class="header-anchor">#</a> å‚è§ https://vueuse.org/shared/watchArray/</h5></li></ul> <h3 id="watchdebounced"><a href="#watchdebounced" class="header-anchor">#</a> watchDebounced</h3> <p>ä¸ºæ™®é€šçš„ <code>watch</code> å¢åŠ é˜²æŠ–åŠŸèƒ½</p> <ul><li><h5 id="ç¤ºä¾‹-23"><a href="#ç¤ºä¾‹-23" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">watchThrottled</span><span class="token punctuation">(</span>
    source<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;changed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> debounce<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243408.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-shared-watchdebounced"><a href="#å‚è§-https-vueuse-org-shared-watchdebounced" class="header-anchor">#</a> å‚è§ https://vueuse.org/shared/watchDebounced/</h5></li></ul> <h3 id="watchthrottled"><a href="#watchthrottled" class="header-anchor">#</a> watchThrottled</h3> <p>ä¸ºæ™®é€šçš„ <code>watch</code> å¢åŠ èŠ‚æµåŠŸèƒ½</p> <ul><li><h5 id="ç¤ºä¾‹-24"><a href="#ç¤ºä¾‹-24" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">watchThrottled</span><span class="token punctuation">(</span>
    source<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;changed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> throttle<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-shared-watchthrottled"><a href="#å‚è§-https-vueuse-org-shared-watchthrottled" class="header-anchor">#</a> å‚è§ https://vueuse.org/shared/watchThrottled/</h5></li></ul> <h3 id="watchpausable"><a href="#watchpausable" class="header-anchor">#</a> watchPausable</h3> <p>ä¸ºæ™®é€šçš„ <code>watch</code> å¢åŠ æš‚åœã€æ¢å¤ã€åœæ­¢åŠŸèƒ½</p> <ul><li><h5 id="ç¤ºä¾‹-25"><a href="#ç¤ºä¾‹-25" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// stop   åˆ é™¤ç›‘å¬å™¨</span>
<span class="token comment">// pause  æš‚åœç›‘å¬å™¨</span>
<span class="token comment">// resume æ¢å¤ç›‘å¬å™¨</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> stop<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> resume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">watchPausable</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> v <span class="token operator">=&gt;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Changed to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-watchpausable"><a href="#å‚è§-https-vueuse-org-core-watchpausable" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/watchPausable/</h5></li></ul> <h2 id="æ—¶é—´ç›¸å…³"><a href="#æ—¶é—´ç›¸å…³" class="header-anchor">#</a> æ—¶é—´ç›¸å…³</h2> <h3 id="usenow"><a href="#usenow" class="header-anchor">#</a> useNow</h3> <p>å“åº”å¼è·å–å½“å‰æ—¶é—´ï¼šæ ¼å¼ä¸º <code>Now: Tue Dec 20 2022 xx:xx:xx GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</code></p> <ul><li><h5 id="ç¤ºä¾‹-26"><a href="#ç¤ºä¾‹-26" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> now<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> resume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> controls<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="å‚è§-https-vueuse-org-core-usenow"><a href="#å‚è§-https-vueuse-org-core-usenow" class="header-anchor">#</a> å‚è§ https://vueuse.org/core/useNow/</h5></li></ul> <h3 id="usedateformat"><a href="#usedateformat" class="header-anchor">#</a> useDateFormat</h3> <p>æ ¹æ®ä¼ å…¥çš„æ ‡è®°å­—ç¬¦ä¸²è·å–æ ¼å¼åŒ–çš„æ—¥æœŸã€‚</p> <ul><li><h5 id="è¯¦ç»†ä¿¡æ¯-11"><a href="#è¯¦ç»†ä¿¡æ¯-11" class="header-anchor">#</a> è¯¦ç»†ä¿¡æ¯</h5> <p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ—¶é—´|æ—¥æœŸä¿¡æ¯ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ ¼å¼åŒ–é…ç½®ã€‚</p> <ul><li><p>å¸¸ç”¨ï¼š<code>YYYY-MM-DD HH:mm:ss</code> å¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’</p> <ul><li><table><thead><tr><th style="text-align:center;">è¾“å…¥</th> <th style="text-align:center;">è¾“å‡º</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>YY</code></td> <td style="text-align:center;">18</td> <td>å¹´ä»½ï¼šä¸¤ä½æ•°</td></tr> <tr><td style="text-align:center;"><code>YYYY</code></td> <td style="text-align:center;">2018</td> <td>å¹´ä»½ï¼šå››ä½æ•°</td></tr> <tr><td style="text-align:center;"><code>M</code></td> <td style="text-align:center;">1-12</td> <td>æœˆä»½ï¼šä¸€ä½æ•°</td></tr> <tr><td style="text-align:center;"><code>MM</code></td> <td style="text-align:center;">01-12</td> <td>æœˆä»½ï¼šä¸¤ä½æ•°</td></tr> <tr><td style="text-align:center;"><code>MMM</code></td> <td style="text-align:center;">Jan-Dec</td> <td>æœˆä»½ç®€å†™</td></tr> <tr><td style="text-align:center;"><code>MMMM</code></td> <td style="text-align:center;">January-December</td> <td>æœˆä»½ç®€å†™</td></tr> <tr><td style="text-align:center;"><code>D</code></td> <td style="text-align:center;">1-31</td> <td>æ—¥æœŸï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>DD</code></td> <td style="text-align:center;">01-31</td> <td>æ—¥æœŸï¼šäºŒä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>H</code></td> <td style="text-align:center;">0-23</td> <td>äºŒåå››å°æ—¶åˆ¶ï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>HH</code></td> <td style="text-align:center;">00-23</td> <td>äºŒåå››å°æ—¶åˆ¶ï¼šäºŒä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>h</code></td> <td style="text-align:center;">1-12</td> <td>åäºŒå°æ—¶åˆ¶ï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>hh</code></td> <td style="text-align:center;">01-12</td> <td>åäºŒå°æ—¶åˆ¶ï¼šäºŒä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>m</code></td> <td style="text-align:center;">0-59</td> <td>åˆ†é’Ÿï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>mm</code></td> <td style="text-align:center;">00-59</td> <td>åˆ†é’Ÿï¼šäºŒä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>s</code></td> <td style="text-align:center;">0-59</td> <td>ç§’ï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>ss</code></td> <td style="text-align:center;">00-59</td> <td>ç§’ï¼šä¸€ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>SSS</code></td> <td style="text-align:center;">000-999</td> <td>æ¯«ç§’ï¼šä¸‰ä½æ•°å¼€å§‹</td></tr> <tr><td style="text-align:center;"><code>A</code></td> <td style="text-align:center;">AM PM</td> <td>å¤§å†™ä¸Šä¸‹åˆæ—¶é—´</td></tr> <tr><td style="text-align:center;"><code>AA</code></td> <td style="text-align:center;">A.M. P.M.</td> <td>å¤§å†™ä¸Šä¸‹åˆæ—¶é—´ï¼šå¸¦ <code>.</code></td></tr> <tr><td style="text-align:center;"><code>a</code></td> <td style="text-align:center;">am pm</td> <td>å°å†™ä¸Šä¸‹åˆæ—¶é—´</td></tr> <tr><td style="text-align:center;"><code>aa</code></td> <td style="text-align:center;">a.m. p.m.</td> <td>å°å†™ä¸Šä¸‹åˆæ—¶é—´ï¼šå¸¦ <code>.</code></td></tr> <tr><td style="text-align:center;"><code>d</code></td> <td style="text-align:center;">0-6</td> <td>æ˜ŸæœŸå‡ ï¼šå‘¨æ—¥ä¸º <code>0</code></td></tr> <tr><td style="text-align:center;"><code>dd</code></td> <td style="text-align:center;">S-S</td> <td>æ˜ŸæœŸå‡ çš„æœ€å°åç§°</td></tr> <tr><td style="text-align:center;"><code>ddd</code></td> <td style="text-align:center;">Sun-Sat</td> <td>ä¸€å‘¨ä¸­ä¸€å¤©çš„ç®€ç§°</td></tr> <tr><td style="text-align:center;"><code>dddd</code></td> <td style="text-align:center;">Sunday-Saturday</td> <td>ä¸€å‘¨ä¸­ä¸€å¤©çš„å…¨ç§°</td></tr></tbody></table></li></ul></li></ul> <p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé…ç½®é¡¹å¯¹è±¡ã€‚</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseDateFormatOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®åœ°åŒºï¼Œé…åˆ `dd/ddd/dddd/MMM/MMMM` æ ¼å¼åŒ–ä½¿ç”¨</span>
    locales<span class="token operator">?</span><span class="token operator">:</span> Intl<span class="token punctuation">.</span>LocalesArgument<span class="token punctuation">;</span>
    <span class="token comment">// ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œç”¨äºé‡æ–°ä¿®æ”¹å­åˆçº¿çš„æ˜¾ç¤ºæ–¹å¼</span>
    customMeridiem<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>
        hours<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
        minutes<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
        isLowercase<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
        hasPeriod<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p>è¿”å›å€¼ä¸ºæ ¼å¼åŒ–åçš„æ—¥æœŸå­—ç¬¦ä¸²</p> <ul><li><h5 id="ç¤ºä¾‹-27"><a href="#ç¤ºä¾‹-27" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNow<span class="token punctuation">,</span> useDateFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formatted <span class="token operator">=</span> <span class="token function">useDateFormat</span><span class="token punctuation">(</span><span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><h5 id="å‚è§-https-vueuse-org-shared-usedateformat"><a href="#å‚è§-https-vueuse-org-shared-usedateformat" class="header-anchor">#</a> å‚è§ https://vueuse.org/shared/useDateFormat/</h5></li></ul> <h2 id="å·¥å…·ç›¸å…³"><a href="#å·¥å…·ç›¸å…³" class="header-anchor">#</a> å·¥å…·ç›¸å…³</h2> <h3 id="usetoggle"><a href="#usetoggle" class="header-anchor">#</a> useToggle</h3> <p>æ¥æ”¶ä¸€ä¸ªå¸ƒå°”å€¼ä½œä¸ºå…¥å‚ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°å¯ä»¥åˆ‡æ¢æºå€¼çš„å¸ƒå°”å€¼ã€‚</p> <ul><li><h5 id="ç¤ºä¾‹-28"><a href="#ç¤ºä¾‹-28" class="header-anchor">#</a> ç¤ºä¾‹</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> switchBool <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">switchBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token function">switchBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091244371.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="å‚è§-https-vueuse-org-shared-usetoggle"><a href="#å‚è§-https-vueuse-org-shared-usetoggle" class="header-anchor">#</a> å‚è§ https://vueuse.org/shared/useToggle/</h5></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#ğŸŒŒ-è·å–" title="ğŸŒŒ è·å–">ğŸŒŒ è·å–</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#npm" title="NPM">NPM</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#cdn" title="CDN">CDN</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ğŸ›«-æœ€ä½³å®è·µ" title="ğŸ›« æœ€ä½³å®è·µ">ğŸ›« æœ€ä½³å®è·µ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ç»“æ„" title="ç»“æ„">ç»“æ„</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å°†-ref-ä½œä¸ºå‚æ•°ä¼ é€’" title="å°† Ref ä½œä¸ºå‚æ•°ä¼ é€’">å°† Ref ä½œä¸ºå‚æ•°ä¼ é€’</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æ— æ¸²æŸ“ç»„ä»¶" title="æ— æ¸²æŸ“ç»„ä»¶">æ— æ¸²æŸ“ç»„ä»¶</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#state-çŠ¶æ€ç›¸å…³" title="State çŠ¶æ€ç›¸å…³">State çŠ¶æ€ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#userefhistory" title="useRefHistory">useRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usemanualrefhistory" title="useManualRefHistory">useManualRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedebouncedrefhistory" title="useDebouncedRefHistory">useDebouncedRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usethrottledrefhistory" title="useThrottledRefHistory">useThrottledRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usestorage" title="ğŸ’ useStorage">ğŸ’ useStorage</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usesessionstorage" title="useSessionStorage">useSessionStorage</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#uselocalstorage" title="useLocalStorage">useLocalStorage</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#dom-å…ƒç´ ç›¸å…³" title="DOM å…ƒç´ ç›¸å…³">DOM å…ƒç´ ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useactiveelement" title="useActiveElement">useActiveElement</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-useelementbounding" title="ğŸ’ useElementBounding">ğŸ’ useElementBounding</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useelementsize" title="useElementSize">useElementSize</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-useelementvisibility" title="ğŸ’ useElementVisibility">ğŸ’ useElementVisibility</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usemouseinelement" title="ğŸ’ useMouseInElement">ğŸ’ useMouseInElement</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usewindowscroll" title="ğŸ’ useWindowScroll">ğŸ’ useWindowScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usewindowsize" title="ğŸ’ useWindowSize">ğŸ’ useWindowSize</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#bom-ç›¸å…³" title="BOM ç›¸å…³">BOM ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedark" title="useDark">useDark</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-useeventlistener" title="ğŸ’ useEventListener">ğŸ’ useEventListener</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usefiledialog" title="ğŸ’ useFileDialog">ğŸ’ useFileDialog</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usetitle" title="ğŸ’ useTitle">ğŸ’ useTitle</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ç›‘å¬ç›¸å…³" title="ç›‘å¬ç›¸å…³">ç›‘å¬ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#onclickoutside" title="onClickOutside">onClickOutside</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useelementhover" title="useElementHover">useElementHover</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-useinfinitescroll" title="ğŸ’ useInfiniteScroll">ğŸ’ useInfiniteScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ğŸ’-usescroll" title="ğŸ’ useScroll">ğŸ’ useScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetextselection" title="useTextSelection">useTextSelection</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#åŠ¨ç”»ç›¸å…³" title="åŠ¨ç”»ç›¸å…³">åŠ¨ç”»ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetransition" title="useTransition">useTransition</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å¢å¼º-watch" title="å¢å¼º Watch">å¢å¼º Watch</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watcharray" title="watchArray">watchArray</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchdebounced" title="watchDebounced">watchDebounced</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchthrottled" title="watchThrottled">watchThrottled</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchpausable" title="watchPausable">watchPausable</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æ—¶é—´ç›¸å…³" title="æ—¶é—´ç›¸å…³">æ—¶é—´ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usenow" title="useNow">useNow</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedateformat" title="useDateFormat">useDateFormat</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å·¥å…·ç›¸å…³" title="å·¥å…·ç›¸å…³">å·¥å…·ç›¸å…³</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetoggle" title="useToggle">useToggle</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>è¯¥ç½‘ç«™ä½¿ç”¨ vuepress + @vuepress/theme-blog æ­å»º â€”â€” by: Big Rice Â© 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/bigRiceRice.io/dist/assets/js/app.1ab36bb0.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/62.42d890ab.js" defer></script>
  </body>
</html>
