<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueUse - 超强的 Vue Hook 工具库 | Big Rice 🍚</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="根据 VueUse 官方文档整理的一些 API 手册">
    
    <link rel="preload" href="/bigRiceRice.io/dist/assets/css/0.styles.425f9a7f.css" as="style"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/app.1ab36bb0.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" as="script"><link rel="preload" href="/bigRiceRice.io/dist/assets/js/62.42d890ab.js" as="script"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/10.5590a827.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/11.168de83c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/12.568a4166.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/13.2a842132.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/14.a3bf35c8.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/15.73f8924b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/16.a1436b30.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/17.313e1789.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/18.b25a5446.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/19.b1cb79cd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/20.6ed4eadb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/21.85a3511a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/22.cb313a94.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/23.25fd78cd.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/24.471429ef.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/25.3a1e5f8f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/26.3f8ff577.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/27.0853cfce.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/28.ee76b4d9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/29.0226dfe3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/30.53e58f2b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/31.73b312ac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/32.8e24d0c3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/33.e9c1b639.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/34.7a8c94b5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/35.a16fc359.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/36.e8870ca7.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/37.93f48cd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/38.be899865.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/39.2d92cc26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/4.cb5dc486.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/40.9348ddae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/41.ac71460e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/42.437e7888.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/43.26376eac.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/44.b69b697f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/45.3ca71423.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/46.560db7ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/47.fa57f3e9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/48.a343344e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/49.4d7bf943.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/5.44ec780a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/50.ad5e5ae9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/51.60f76d0f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/52.9ec1bd2e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/53.506fdaeb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/54.210b57cb.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/55.495f17ce.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/56.938a3529.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/57.6624e608.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/58.1f35c496.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/59.ac0a7da9.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/60.905fe27a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/61.4d4c2383.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/63.b6c66778.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/64.d298e54c.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/65.e3a74f1d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/66.4bf0888d.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/67.830c3f18.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/68.93f88e77.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/69.3d8d8b58.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/7.a918f9c2.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/70.7cdaf442.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/71.7543f1ae.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/72.9039b416.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/73.1da63caa.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/74.8d438fd4.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/75.e082d0f6.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/76.f2431b7b.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/77.8f4d73ee.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/78.1224ea26.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/79.0a70005e.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/8.45199285.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/80.99aff656.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/81.e4a37126.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/82.9c2059c3.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/83.47b33f69.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/84.92de7f3f.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/85.bba0081a.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/9.2eadd3a5.js"><link rel="prefetch" href="/bigRiceRice.io/dist/assets/js/vuejs-paginate.bd98283b.js">
    <link rel="stylesheet" href="/bigRiceRice.io/dist/assets/css/0.styles.425f9a7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/bigRiceRice.io/dist/" class="nav-link home-link">Big Rice 🍚 </a> <button class="back" style="display:;">↩</button></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">框架</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/bigRiceRice.io/dist/" class="nav-link mobile-home-link">Big Rice 🍚 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/FrameWork/" class="nav-link">框架</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/Css/" class="nav-link">Css</a></li><li class="mobile-nav-item"><a href="/bigRiceRice.io/dist/API/" class="nav-link">API</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        VueUse - 超强的 Vue Hook 工具库
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BigRice</span> <span itemprop="address">   in 云梦泽</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-12-20T00:00:00.000Z">
      2021-12-20
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/Vue3" data-v-42ccfcd5><span data-v-42ccfcd5>Vue3</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/bigRiceRice.io/dist/tag/API VueUse" data-v-42ccfcd5><span data-v-42ccfcd5>API VueUse</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="🌌-获取"><a href="#🌌-获取" class="header-anchor">#</a> 🌌 获取</h2> <h3 id="npm"><a href="#npm" class="header-anchor">#</a> NPM</h3> <p>执行 <code>yarn add @vueuse/core | npm install @vueuse/core</code> 安装。</p> <p>使用 <code>ESMoudle</code> 语法从 <code>@vueuse/core</code> 引用函数使用即可：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLocalStorage<span class="token punctuation">,</span> useMouse<span class="token punctuation">,</span> usePreferredDark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 跟踪鼠标位置</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 当前是否为黑色主题</span>
        <span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">usePreferredDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将状态保存在localStorage中</span>
        <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useLocalStorage</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> isDark<span class="token punctuation">,</span> store <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cdn"><a href="#cdn" class="header-anchor">#</a> CDN</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@vueuse/shared<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@vueuse/core<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>将以全局的形式暴露给 <code>window.VueUse</code></p> <h2 id="🛫-最佳实践"><a href="#🛫-最佳实践" class="header-anchor">#</a> 🛫 最佳实践</h2> <h3 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h3> <p>VueUse 中绝大多数函数都返回一组 Refs 对象，可以使用 ES6 的对象结构来获取需要的值。例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useMouse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// &quot;x&quot; 与 &quot;y&quot; 是 Ref 对象</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="将-ref-作为参数传递"><a href="#将-ref-作为参数传递" class="header-anchor">#</a> 将 Ref 作为参数传递</h3> <p>在 Vue 中，可以使用 <code>setup()</code> 函数来构建数据和逻辑之间的“联系”。</p> <p>为了使其灵活，大多数 VueUse 函数还接受参数的 Ref 版本。</p> <p>这里使用 <code>useTitle</code> 来举例：</p> <ul><li><h5 id="正常使用"><a href="#正常使用" class="header-anchor">#</a> 正常使用</h5> <p>通常 <code>useTitle</code> 返回一个页面标题的 Ref 对象，当它的值修改时，页面的标题也会随之修改。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">&quot;VueUse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watch</span><span class="token punctuation">(</span>isDark<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">.</span>value <span class="token operator">=</span> isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;🌙 晚上好!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☀️ 早上好!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="计算参数"><a href="#计算参数" class="header-anchor">#</a> 计算参数</h5> <p>也可以动态的设置 <code>useTitle</code> 的入参值来达到修改标题。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;🌙 晚上好!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☀️ 早上好!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="getter"><a href="#getter" class="header-anchor">#</a> Getter</h5> <p>在 VueUse 9.0 以后支持了传入 Getter 函数的形式，使用上跟计算参数类似。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;🌙 晚上好!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☀️ 早上好!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="无渲染组件"><a href="#无渲染组件" class="header-anchor">#</a> 无渲染组件</h3> <p>VueUse 5.0 中引入了一个新包，<code>@vueuse/components</code> 可以提供某些函数的无渲染组件版本</p> <ul><li><h5 id="下载"><a href="#下载" class="header-anchor">#</a> 下载</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @vueuse/components <span class="token operator">|</span> <span class="token function">npm</span> <span class="token function">install</span> @vueuse/components
</code></pre></div></li> <li><h5 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h5> <p>例如：<code>onClickOutside</code> 是一个监听元素外点击事件的函数</p> <p>正常使用会代码会显得冗余，这个时候可以使用这个函数的无渲染组件版本。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onClickOutside <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token function">onClickOutside</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> close<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click Outside of Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>下面来看看无渲染组件版本：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> OnClickOutside <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/components&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OnClickOutside</span> <span class="token attr-name">@trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Click Outside of Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OnClickOutside</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>Script</code> 代码中简洁了许多。</p></li> <li><h5 id="获取返回值"><a href="#获取返回值" class="header-anchor">#</a> 获取返回值</h5> <p>我们可以访问作用域插槽来获取某些组件的返回值。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseMouse</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ x, y }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  x: {{ x }}
  y: {{ y }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseMouse</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseDark</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ isDark, toggleDark }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggleDark()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Is Dark: {{ isDark }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseDark</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="state-状态相关"><a href="#state-状态相关" class="header-anchor">#</a> State 状态相关</h2> <h3 id="userefhistory"><a href="#userefhistory" class="header-anchor">#</a> useRefHistory</h3> <p>基于代理对象追踪它的变更创建一个**“历史记录”**。并提供后退、前进、重置功能。</p> <ul><li><h5 id="详细信息"><a href="#详细信息" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为需要追踪的响应式对象，这个参数是必须的。</p> <p>第二个参数为可选的配置项对象：</p> <ul><li><code>deep</code> ：是否为每个历史记录创建克隆并整合为一个，默认为 <code>false</code>。</li> <li><code>dump</code> ：自定义历史记录值的序列化行为，可以传入一个函数来达到格式化的目的。
<ul><li><code>deep</code> 为 <code>true</code> 时才会执行。</li> <li>默认执行 <code>JSON.parse(JSON.stringify(xxx))</code>。</li></ul></li> <li><code>parse</code> ：自定义历史记录的解析行为。</li> <li><code>flush</code> ：创建历史记录的时机，默认为 <code>pre</code>，其他取值为 <code>sync</code>，<code>post</code>。</li></ul> <p>返回值为多个函数或对象：</p> <ul><li><p><code>history</code> ：历史记录对象，有两个属性。【<em>Object</em>】</p> <ul><li><code>snapshot</code> ：快照，即修改后的值。【<em>String</em>】</li> <li><code>timestamp</code> ：修改的时间戳。【<em>String</em>】</li></ul></li> <li><p><code>redo</code> ：前进。【<em>Function</em>】</p></li> <li><p><code>canRedo</code> ：是否可以前进。【<em>Boolean</em>】</p></li> <li><p><code>undo</code> ：后退。【<em>Function</em>】</p></li> <li><p><code>canUndo</code> ：是否可以后退。【<em>Boolean</em>】</p></li> <li><p><code>commit</code> ：手动提交创建一次历史记录。【<em>Function</em>】</p></li> <li><p><code>clear</code> ：使用最后一次历史记录的值重置历史记录列表。【<em>Function</em>】</p></li></ul></li> <li><h5 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h5> <p>追踪一个文本框的历史变更记录：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newTodo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo<span class="token punctuation">,</span> commit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>newTodo<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newTodo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>undo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后退<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>前进<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>手动提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>以下为历史记录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>{{ history }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>以上代码有一个错误，因为文本框已经绑定了 <code>vModel</code> ，所有每次修改都会自动触发 <code>commit</code> ，所以不需要再重复 <code>commit</code> 了。</li> <li>或者使用 <code>useManualRefHistory</code> 懒执行。</li></ul></li></ul> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091242992.gif" alt="demo" style="zoom:80%;"> <p>利用 <code>useRefHistory</code> 还可以创建一个简陋的 Todo-List，并达到“<strong>时光倒流</strong>”的效果：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newTodo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> todos <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo<span class="token punctuation">,</span> clear <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>todos<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newTodo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todos.unshift(newTodo), (newTodo = '')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>undo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后退<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>前进<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>{{ history }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>注意：这里配置项中的 <code>deep</code> 必须开启。</p> <ul><li><p>因为在使用对象或数组时，由于更改它们的属性不会更改引用，因此不会触发提交。</p></li> <li><p>或将 <code>flush</code> 配置项设置为 <code>post</code> ：在元素渲染后再添加快照。</p></li></ul></li></ul> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091242142.gif" alt="demo" style="zoom:80%;"> <p>设置存储历史记录的最大值：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> refHistory <span class="token operator">=</span> <span class="token function">useRefHistory</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    capacity<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token comment">// 限制为15条历史记录</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

refHistory<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清除所有历史记录</span>
</code></pre></div><ul><li><h5 id="参见-https-vueuse-org-core-userefhistory"><a href="#参见-https-vueuse-org-core-userefhistory" class="header-anchor">#</a> 参见 https://vueuse.org/core/useRefHistory/</h5></li></ul> <h3 id="usemanualrefhistory"><a href="#usemanualrefhistory" class="header-anchor">#</a> useManualRefHistory</h3> <p>懒执行版本的 <code>useRefHistory</code>，源对象修改不会自动追踪，必须要手动调用 <code>commit</code> 才会添加快照。</p> <ul><li><h5 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useManualRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useManualRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>

counter<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 如果 commit 不手动调用，那么快照不会添加！</span>
<span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>history<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* [
  { snapshot: 1, timestamp: 1601912898062 },
  { snapshot: 0, timestamp: 1601912898061 }
] */</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usemanualrefhistory"><a href="#参见-https-vueuse-org-core-usemanualrefhistory" class="header-anchor">#</a> 参见 https://vueuse.org/core/useManualRefHistory/</h5></li></ul> <h3 id="usedebouncedrefhistory"><a href="#usedebouncedrefhistory" class="header-anchor">#</a> useDebouncedRefHistory</h3> <p>用法与 <code>useRefHistory</code> 类似，可以添加一个值为 <code>number</code> 的 <code>debounce</code> “防抖”配置</p> <ul><li><h5 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDebouncedRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useDebouncedRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    debounce<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usedebouncedrefhistory"><a href="#参见-https-vueuse-org-core-usedebouncedrefhistory" class="header-anchor">#</a> 参见 https://vueuse.org/core/useDebouncedRefHistory/</h5></li></ul> <h3 id="usethrottledrefhistory"><a href="#usethrottledrefhistory" class="header-anchor">#</a> useThrottledRefHistory</h3> <p>用法与 <code>useRefHistory</code> 类似，可以添加一个值为 <code>number</code> 的 <code>throttle</code> “节流”配置</p> <ul><li><h5 id="示例-4"><a href="#示例-4" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useThrottledRefHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useThrottledRefHistory</span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    throttle<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usethrottledrefhistory"><a href="#参见-https-vueuse-org-core-usethrottledrefhistory" class="header-anchor">#</a> 参见 https://vueuse.org/core/useThrottledRefHistory/</h5></li></ul> <h3 id="💎-usestorage"><a href="#💎-usestorage" class="header-anchor">#</a> 💎 useStorage</h3> <p>返回一个 Ref 对象，并响应式的设置 <code>LocalStorage</code> 或 <code>SessionStorage</code> 中的值。</p> <ul><li><h5 id="详细信息-2"><a href="#详细信息-2" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为键名，必须为字符串。</p> <p>第二个参数为默认值，当指定的 <code>Storage</code> 中没有该键时，创建一个对应的键并设置该参数值。</p> <ul><li>这个参数是必须的，它可以同时指定值的类型，假如将这个参数的类型设置为基本类型，修改源值为对象或数组将不会经过序列化。</li></ul> <p>第三个参数为<strong>可选</strong>指定的 <code>Storage</code>，可传入 <code>LocalStorage</code> 或 <code>SessionStorage</code>，默认为 <code>LocalStorage</code>。</p> <p>第四个参数是<strong>可选</strong>的配置项：</p> <ul><li><p>TS 类型如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseStorageOptions<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span>
    <span class="token keyword">extends</span> <span class="token class-name">ConfigurableEventFilter</span><span class="token punctuation">,</span>
        ConfigurableWindow<span class="token punctuation">,</span>
        ConfigurableFlush <span class="token punctuation">{</span>
    <span class="token comment">// 是否开启深度监听，默认为 True</span>
    deep<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// 是否监听 Storage 的修改，这在多标签页中有用，默认为 True</span>
    listenToStorageChanges<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// 当默认值或键不存在时，是否将其写入 Storage，默认为 True</span>
    writeDefaults<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// 当绑定的键上有值，是否将默认值进行浅合并，默认为 False</span>
    <span class="token comment">// 也可以传入一个自定义合并行为的函数</span>
    mergeDefaults<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>storageValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> defaults<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 自定义序列化行为,类型在下方</span>
    <span class="token comment">// 默认行为是遇到对象|数组使用 JSON.stringify / JSON.parse</span>
    <span class="token comment">// 遇到数字|字符串使用 Number.toString / parseFloat</span>
    serializer<span class="token operator">?</span><span class="token operator">:</span> Serializer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 错误回调函数 默认执行 `console.error</span>
    onError<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 是否使用浅引用作为参考，默认为 False</span>
    shallow<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Serializer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function">read</span><span class="token punctuation">(</span>raw<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token function">write</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Serializer 用法</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    serializer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当用户读取 localStorage.getItem('my-storage') 时触发</span>
        <span class="token comment">// 此函数必须返回 useStorage 的泛型类型</span>
        <span class="token function">read</span><span class="token punctuation">(</span>raw<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// raw 的类型是 string</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>raw<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 当 Ref 对象值修改时触发，初始化默认值也会自动触发一次</span>
        <span class="token comment">// 此函数必须返回 string 类型，因为要写入到 Storage 中</span>
        <span class="token function">write</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// value 的类型一定是泛型的类型</span>
            <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p>返回值是一个 <code>Ref</code> 对象，修改这个 <code>Ref</code> 对象的值也会同步修改 <code>Storage</code> 中的值。</p></li> <li><h5 id="示例-5"><a href="#示例-5" class="header-anchor">#</a> 示例</h5> <p>响应式更改 <code>LocalStorage</code> 。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> useStorage<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    storage<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243590.gif" alt="demo"></p> <p>响应式修改 <code>SessionStorage</code> 。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> storage <span class="token operator">=</span> useStorage<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;my-storage&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sessionStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    storage<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usestorage"><a href="#参见-https-vueuse-org-core-usestorage" class="header-anchor">#</a> 参见 https://vueuse.org/core/useStorage/</h5></li></ul> <h3 id="usesessionstorage"><a href="#usesessionstorage" class="header-anchor">#</a> useSessionStorage</h3> <p>返回一个 Ref 对象，并响应式的设置 <code>SessionStorage</code> 中的值。</p> <p>用法与 useStorage 类似，不过没有了 设置 Storage 的参数。</p> <ul><li><h5 id="参见-https-vueuse-org-core-usesessionstorage"><a href="#参见-https-vueuse-org-core-usesessionstorage" class="header-anchor">#</a> 参见 https://vueuse.org/core/useSessionStorage/</h5></li></ul> <h3 id="uselocalstorage"><a href="#uselocalstorage" class="header-anchor">#</a> useLocalStorage</h3> <p>返回一个 Ref 对象，并响应式的设置 <code>LocalStorage</code> 中的值。</p> <p>用法与 useStorage 类似，不过没有了 设置 Storage 的参数。</p> <ul><li><h5 id="参见-https-vueuse-org-core-uselocalstorage"><a href="#参见-https-vueuse-org-core-uselocalstorage" class="header-anchor">#</a> 参见 https://vueuse.org/core/useLocalStorage/</h5></li></ul> <h2 id="dom-元素相关"><a href="#dom-元素相关" class="header-anchor">#</a> DOM 元素相关</h2> <h3 id="useactiveelement"><a href="#useactiveelement" class="header-anchor">#</a> useActiveElement</h3> <p>动态的获取当前文档中聚焦状态的元素。此处的 <strong>聚焦</strong> 不是单纯的文本框 <code>:Focus</code> 或 <code>:active</code> 聚焦的状态。</p> <p>而是指用户使用 Tab 切换焦点时对应的元素。</p> <p>没有焦点元素时默认返回 <code>&lt;Body&gt;</code> 或 <code>null</code></p> <ul><li><h5 id="示例-6"><a href="#示例-6" class="header-anchor">#</a> 示例</h5> <p>为焦点元素添加样式：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useActiveElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> aEL <span class="token operator">=</span> useActiveElement<span class="token operator">&lt;</span>HTMLInputElement <span class="token operator">|</span> HTMLButtonElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> activeValue <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>aEL<span class="token punctuation">.</span>value<span class="token operator">?.</span>tagName <span class="token operator">==</span> <span class="token string">&quot;BODY&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;Body&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> aEL<span class="token operator">?.</span>value<span class="token operator">?.</span>value <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token operator">?</span> aEL<span class="token punctuation">.</span>value<span class="token punctuation">.</span>textContent <span class="token operator">:</span> aEL<span class="token punctuation">.</span>value<span class="token operator">?.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>aEL<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">nV<span class="token punctuation">,</span> oV</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    oV<span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nV<span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in 6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Button-{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in 6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`Input-${item}`<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Current Active Element: 【{{ activeValue }}】<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243209.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-useactiveelement"><a href="#参见-https-vueuse-org-core-useactiveelement" class="header-anchor">#</a> 参见 https://vueuse.org/core/useActiveElement/</h5></li></ul> <h3 id="💎-useelementbounding"><a href="#💎-useelementbounding" class="header-anchor">#</a> 💎 useElementBounding</h3> <p>动态的获取元素的边界信息，如：宽度、高度、X 轴、Y 轴等。</p> <ul><li><h5 id="ts-类型"><a href="#ts-类型" class="header-anchor">#</a> TS 类型</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useElementBounding</span><span class="token punctuation">(</span>
    target<span class="token operator">:</span> MaybeComputedElementRef<span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseElementBoundingOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 元素高度</span>
    height<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 距离视口底部多少像素</span>
    bottom<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 距离视口左边多少像素</span>
    left<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 距离视口右边多少像素</span>
    right<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 距离视口底部多少像素</span>
    top<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素宽度</span>
    width<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素的绝对定位 X 值,与 left 相同</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素的绝对定位 X 值,与 top 相同</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="示例-7"><a href="#示例-7" class="header-anchor">#</a> 示例</h5> <p>动态获取元素边界信息：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> left<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementBounding</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>支持无渲染组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementBounding</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Width: {{ width }}
  Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementBounding</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-useelementbounding"><a href="#参见-https-vueuse-org-core-useelementbounding" class="header-anchor">#</a> 参见 https://vueuse.org/core/UseElementBounding/</h5></li></ul> <h3 id="useelementsize"><a href="#useelementsize" class="header-anchor">#</a> useElementSize</h3> <p>动态的获取元素的宽度与高度。</p> <ul><li><h5 id="示例-8"><a href="#示例-8" class="header-anchor">#</a> 示例</h5> <p>动态获取宽度与高度：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementSize</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>支持无渲染组件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementSize</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Width: {{ width }} Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementSize</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-useelementsize"><a href="#参见-https-vueuse-org-core-useelementsize" class="header-anchor">#</a> 参见 https://vueuse.org/core/useElementSize/</h5></li></ul> <h3 id="💎-useelementvisibility"><a href="#💎-useelementvisibility" class="header-anchor">#</a> 💎 useElementVisibility</h3> <p>判断元素是否还在浏览器视口中出现。</p> <ul><li><h5 id="示例-9"><a href="#示例-9" class="header-anchor">#</a> 示例</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useElementVisibility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> targetIsVisible <span class="token operator">=</span> <span class="token function">useElementVisibility</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> IsVisible <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    targetIsVisible<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;于视口中可见&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;于视口中消失&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tool<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>元素{{ IsVisible }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243753.gif" alt="demo" style="zoom:80%;"> <p>支持无渲染组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseElementVisibility</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ isVisible }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Is Visible: {{ isVisible }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseElementVisibility</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-useelementvisibility"><a href="#参见-https-vueuse-org-core-useelementvisibility" class="header-anchor">#</a> 参见 https://vueuse.org/core/useElementVisibility/</h5></li></ul> <h3 id="💎-usemouseinelement"><a href="#💎-usemouseinelement" class="header-anchor">#</a> 💎 useMouseInElement</h3> <p>动态的获取鼠标于元素之间的关系。</p> <ul><li><h5 id="详细信息-3"><a href="#详细信息-3" class="header-anchor">#</a> 详细信息</h5> <p>返回值为：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useMouseInElement</span><span class="token punctuation">(</span>
    target<span class="token operator">?</span><span class="token operator">:</span> MaybeElementRef<span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> MouseInElementOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 鼠标的 X 轴值</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标的 Y 轴值</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    sourceType<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span>MouseSourceType<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标距离元素左边多少像素</span>
    elementX<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标距离元素顶部多少像素</span>
    elementY<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素 X 轴位置值</span>
    elementPositionX<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素 Y 轴位置值</span>
    elementPositionY<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素高度</span>
    elementHeight<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 元素宽度</span>
    elementWidth<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标是否在元素内部</span>
    isOutside<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 停止监听</span>
    <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="示例-10"><a href="#示例-10" class="header-anchor">#</a> 示例</h5> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243567.gif" alt="demo" style="zoom:80%;"> <p>支持无渲染组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseMouseInElement</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ elementX, elementY, isOutside }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  x: {{ elementX }}
  y: {{ elementY }}
  Is Outside: {{ isOutside }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseMouseInElement</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usemouseinelement"><a href="#参见-https-vueuse-org-core-usemouseinelement" class="header-anchor">#</a> 参见 https://vueuse.org/core/useMouseInElement/</h5></li></ul> <h3 id="💎-usewindowscroll"><a href="#💎-usewindowscroll" class="header-anchor">#</a> 💎 useWindowScroll</h3> <p>动态获取滚动框 X、Y 值，值越大距离越远。</p> <ul><li><h5 id="示例-11"><a href="#示例-11" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useWindowScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usewindowscroll"><a href="#参见-https-vueuse-org-core-usewindowscroll" class="header-anchor">#</a> 参见 https://vueuse.org/core/useWindowScroll/</h5></li></ul> <h3 id="💎-usewindowsize"><a href="#💎-usewindowsize" class="header-anchor">#</a> 💎 useWindowSize</h3> <p>动态获取视口的宽度与高度。</p> <ul><li><h5 id="示例-12"><a href="#示例-12" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useWindowSize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243932.gif" alt="demo" style="zoom:80%;"> <p>支持无渲染组件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UseWindowSize</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width, height }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Width: {{ width }}
  Height: {{ height }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UseWindowSize</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usewindowsize"><a href="#参见-https-vueuse-org-core-usewindowsize" class="header-anchor">#</a> 参见 https://vueuse.org/core/useWindowSize/</h5></li></ul> <h2 id="bom-相关"><a href="#bom-相关" class="header-anchor">#</a> BOM 相关</h2> <h3 id="usedark"><a href="#usedark" class="header-anchor">#</a> useDark</h3> <p>获取当前是否为深色模式，返回一个值为布尔值的 Ref 对象。</p> <ul><li><h5 id="详细信息-4"><a href="#详细信息-4" class="header-anchor">#</a> 详细信息</h5> <p>使用了这个 API，会默认在 HTML 标签中创建一个类，若当前是深色模式，则类的值为 <code>drak</code>，若是浅色模式是，则类的值为空。</p> <p>并会在 <code>LocalStorage</code> 中响应式创建一个值为 <code>drak</code> 或 <code>light</code> 或 <code>auto</code> 的 <code>vueuse-color-scheme</code> 默认键。</p></li> <li><h5 id="示例-13"><a href="#示例-13" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 如果为深色模式，赋给 selector 上 attribute 的值</span>
    valueDark<span class="token operator">:</span> <span class="token string">&quot;drak&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果为浅色模式，赋给 selector 上 attribute 的值</span>
    valueLight<span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 需要赋值的元素选择器</span>
    selector<span class="token operator">:</span> <span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 赋值的属性名</span>
    attribute<span class="token operator">:</span> <span class="token string">&quot;color-scheme&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 需要保存到 Storage 中的键名</span>
    storageKey<span class="token operator">:</span> <span class="token string">&quot;color-scheme&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 保存到 sessionStorage</span>
    storage<span class="token operator">:</span> sessionStorage<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usedark"><a href="#参见-https-vueuse-org-core-usedark" class="header-anchor">#</a> 参见 https://vueuse.org/core/useDark/</h5></li></ul> <h3 id="💎-useeventlistener"><a href="#💎-useeventlistener" class="header-anchor">#</a> 💎 useEventListener</h3> <p>轻松使用事件监听器，在装载时使用 <code>addEventListener</code> 注册，在卸载时自动使用 <code>removeEventListener</code> 注册。</p> <ul><li><h5 id="详细信息-5"><a href="#详细信息-5" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为监听的对象。</p> <p>第二个参数为事件的名称。</p> <p>第三个参数为回调函数。</p> <p>返回值为卸载监听器的函数</p></li> <li><h5 id="示例-14"><a href="#示例-14" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token function">useEventListener</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> ev <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以传递一个 Ref 模板引用作为事件目标，当 Ref 目标切换时，会自动删除绑定在之前引用上的事件监听并注册新的事件监听。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useEventListener</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cond<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Div1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Div2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用返回值卸载监听器：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEventListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cleanup <span class="token operator">=</span> <span class="token function">useEventListener</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 卸载监听器</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-useeventlistener"><a href="#参见-https-vueuse-org-core-useeventlistener" class="header-anchor">#</a> 参见 https://vueuse.org/core/useEventListener/</h5></li></ul> <h3 id="💎-usefiledialog"><a href="#💎-usefiledialog" class="header-anchor">#</a> 💎 useFileDialog</h3> <p>轻松打开文件对话框。</p> <ul><li><h5 id="ts-类型-2"><a href="#ts-类型-2" class="header-anchor">#</a> TS 类型</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useFileDialog</span><span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> UseFileDialogOptions<span class="token punctuation">)</span><span class="token operator">:</span> UseFileDialogReturn<span class="token punctuation">;</span>
<span class="token comment">// 入参配置项</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseFileDialogOptions</span> <span class="token keyword">extends</span> <span class="token class-name">ConfigurableDocument</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否支持多个,默认为 True</span>
    multiple<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token comment">// 限制文件类型，默认为 `*`</span>
    accept<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    capture<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseFileDialogReturn</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取到的文件</span>
    files<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>FileList <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 打开文件选择框的函数</span>
    <span class="token function-variable function">open</span><span class="token operator">:</span> <span class="token punctuation">(</span>localOptions<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&lt;</span>UseFileDialogOptions<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 重置文件</span>
    <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="详细信息-6"><a href="#详细信息-6" class="header-anchor">#</a> 详细信息</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useFileDialog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> files<span class="token punctuation">,</span> open<span class="token punctuation">,</span> reset <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>open()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Choose file<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>reset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>名称：{{ files[0].name }}，大小：{{ files[0].size }}字节<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243638.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-usefiledialog"><a href="#参见-https-vueuse-org-core-usefiledialog" class="header-anchor">#</a> 参见 https://vueuse.org/core/useFileDialog/</h5></li></ul> <h3 id="💎-usetitle"><a href="#💎-usetitle" class="header-anchor">#</a> 💎 useTitle</h3> <p>动态的设置当前页面标题</p> <ul><li><h5 id="示例-15"><a href="#示例-15" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useTitle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 修改当前标题</span>
</code></pre></div><p>入参为默认标题：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">&quot;初始标题&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>支持计算属性：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;🌙 晚上好!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☀️ 早上好!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>或者 Getter 函数</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isDark<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;🌙 晚上好!&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☀️ 早上好!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usetitle"><a href="#参见-https-vueuse-org-core-usetitle" class="header-anchor">#</a> 参见 https://vueuse.org/core/useTitle/</h5></li></ul> <h2 id="监听相关"><a href="#监听相关" class="header-anchor">#</a> 监听相关</h2> <h3 id="onclickoutside"><a href="#onclickoutside" class="header-anchor">#</a> onClickOutside</h3> <p>响应式监听对指定元素外的点击，对模式或下拉菜单很有用。</p> <ul><li><h5 id="示例-16"><a href="#示例-16" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onClickOutside</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> event <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;点击元素外&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243091.gif" alt="demo" style="zoom:80%;"> <p>提供无渲染组件版本：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OnClickOutside</span>
    <span class="token attr-name">@trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
        ignore: [
            /* ... */
        ],
    }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>点我外面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OnClickOutside</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-onclickoutside"><a href="#参见-https-vueuse-org-core-onclickoutside" class="header-anchor">#</a> 参见 https://vueuse.org/core/onClickOutside/</h5></li></ul> <h3 id="useelementhover"><a href="#useelementhover" class="header-anchor">#</a> useElementHover</h3> <p>响应式监听对元素的悬停状态。</p> <ul><li><h5 id="示例-17"><a href="#示例-17" class="header-anchor">#</a> 示例</h5> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useElementHover <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isHovered <span class="token operator">=</span> <span class="token function">useElementHover</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>isHovered<span class="token punctuation">,</span> <span class="token parameter">nV</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nV <span class="token operator">?</span> <span class="token string">&quot;进来了&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;出去了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243468.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-useelementhover"><a href="#参见-https-vueuse-org-core-useelementhover" class="header-anchor">#</a> 参见 https://vueuse.org/core/useElementHover/</h5></li></ul> <h3 id="💎-useinfinitescroll"><a href="#💎-useinfinitescroll" class="header-anchor">#</a> 💎 useInfiniteScroll</h3> <p>无限滚动，监听指定元素的滚动条到底后执行回调函数。</p> <ul><li><h5 id="详细信息-7"><a href="#详细信息-7" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数指定元素。</p> <p>第二个参数指定回调函数。</p> <p>第三个参数为配置项对象：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UseInfiniteScrollOptions</span> <span class="token keyword">extends</span> <span class="token class-name">UseScrollOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 距离指定方向到头多少像素时触发回调函数，默认为 `0`</span>
    distance<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 指定监听的方位，默认为 `bottom`</span>
    direction<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;bottom&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;left&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 是否每次触发回调后回到原点，默认为 `False`</span>
    preserveScrollPosition<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="示例-18"><a href="#示例-18" class="header-anchor">#</a> 示例</h5> <p>监听 window 滚动条到底增加元素高度。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useElementSize</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useInfiniteScroll</span><span class="token punctuation">(</span>
    window<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        distance<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243980.gif" alt="demo" style="zoom:80%;"> <p>无限添加元素：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useInfiniteScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">useInfiniteScroll</span><span class="token punctuation">(</span>
    main<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> items<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            items<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243042.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-useinfinitescroll"><a href="#参见-https-vueuse-org-core-useinfinitescroll" class="header-anchor">#</a> 参见 https://vueuse.org/core/useInfiniteScroll/</h5></li></ul> <h3 id="💎-usescroll"><a href="#💎-usescroll" class="header-anchor">#</a> 💎 useScroll</h3> <p>响应式获取指定元素滚动条的所有消息，如滚动是否到底、是否正在滚动、滚动条位置值等...</p> <ul><li><h5 id="ts-类型-3"><a href="#ts-类型-3" class="header-anchor">#</a> TS 类型</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useScroll</span><span class="token punctuation">(</span>
    element<span class="token operator">:</span> MaybeComputedRef<span class="token operator">&lt;</span>
        HTMLElement <span class="token operator">|</span> SVGElement <span class="token operator">|</span> Window <span class="token operator">|</span> Document <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
    <span class="token operator">&gt;</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseScrollOptions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 滚动条的 X 轴位置值</span>
    x<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>WritableComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动条的 Y 轴位置值</span>
    y<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>WritableComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动条是否正在滚动</span>
    isScrolling<span class="token operator">:</span> vue_demi<span class="token punctuation">.</span>Ref<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动条位置状态</span>
    arrivedState<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `底部`滚动条是否在`最左边`，即 `X` 是否为 `0`</span>
        left<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `底部`滚动条是否在`最右边`，即 `X` 是否为`最大`</span>
        right<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `右边`滚动条是否在`最上面`，即 `Y` 是否为 `0`</span>
        top<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `右边`滚动条是否在`最下面`，即 `Y` 是否为`最大`</span>
        bottom<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动条运动状态</span>
    directions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `底部`滚动条是否正在向`左`滚动</span>
        left<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `底部`滚动条是否正在向`右`滚动</span>
        right<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `右边`滚动条是否正在向`上`滚动</span>
        top<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
        <span class="token comment">// `右边`滚动条是否正在向`下`滚动</span>
        bottom<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="详细信息-8"><a href="#详细信息-8" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为指定监听的元素。</p> <p>第二个参数为指定的配置项对象，类型如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseScrollOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 节流事件，默认为 `0`</span>
    throttle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动结束时的检查时间，默认值为 `200`</span>
    <span class="token comment">// 当`throttle`被配置时，此配置将被设置为 `(throttle + idle)`。</span>
    idle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 以x像素偏移到达状态，不知道有啥用</span>
    offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        left<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        right<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        top<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        bottom<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动中触发</span>
    onScroll<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动停止触发</span>
    onStop<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动事件的监听器选项</span>
    <span class="token comment">// 默认为 `{capture: false, passive: true}`</span>
    eventListenerOptions<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> AddEventListenerOptions<span class="token punctuation">;</span>
    <span class="token comment">// 当设置滚动条位置时是否开启平滑移动，默认值为 `auto`，可选值为 `smooth`</span>
    behavior<span class="token operator">?</span><span class="token operator">:</span> MaybeComputedRef<span class="token operator">&lt;</span>ScrollBehavior<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>返回值为：见上方 TS 类型。</p></li> <li><h5 id="示例-19"><a href="#示例-19" class="header-anchor">#</a> 示例</h5> <p>手动无限添加元素：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> directions<span class="token punctuation">,</span> arrivedState <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useScroll</span><span class="token punctuation">(</span>main<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arrivedState<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> items<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            items<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>y += 200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去下面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>y -= 200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去上面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243990.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-usescroll"><a href="#参见-https-vueuse-org-core-usescroll" class="header-anchor">#</a> 参见 https://vueuse.org/core/useScroll/</h5></li></ul> <h3 id="usetextselection"><a href="#usetextselection" class="header-anchor">#</a> useTextSelection</h3> <p>响应式获取用户选中文本</p> <ul><li><h5 id="示例-20"><a href="#示例-20" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTextSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243499.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-core-usetextselection"><a href="#参见-https-vueuse-org-core-usetextselection" class="header-anchor">#</a> 参见 https://vueuse.org/core/useTextSelection/</h5></li></ul> <h2 id="动画相关"><a href="#动画相关" class="header-anchor">#</a> 动画相关</h2> <h3 id="usetransition"><a href="#usetransition" class="header-anchor">#</a> useTransition</h3> <p>监听源值的修改，并返回一个以过渡形式不断修改的原值镜像。</p> <ul><li><h5 id="ts-类型-4"><a href="#ts-类型-4" class="header-anchor">#</a> TS 类型</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>
    source<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseTransitionOptions
<span class="token punctuation">)</span><span class="token operator">:</span> ComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useTransition</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Ref<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span>
    source<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> UseTransitionOptions
<span class="token punctuation">)</span><span class="token operator">:</span> ComputedRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="详细信息-9"><a href="#详细信息-9" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为监听的对象值。</p> <p>第二个参数为配置项对象。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseTransitionOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开始之前等待的时间，单位为 `ms`，默认为 0</span>
    delay<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 是否禁用过渡效果</span>
    disabled<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 过渡持续的时间，单位为 `ms`</span>
    duration<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">// 过渡完成时执行的回调</span>
    onFinished<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 过渡开始时执行的回调</span>
    onStarted<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token comment">// 指定贝塞尔曲线，值为 [x,x,x,x]</span>
    transition<span class="token operator">?</span><span class="token operator">:</span> MaybeRef<span class="token operator">&lt;</span>EasingFunction <span class="token operator">|</span> CubicBezierPoints<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h5 id="示例-21"><a href="#示例-21" class="header-anchor">#</a> 示例</h5> <p>数字过渡效果：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改 num 的值会以`过渡`的形式改变 tNum 的值</span>
<span class="token keyword">const</span> tNum <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.34</span><span class="token punctuation">,</span> <span class="token number">0.52</span><span class="token punctuation">,</span> <span class="token number">0.91</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num += 500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>增加500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
        {{ tNum.toFixed(0) }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243498.gif" alt="demo" style="zoom:80%;"></li></ul> <p>HSL 颜色过渡效果：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改 color 的值会以`过渡`的形式改变 outHalColor 的值</span>
<span class="token comment">// outHalColor 为 color 的`镜像`</span>
<span class="token keyword">const</span> outHalColor <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.34</span><span class="token punctuation">,</span> <span class="token number">0.52</span><span class="token punctuation">,</span> <span class="token number">0.91</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hslStyle <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>h<span class="token punctuation">,</span> s<span class="token punctuation">,</span> l<span class="token punctuation">]</span> <span class="token operator">=</span> outHalColor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>h<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">deg, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>l<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Hue - 色相<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[0]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>360<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Saturation - 饱和度<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[1]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>Lightness - 亮度<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-slider</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color[2]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: hslStyle }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ hslStyle }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243283.gif" alt="demo" style="zoom:80%;"> <ul><li><h5 id="参见-https-vueuse-org-core-usetransition"><a href="#参见-https-vueuse-org-core-usetransition" class="header-anchor">#</a> 参见 https://vueuse.org/core/useTransition/</h5></li></ul> <h2 id="增强-watch"><a href="#增强-watch" class="header-anchor">#</a> 增强 Watch</h2> <h3 id="watcharray"><a href="#watcharray" class="header-anchor">#</a> watchArray</h3> <p><code>watchArray</code> 更加侧重于监听数组源对象。</p> <ul><li><h5 id="详细信息-10"><a href="#详细信息-10" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为监听的响应式数组对象。</p> <p>第二个参数为执行的回调函数，回调函数的形参如下：</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name">WatchArrayCallback<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">OV</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token comment">// 新值</span>
    value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">,</span>
    <span class="token comment">// 旧值</span>
    oldValue<span class="token operator">:</span> <span class="token constant">OV</span><span class="token punctuation">,</span>
    <span class="token comment">// 添加的元素，用 `[]` 包裹</span>
    added<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">,</span>
    <span class="token comment">// 移除的元素，用 `[]` 包裹</span>
    removed<span class="token operator">:</span> <span class="token constant">OV</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行回调函数前的清理函数</span>
    <span class="token function-variable function">onCleanup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token function-variable function">cleanupFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><h5 id="示例-22"><a href="#示例-22" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchArray <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watchArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token punctuation">(</span>newList<span class="token punctuation">,</span> oldList<span class="token punctuation">,</span> added<span class="token punctuation">,</span> removed<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>added<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-shared-watcharray"><a href="#参见-https-vueuse-org-shared-watcharray" class="header-anchor">#</a> 参见 https://vueuse.org/shared/watchArray/</h5></li></ul> <h3 id="watchdebounced"><a href="#watchdebounced" class="header-anchor">#</a> watchDebounced</h3> <p>为普通的 <code>watch</code> 增加防抖功能</p> <ul><li><h5 id="示例-23"><a href="#示例-23" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">watchThrottled</span><span class="token punctuation">(</span>
    source<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;changed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> debounce<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091243408.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-shared-watchdebounced"><a href="#参见-https-vueuse-org-shared-watchdebounced" class="header-anchor">#</a> 参见 https://vueuse.org/shared/watchDebounced/</h5></li></ul> <h3 id="watchthrottled"><a href="#watchthrottled" class="header-anchor">#</a> watchThrottled</h3> <p>为普通的 <code>watch</code> 增加节流功能</p> <ul><li><h5 id="示例-24"><a href="#示例-24" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">watchThrottled</span><span class="token punctuation">(</span>
    source<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;changed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> throttle<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-shared-watchthrottled"><a href="#参见-https-vueuse-org-shared-watchthrottled" class="header-anchor">#</a> 参见 https://vueuse.org/shared/watchThrottled/</h5></li></ul> <h3 id="watchpausable"><a href="#watchpausable" class="header-anchor">#</a> watchPausable</h3> <p>为普通的 <code>watch</code> 增加暂停、恢复、停止功能</p> <ul><li><h5 id="示例-25"><a href="#示例-25" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// stop   删除监听器</span>
<span class="token comment">// pause  暂停监听器</span>
<span class="token comment">// resume 恢复监听器</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> stop<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> resume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">watchPausable</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> v <span class="token operator">=&gt;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Changed to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-watchpausable"><a href="#参见-https-vueuse-org-core-watchpausable" class="header-anchor">#</a> 参见 https://vueuse.org/core/watchPausable/</h5></li></ul> <h2 id="时间相关"><a href="#时间相关" class="header-anchor">#</a> 时间相关</h2> <h3 id="usenow"><a href="#usenow" class="header-anchor">#</a> useNow</h3> <p>响应式获取当前时间：格式为 <code>Now: Tue Dec 20 2022 xx:xx:xx GMT+0800 (中国标准时间)</code></p> <ul><li><h5 id="示例-26"><a href="#示例-26" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> now<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> resume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> controls<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><h5 id="参见-https-vueuse-org-core-usenow"><a href="#参见-https-vueuse-org-core-usenow" class="header-anchor">#</a> 参见 https://vueuse.org/core/useNow/</h5></li></ul> <h3 id="usedateformat"><a href="#usedateformat" class="header-anchor">#</a> useDateFormat</h3> <p>根据传入的标记字符串获取格式化的日期。</p> <ul><li><h5 id="详细信息-11"><a href="#详细信息-11" class="header-anchor">#</a> 详细信息</h5> <p>第一个参数为时间|日期信息。</p> <p>第二个参数为格式化配置。</p> <ul><li><p>常用：<code>YYYY-MM-DD HH:mm:ss</code> 年-月-日 时:分:秒</p> <ul><li><table><thead><tr><th style="text-align:center;">输入</th> <th style="text-align:center;">输出</th> <th>说明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>YY</code></td> <td style="text-align:center;">18</td> <td>年份：两位数</td></tr> <tr><td style="text-align:center;"><code>YYYY</code></td> <td style="text-align:center;">2018</td> <td>年份：四位数</td></tr> <tr><td style="text-align:center;"><code>M</code></td> <td style="text-align:center;">1-12</td> <td>月份：一位数</td></tr> <tr><td style="text-align:center;"><code>MM</code></td> <td style="text-align:center;">01-12</td> <td>月份：两位数</td></tr> <tr><td style="text-align:center;"><code>MMM</code></td> <td style="text-align:center;">Jan-Dec</td> <td>月份简写</td></tr> <tr><td style="text-align:center;"><code>MMMM</code></td> <td style="text-align:center;">January-December</td> <td>月份简写</td></tr> <tr><td style="text-align:center;"><code>D</code></td> <td style="text-align:center;">1-31</td> <td>日期：一位数开始</td></tr> <tr><td style="text-align:center;"><code>DD</code></td> <td style="text-align:center;">01-31</td> <td>日期：二位数开始</td></tr> <tr><td style="text-align:center;"><code>H</code></td> <td style="text-align:center;">0-23</td> <td>二十四小时制：一位数开始</td></tr> <tr><td style="text-align:center;"><code>HH</code></td> <td style="text-align:center;">00-23</td> <td>二十四小时制：二位数开始</td></tr> <tr><td style="text-align:center;"><code>h</code></td> <td style="text-align:center;">1-12</td> <td>十二小时制：一位数开始</td></tr> <tr><td style="text-align:center;"><code>hh</code></td> <td style="text-align:center;">01-12</td> <td>十二小时制：二位数开始</td></tr> <tr><td style="text-align:center;"><code>m</code></td> <td style="text-align:center;">0-59</td> <td>分钟：一位数开始</td></tr> <tr><td style="text-align:center;"><code>mm</code></td> <td style="text-align:center;">00-59</td> <td>分钟：二位数开始</td></tr> <tr><td style="text-align:center;"><code>s</code></td> <td style="text-align:center;">0-59</td> <td>秒：一位数开始</td></tr> <tr><td style="text-align:center;"><code>ss</code></td> <td style="text-align:center;">00-59</td> <td>秒：一位数开始</td></tr> <tr><td style="text-align:center;"><code>SSS</code></td> <td style="text-align:center;">000-999</td> <td>毫秒：三位数开始</td></tr> <tr><td style="text-align:center;"><code>A</code></td> <td style="text-align:center;">AM PM</td> <td>大写上下午时间</td></tr> <tr><td style="text-align:center;"><code>AA</code></td> <td style="text-align:center;">A.M. P.M.</td> <td>大写上下午时间：带 <code>.</code></td></tr> <tr><td style="text-align:center;"><code>a</code></td> <td style="text-align:center;">am pm</td> <td>小写上下午时间</td></tr> <tr><td style="text-align:center;"><code>aa</code></td> <td style="text-align:center;">a.m. p.m.</td> <td>小写上下午时间：带 <code>.</code></td></tr> <tr><td style="text-align:center;"><code>d</code></td> <td style="text-align:center;">0-6</td> <td>星期几：周日为 <code>0</code></td></tr> <tr><td style="text-align:center;"><code>dd</code></td> <td style="text-align:center;">S-S</td> <td>星期几的最小名称</td></tr> <tr><td style="text-align:center;"><code>ddd</code></td> <td style="text-align:center;">Sun-Sat</td> <td>一周中一天的简称</td></tr> <tr><td style="text-align:center;"><code>dddd</code></td> <td style="text-align:center;">Sunday-Saturday</td> <td>一周中一天的全称</td></tr></tbody></table></li></ul></li></ul> <p>第三个参数为配置项对象。</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">UseDateFormatOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置地区，配合 `dd/ddd/dddd/MMM/MMMM` 格式化使用</span>
    locales<span class="token operator">?</span><span class="token operator">:</span> Intl<span class="token punctuation">.</span>LocalesArgument<span class="token punctuation">;</span>
    <span class="token comment">// 一个自定义函数，用于重新修改子午线的显示方式</span>
    customMeridiem<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>
        hours<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
        minutes<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
        isLowercase<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
        hasPeriod<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p>返回值为格式化后的日期字符串</p> <ul><li><h5 id="示例-27"><a href="#示例-27" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNow<span class="token punctuation">,</span> useDateFormat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formatted <span class="token operator">=</span> <span class="token function">useDateFormat</span><span class="token punctuation">(</span><span class="token function">useNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><h5 id="参见-https-vueuse-org-shared-usedateformat"><a href="#参见-https-vueuse-org-shared-usedateformat" class="header-anchor">#</a> 参见 https://vueuse.org/shared/useDateFormat/</h5></li></ul> <h2 id="工具相关"><a href="#工具相关" class="header-anchor">#</a> 工具相关</h2> <h3 id="usetoggle"><a href="#usetoggle" class="header-anchor">#</a> useToggle</h3> <p>接收一个布尔值作为入参，返回一个函数可以切换源值的布尔值。</p> <ul><li><h5 id="示例-28"><a href="#示例-28" class="header-anchor">#</a> 示例</h5> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> switchBool <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">switchBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token function">switchBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div> <img src="https://sbr-1314368469.cos.ap-guangzhou.myqcloud.com/Images/202301091244371.gif" alt="demo" style="zoom:80%;"></li> <li><h5 id="参见-https-vueuse-org-shared-usetoggle"><a href="#参见-https-vueuse-org-shared-usetoggle" class="header-anchor">#</a> 参见 https://vueuse.org/shared/useToggle/</h5></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#🌌-获取" title="🌌 获取">🌌 获取</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#npm" title="NPM">NPM</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#cdn" title="CDN">CDN</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#🛫-最佳实践" title="🛫 最佳实践">🛫 最佳实践</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#结构" title="结构">结构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#将-ref-作为参数传递" title="将 Ref 作为参数传递">将 Ref 作为参数传递</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#无渲染组件" title="无渲染组件">无渲染组件</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#state-状态相关" title="State 状态相关">State 状态相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#userefhistory" title="useRefHistory">useRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usemanualrefhistory" title="useManualRefHistory">useManualRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedebouncedrefhistory" title="useDebouncedRefHistory">useDebouncedRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usethrottledrefhistory" title="useThrottledRefHistory">useThrottledRefHistory</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usestorage" title="💎 useStorage">💎 useStorage</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usesessionstorage" title="useSessionStorage">useSessionStorage</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#uselocalstorage" title="useLocalStorage">useLocalStorage</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#dom-元素相关" title="DOM 元素相关">DOM 元素相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useactiveelement" title="useActiveElement">useActiveElement</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-useelementbounding" title="💎 useElementBounding">💎 useElementBounding</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useelementsize" title="useElementSize">useElementSize</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-useelementvisibility" title="💎 useElementVisibility">💎 useElementVisibility</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usemouseinelement" title="💎 useMouseInElement">💎 useMouseInElement</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usewindowscroll" title="💎 useWindowScroll">💎 useWindowScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usewindowsize" title="💎 useWindowSize">💎 useWindowSize</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#bom-相关" title="BOM 相关">BOM 相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedark" title="useDark">useDark</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-useeventlistener" title="💎 useEventListener">💎 useEventListener</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usefiledialog" title="💎 useFileDialog">💎 useFileDialog</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usetitle" title="💎 useTitle">💎 useTitle</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#监听相关" title="监听相关">监听相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#onclickoutside" title="onClickOutside">onClickOutside</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#useelementhover" title="useElementHover">useElementHover</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-useinfinitescroll" title="💎 useInfiniteScroll">💎 useInfiniteScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#💎-usescroll" title="💎 useScroll">💎 useScroll</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetextselection" title="useTextSelection">useTextSelection</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#动画相关" title="动画相关">动画相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetransition" title="useTransition">useTransition</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#增强-watch" title="增强 Watch">增强 Watch</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watcharray" title="watchArray">watchArray</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchdebounced" title="watchDebounced">watchDebounced</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchthrottled" title="watchThrottled">watchThrottled</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#watchpausable" title="watchPausable">watchPausable</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#时间相关" title="时间相关">时间相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usenow" title="useNow">useNow</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usedateformat" title="useDateFormat">useDateFormat</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#工具相关" title="工具相关">工具相关</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#usetoggle" title="useToggle">useToggle</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/bigRiceRice" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>该网站使用 vuepress + @vuepress/theme-blog 搭建 —— by: Big Rice © 2023</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/bigRiceRice.io/dist/assets/js/app.1ab36bb0.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/6.4adeed80.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/3.2a259be5.js" defer></script><script src="/bigRiceRice.io/dist/assets/js/62.42d890ab.js" defer></script>
  </body>
</html>
